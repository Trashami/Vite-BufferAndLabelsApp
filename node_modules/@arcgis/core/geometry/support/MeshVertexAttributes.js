/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as r}from"../../chunks/tslib.es6.js";import{JSONSupport as o}from"../../core/JSONSupport.js";import{clone as t}from"../../core/lang.js";import n from"../../core/Logger.js";import{property as e}from"../../core/accessorSupport/decorators/property.js";import{cast as a}from"../../core/accessorSupport/decorators/cast.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";var i;const l="esri.geometry.support.MeshVertexAttributes",c=n.getLogger(l);let p=i=class extends o{constructor(r){super(r),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(r){return g(r,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},c)}castPosition(r){r&&r instanceof Float32Array&&c.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return g(r,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},c)}castUv(r){return g(r,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},c)}castNormal(r){return g(r,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},c)}castTangent(r){return g(r,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},c)}clone(){const r={position:t(this.position),uv:t(this.uv),normal:t(this.normal),tangent:t(this.tangent),color:t(this.color)};return new i(r)}clonePositional(){const r={position:t(this.position),normal:t(this.normal),tangent:t(this.tangent),uv:this.uv,color:this.color};return new i(r)}};function u(r,o,t,n){const{loggerTag:e,stride:a}=o;return r.length%a!=0?(n.error(e,`Invalid array length, expected a multiple of ${a}`),new t([])):r}function g(r,o,t,n,e){if(!r)return r;if(r instanceof o)return u(r,n,o,e);for(const a of t)if(r instanceof a)return u(new o(r),n,o,e);if(Array.isArray(r))return u(new o(r),n,o,e);{const n=t.map((r=>`'${r.name}'`));return e.error(`Failed to set property, expected one of ${n}, but got ${r.constructor.name}`),new o([])}}function m(r,o,t){o[t]=y(r)}function y(r){const o=new Array(r.length);for(let t=0;t<r.length;t++)o[t]=r[t];return o}r([e({json:{write:m}})],p.prototype,"color",void 0),r([a("color")],p.prototype,"castColor",null),r([e({nonNullable:!0,json:{write:m}})],p.prototype,"position",void 0),r([a("position")],p.prototype,"castPosition",null),r([e({json:{write:m}})],p.prototype,"uv",void 0),r([a("uv")],p.prototype,"castUv",null),r([e({json:{write:m}})],p.prototype,"normal",void 0),r([a("normal")],p.prototype,"castNormal",null),r([e({json:{write:m}})],p.prototype,"tangent",void 0),r([a("tangent")],p.prototype,"castTangent",null),p=i=r([s(l)],p);export{p as MeshVertexAttributes,g as castArray};
