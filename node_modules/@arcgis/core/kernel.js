/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import has from"./core/has.js";import{getInterceptor as e,addQueryParameter as t}from"./core/urlUtils.js";export{buildDate,commitHash as revision}from"./support/revision.js";const a="4.25",r={async request(t,a){const{default:r}=await import("./request.js"),s=t.options,n=s.responseType;s.signal=a?.signal,s.responseType="native"===n||"native-request-init"===n?"native-request-init":n&&["blob","json","text"].includes(n)&&e(t.url)?.after?n:"array-buffer";const o=await r(t.url,s),i={data:o.data,ssl:o.ssl};switch(o.requestOptions?.responseType){case"native-request-init":return delete i.data.signal,i;case"blob":i.data=await i.data.arrayBuffer();break;case"json":i.data=(new TextEncoder).encode(JSON.stringify(i.data)).buffer;break;case"text":i.data=(new TextEncoder).encode(i.data).buffer}return{result:i,transferList:[i.data]}}};let s;function n(e){s=e}function o(e){const a=s&&s.findCredential(e);return a&&a.token?t(e,"token",a.token):e}has("host-webworker");export{o as addTokenParameter,s as id,n as setId,a as version,r as workerMessages};
