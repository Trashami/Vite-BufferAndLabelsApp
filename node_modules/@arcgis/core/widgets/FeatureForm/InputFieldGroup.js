/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as i}from"../../chunks/tslib.es6.js";import e from"../../core/Accessor.js";import{HandleOwnerMixin as t}from"../../core/HandleOwner.js";import{unwrap as s,applySome as r,isSome as o}from"../../core/maybe.js";import{watch as l}from"../../core/reactiveUtils.js";import{property as p}from"../../core/accessorSupport/decorators/property.js";import"../../core/arrayUtils.js";import"../../core/accessorSupport/ensureType.js";import{subclass as n}from"../../core/accessorSupport/decorators/subclass.js";let u=class extends(t(e)){constructor(i){super(i),this._expressionTrackingHandles=new Map,this.visibilityExpressionExecutor=null,this.feature=null,this.groupElement=null}initialize(){this.addHandles([l((()=>[this.visible,this.inputFields]),(([i])=>{const{inputFields:e}=this,t=!!i&&void 0;for(const s of e)s.required=t}),{initial:!0,equals:(i,e)=>e[0]===i[0]&&e[1]===i[1]})])}destroy(){for(const i of this._expressionTrackingHandles.values())i.remove()}get visibilityExpression(){return s(this.groupElement)?.visibilityExpression}set visibilityExpression(i){r(this.groupElement,(e=>{e.visibilityExpression=i}))}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:i}=this;return o(i)?!!i.lastEvaluatedValue:null}get description(){return s(this.groupElement)?.description}set description(i){r(this.groupElement,(e=>{e.description=i}))}get inputFields(){return this._get("inputFields")}set inputFields(i){this.handles.removeAll(),i&&this.handles.add(i.map((i=>l((()=>i.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputFields",i)}get label(){return s(this.groupElement)?.label}set label(i){r(this.groupElement,(e=>{e.label=i}))}get state(){return o(this.groupElement)&&this.groupElement.initialState||"expanded"}set state(i){this._overrideIfSome("state",i)}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputFields&&this.inputFields.some((i=>i.visible))}_dirtyEvaluatedVisibilityExpression(){const{groupElement:i}=this;o(i)&&i.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};i([p()],u.prototype,"visibilityExpression",null),i([p()],u.prototype,"visibilityExpressionExecutor",void 0),i([p()],u.prototype,"evaluatedVisibilityExpression",null),i([p()],u.prototype,"description",null),i([p()],u.prototype,"feature",void 0),i([p()],u.prototype,"groupElement",void 0),i([p()],u.prototype,"initialFeature",void 0),i([p()],u.prototype,"inputFields",null),i([p()],u.prototype,"label",null),i([p()],u.prototype,"state",null),i([p()],u.prototype,"visible",null),u=i([n("esri.widgets.FeatureForm.InputFieldGroup")],u);const a=u;export{a as default};
