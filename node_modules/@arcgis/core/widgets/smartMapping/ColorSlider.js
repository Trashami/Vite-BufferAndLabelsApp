/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/arrayUtils.js";import"../../core/accessorSupport/ensureType.js";import{subclass as i}from"../../core/accessorSupport/decorators/subclass.js";import{SmartMappingSliderBase as s}from"./SmartMappingSliderBase.js";import t from"./ColorSlider/ColorSliderViewModel.js";import"../support/widgetUtils.js";import{messageBundle as l}from"../support/decorators/messageBundle.js";import{tsx as a}from"../support/jsxFactory.js";var o;const n={base:"esri-color-slider",rampElement:"esri-color-slider__ramp",sliderContainer:"esri-color-slider__slider-container",histogramContainer:"esri-color-slider__histogram-container",primaryHandle:"esri-color-slider--primary-handle",track:"esri-color-slider--interactive-track",esriWidget:"esri-widget",esriWidgetPanel:"esri-widget--panel",widgetIcon:"esri-icon-edit",disabled:"esri-disabled"};let d=o=class extends s{constructor(e,r){super(e,r),this._bgFillId=null,this._rampFillId=null,this.messages=null,this.viewModel=new t,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(e){this.viewModel.primaryHandleEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}static fromRendererResult(e,r){const{visualVariable:{stops:i},statistics:s}=e,{avg:t,stddev:l}=s,a=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),n=a.minSliderValue,d=a.maxSliderValue;return new o({max:d,min:n,stops:i,histogramConfig:{average:t,standardDeviation:l,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==a.theme})}updateFromRendererResult(e,r){const{visualVariable:{stops:i},statistics:s}=e,{avg:t,stddev:l}=s,a=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=a.minSliderValue,n=a.maxSliderValue;this.set({max:n,min:o,stops:i,histogramConfig:{average:t,standardDeviation:l,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==a.theme})}render(){const{label:e,primaryHandleEnabled:r,state:i,visibleElements:s}=this,t="disabled"===i,l=this.classes(n.base,n.esriWidget,n.esriWidgetPanel,{[n.disabled]:t,[n.primaryHandle]:r,[n.track]:s.interactiveTrack});return a("div",{"aria-label":e,class:l},t?null:this.renderContent(this.renderRamp(),n.sliderContainer,n.histogramContainer))}renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:i,zoomOptions:s}=this,t=i.getStopInfo();return a("div",{class:n.rampElement},a("svg",{xmlns:"http://www.w3.org/2000/svg"},a("defs",null,this.renderRampFillDefinition(r,t),this.renderBackgroundFillDefinition(e)),a("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),a("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})),s?this.renderZoomCaps():null)}};e([r()],d.prototype,"handlesSyncedToPrimary",null),e([r()],d.prototype,"label",null),e([r(),l("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],d.prototype,"messages",void 0),e([r()],d.prototype,"primaryHandleEnabled",null),e([r()],d.prototype,"stops",null),e([r()],d.prototype,"viewModel",void 0),d=o=e([i("esri.widgets.smartMapping.ColorSlider")],d);const p=d;export{p as default};
