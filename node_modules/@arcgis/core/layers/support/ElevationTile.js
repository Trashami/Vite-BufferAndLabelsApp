/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{isSome as t,isNone as a}from"../../core/maybe.js";import{ElevationSamplerData as i}from"./ElevationSamplerData.js";class e{constructor(a,e=null){if(this.tile=a,this.zmin=0,this.zmax=0,t(e)&&t(a)){const t=a.extent;this._samplerData=new i(e,t),this.zmin=e.minValue,this.zmax=e.maxValue}}sample(t,i){if(a(this._samplerData))return;const{safeWidth:e,width:r,pixelData:o,noDataValue:n,dx:l,dy:m,y1:h,x0:f}=this._samplerData,p=s(m*(h-i),0,e),u=s(l*(t-f),0,e),c=Math.floor(p),x=Math.floor(u),D=c*r+x,d=D+r,z=o[D],y=o[d],V=o[D+1],_=o[d+1];if(z!==n&&y!==n&&V!==n&&_!==n){const t=u-x,a=z+(V-z)*t;return a+(y+(_-y)*t-a)*(p-c)}}}function s(t,a,i){return t<a?a:t>i?i:t}export{e as ElevationTile};
