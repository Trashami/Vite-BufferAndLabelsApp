/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import{isNone as s}from"../../../core/maybe.js";import{property as e}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import r from"./BaseRasterFunction.js";import n from"./MaskFunctionArguments.js";import{createMaskLUT as u,NoDataInterpretation as i,mask as a}from"./pixelUtils.js";let p=class extends r{constructor(){super(...arguments),this.functionName="Mask",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.lookup=null}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:s}=t;this.outputPixelType=this._getOutputPixelType(s),t.pixelType=this.outputPixelType,this.rasterInfo=t;const{includedRanges:e,noDataValues:o}=this.functionArguments;return e?.length||o?.length?(this.lookup=u(s,this.functionArguments.includedRanges,this.functionArguments.noDataValues),{success:!0}):{success:!1,error:"missing includedRanges or noDataValues argument"}}_processPixels(t){const e=t.pixelBlocks?.[0];if(s(e))return null;const{outputPixelType:o,lookup:r}=this,{includedRanges:n,noDataValues:u,noDataInterpretation:p}=this.functionArguments,c=p===i.matchAll;return a(e,{includedRanges:n,noDataValues:u,outputPixelType:o,matchAll:c,lookup:r})}};t([e({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0),t([e({type:n,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0),t([e()],p.prototype,"rasterArgumentNames",void 0),t([e({json:{write:!0}})],p.prototype,"lookup",void 0),p=t([o("esri.layers.support.rasterFunctions.MaskFunction")],p);const c=p;export{c as default};
