/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{floatEqualAbsolute as t}from"../../core/mathUtils.js";import{a as n,v as s,h as r,w as e,e as o}from"../../chunks/vec2.js";import{d as c}from"../../chunks/vec2f64.js";import{s as u,y as f,e as i,z as a,b as p,l as A,i as L,f as h,u as d,D as m,d as y}from"../../chunks/vec3.js";import{c as E,f as N,a as P}from"../../chunks/vec3f64.js";import{LineType as R}from"./geometry2dUtils.js";export{LineType}from"./geometry2dUtils.js";function Y({start:t,end:o,type:c},u,f){const i=[],a=u,p=n(D,o,t),A=n(T,t,a),L=s(p),h=2*r(p,A),d=h*h-4*L*(s(A)-f*f);if(0===d){const n=-h/(2*L);(c===q.PLANE||n>=0)&&i.push(e(N(0,0,u[2]),t,p,n))}else if(d>0){const n=Math.sqrt(d),s=(-h+n)/(2*L);(c===q.PLANE||s>=0)&&i.push(e(N(0,0,u[2]),t,p,s));const r=(-h-n)/(2*L);(c===q.PLANE||r>=0)&&i.push(e(N(0,0,u[2]),t,p,r))}return i}function j(t,s){const e=t.start,c=t.end,p=n(D,c,e),A=u(T,-p[1],p[0],0),L=s.start,h=s.end,d=f(B,h,L),m=i(d,A),y=u(C,e[0],e[1],0),E=f(G,y,L),N=i(E,A);if(Math.abs(m)<z)return Math.abs(N),[];const Y=a(J,L,d,N/m);if(s.type===R.RAY){const t=f(K,Y,L);if(i(t,d)<-z)return[]}if(t.type===q.HALF_PLANE){const t=o(K,Y,e);if(r(t,p)<-z)return[]}return[P(Y)]}function l(t,n){return x(g(O,n[2],t),n)}function I(t,n){const s=0,r=b(g(O,s,t),g(Q,s,n)),e=[];for(const o of r)e.push(c(o));return e}function v(t,n){return F(t,g(O,t[2],n))}function M(t,n){return H(g(O,t[2],n),t)}function k(t,n,s){const r=u(D,t[0],t[1],n[2]),e=p(T,r,n),o=s/A(e);return a(E(),n,e,o)}function F(t,{start:n,end:s,type:r}){const e=f(D,t,n),o=f(T,s,n),c=i(e,o)/i(o,o);return a(E(),n,o,r===R.RAY?Math.max(c,0):c)}function H({start:t,end:n,type:s},r){const e=f(D,r,t),o=f(T,n,t);if(s===R.RAY&&i(o,e)<-z)return L(t,r);const c=h(B,o,e);return d(c)/d(o)}function _({start:o,end:c,type:u},p,A){const L=[];if(t(o[2],p[2],z)&&t(c[2],p[2],z)){const t=o,f=p,i=n(D,c,t),a=n(T,t,f),h=s(i),d=2*r(i,a),m=d*d-4*h*(s(a)-A*A);if(0===m){const n=-d/(2*h);(u===R.LINE||n>=0)&&L.push(e(N(0,0,p[2]),t,i,n))}else if(m>0){const n=Math.sqrt(m),s=(-d+n)/(2*h);(u===R.LINE||s>=0)&&L.push(e(N(0,0,p[2]),t,i,s));const r=(-d-n)/(2*h);(u===R.LINE||r>=0)&&L.push(e(N(0,0,p[2]),t,i,r))}}else{const n=f(D,c,o);if(t(n[2],0,z))return L;const s=(p[2]-o[2])/n[2],r=a(T,o,n,s);if(u===R.RAY){const t=f(B,r,o);if(i(n,t)<-z)return L}for(const t of U(p,A,r))L.push(t)}return L}function b(n,s){const r=n.start,e=n.end,o=s.start,c=s.end,u=f(D,e,r),p=f(T,c,o),A=f(B,o,r),L=h(C,u,p),d=i(A,L);if(!t(d,0,z))return[];const y=m(L);if(t(y,0,z))return[];const E=h(G,A,p),N=i(E,L)/y,Y=a(J,r,u,N);if(n.type===R.RAY){const t=f(K,Y,r);if(i(u,t)<-z)return[]}if(s.type===R.RAY){const t=f(K,Y,o);if(i(p,t)<-z)return[]}return[P(Y)]}function x({start:t,end:n,type:s},r){const e=f(D,r,t),o=f(T,n,t),c=h(B,o,e);if(m(c)/m(o)<z)switch(s){case R.LINE:return[P(r)];case R.RAY:return i(o,e)<-z?[]:[P(r)]}return[]}function U(n,s,r){return t(n[2],r[2],z)&&t(y(r,n),s*s,z)?[P(r)]:[]}function g(t,n,{start:s,end:r,type:e}){return u(t.start,s[0],s[1],n),u(t.end,r[0],r[1],n),t.type=w[e],t}var q;!function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"}(q||(q={}));const w={[q.PLANE]:R.LINE,[q.HALF_PLANE]:R.RAY},z=1e-6,D=E(),T=E(),B=E(),C=E(),G=E(),J=E(),K=E(),O={start:E(),end:E(),type:R.LINE},Q={start:E(),end:E(),type:R.LINE};export{q as VerticalPlaneType,z as epsilon,U as intersectCircleAndPoint,x as intersectLineAndPoint,b as intersectLineLike,_ as intersectLineLikeAndCircle,I as intersectVerticalPlane,Y as intersectVerticalPlaneAndCircle,j as intersectVerticalPlaneAndLineLike,l as intersectVerticalPlaneAndPoint,H as pointToLineLikeDistance,M as pointToVerticalPlaneDistance,k as projectPointToCircle,F as projectPointToLineLike,v as projectPointToVerticalPlane};
