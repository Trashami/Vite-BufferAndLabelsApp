/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as i}from"../lib/DefaultVertexAttributeLocations.js";import{blendingDefault as n,oitBlending as o,oitDepthTest as s,getOITPolygonOffset as l}from"../lib/OrderIndependentTransparency.js";import{Program as a}from"../lib/Program.js";import{stencilWriteMaskOn as c,stencilToolMaskBaseParams as p,stencilBaseAllZerosParams as u}from"../lib/StencilUtils.js";import{TransparencyPassType as h}from"../lib/TransparencyPassType.js";import{C as f}from"../../../../chunks/ColorMaterial.glsl.js";import{ContextType as m}from"../../../webgl/context-util.js";import{makePipelineState as d,cullingParams as g,defaultDepthWriteParams as b,defaultColorWriteParams as P}from"../../../webgl/renderState.js";class j extends r{initializeConfiguration(e,t){t.hasWebGL2Context=e.rctx.type===m.WEBGL2}initializeProgram(e){return new a(e.rctx,j.shader.get().build(this.configuration),i)}_createPipeline(t,r){const i=this.configuration,a=t===h.NONE,f=t===h.FrontFace;return d({blending:i.output!==e.Color&&i.output!==e.Alpha||!i.transparent?null:a?n:o(t),culling:g(i.cullFace),depthTest:{func:s(t)},depthWrite:a||f?i.writeDepth&&b:null,colorWrite:P,stencilWrite:i.hasOccludees?c:null,stencilTest:i.hasOccludees?r?p:u:null,polygonOffset:a||f?i.polygonOffset&&y:l(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}j.shader=new t(f,(()=>import("./ColorMaterial.glsl.js")));const y={factor:1,units:1};export{j as ColorMaterialTechnique};
