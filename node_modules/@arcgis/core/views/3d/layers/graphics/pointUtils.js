/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{isSome as e}from"../../../../core/maybe.js";import{I as r}from"../../../../chunks/mat4f64.js";import{c as t}from"../../../../chunks/vec3f64.js";import{projectPointToVector as o}from"../../../../geometry/projection.js";import{containsPoint as n}from"../../../../geometry/support/aaBoundingBox.js";import{getPointOnPath as i,getPathLength as s}from"../../../../geometry/support/coordsUtils.js";import{makeDehydratedPoint as a}from"../../../../layers/graphics/dehydratedFeatures.js";import{applyElevationAlignmentForHUD as c}from"./elevationAlignmentUtils.js";import{computeCentroid as l}from"./graphicUtils.js";import{Object3D as p}from"../../webgl-engine/lib/Object3D.js";const m=t();function u(t,i,s,a,l,u,f,d){const g=s?s.length:0,h=t.clippingExtent;if(o(i,m,t.elevationProvider.spatialReference),e(h)&&!n(h,m))return null;o(i,m,t.renderCoordsHelper.spatialReference);const j=t.localOriginFactory.getOrigin(m),y=new p({castShadow:!1,metadata:{layerUid:u,graphicUid:f,usesVerticalDistanceToGround:!0}});for(let e=0;e<g;e++){const t=r;y.addGeometry(s[e],a[e],t,j,d)}return{object:y,sampledElevation:c(y,i,t.elevationProvider,t.renderCoordsHelper,l)}}function f(r,t,n){const i=r.elevationContext,s=n.spatialReference;o(t,m,s),i.centerPointInElevationSR=a(m[0],m[1],t.hasZ?m[2]:0,e(s)?s:null)}function d(e){switch(e.type){case"point":return e;case"polygon":case"extent":return l(e);case"polyline":{const r=e.paths[0];if(!r||0===r.length)return null;const t=i(r,s(r)/2);return a(t[0],t[1],t[2],e.spatialReference)}case"mesh":return e.origin}return null}export{u as createStageObjectForHUD,f as extendPointGraphicElevationContext,d as placePointOnGeometry};
