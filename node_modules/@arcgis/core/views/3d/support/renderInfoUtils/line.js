/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{projectBuffer as o}from"../../../../geometry/projection.js";import{CounterClockwiseMode as n,pathsToTriangulationInfo as t}from"../../../../geometry/support/triangulationUtils.js";import{applyPerVertexElevationAlignment as e}from"../../layers/graphics/elevationAlignmentUtils.js";import{DRAPED_Z as r}from"../../terrain/OverlayRenderer.js";function i(o,r,i,s){const l="polygon"===o.type?n.CCW_IS_HOLE:n.NONE,a="polygon"===o.type?o.rings:o.paths,{position:c,outlines:u}=t(a,o.hasZ,l),y=new Float64Array(c.length),g=e(c,o.spatialReference,0,y,0,c,0,c.length/3,r,i,s),f=null!=g;return{lines:f?p(u,c,y):[],projectionSuccess:f,sampledElevation:g}}function s(e,i){const s="polygon"===e.type?n.CCW_IS_HOLE:n.NONE,l="polygon"===e.type?e.rings:e.paths,{position:a,outlines:c}=t(l,!1,s),u=o(a,e.spatialReference,0,a,i,0,a.length/3);for(let o=2;o<a.length;o+=3)a[o]=r;return{lines:u?p(c,a):[],projectionSuccess:u}}function p(o,n,t){const e=new Array;for(const{index:r,count:i}of o){if(i<=1)continue;const o=3*r,s=o+3*i;e.push({position:n.subarray(o,s),mapPosition:t?t.subarray(o,s):void 0})}return e}export{i as geometryToRenderInfo,s as geometryToRenderInfoDraped};
