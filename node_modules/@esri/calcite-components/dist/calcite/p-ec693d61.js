/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.6
 */
import{l as t,m as n,n as e,o as r,f as o,p as u}from"./p-b3910a16.js";
/*!
* focus-trap 7.2.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function a(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){c(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function c(t,n,e){return(n=function(t){var n=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof n?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var f=function(t){return"Tab"===t.key||9===t.keyCode},s=function(t){return f(t)&&!t.shiftKey},v=function(t){return f(t)&&t.shiftKey},l=function(t){return setTimeout(t,0)},b=function(t,n){var e=-1;return t.every((function(t,r){return!n(t)||(e=r,!1)})),e},d=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,e):t},p=function(t){return t.target.shadowRoot&&"function"==typeof t.composedPath?t.composedPath()[0]:t.target},w=[];const h=[];function m(i){const{focusTrapEl:c}=i;c&&(i.focusTrap=function(o,u){var i,c=(null==u?void 0:u.document)||document,h=(null==u?void 0:u.trapStack)||w,m=a({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:s,isKeyBackward:v},u),y={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},F=function(t,n,e){return t&&void 0!==t[n]?t[n]:m[e||n]},O=function(t){return y.containerGroups.findIndex((function(n){var e=n.tabbableNodes;return n.container.contains(t)||e.find((function(n){return n===t}))}))},k=function(t){var n=m[t];if("function"==typeof n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];n=n.apply(void 0,r)}if(!0===n&&(n=void 0),!n){if(void 0===n||!1===n)return n;throw new Error("`".concat(t,"` was specified but was not a node, or did not return a node"))}var u=n;if("string"==typeof n&&!(u=c.querySelector(n)))throw new Error("`".concat(t,"` as selector refers to no known node"));return u},j=function(){var t=k("initialFocus");if(!1===t)return!1;if(void 0===t)if(O(c.activeElement)>=0)t=c.activeElement;else{var n=y.tabbableGroups[0];t=n&&n.firstTabbableNode||k("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},D=function(){if(y.containerGroups=y.containers.map((function(r){var o=t(r,m.tabbableOptions),u=n(r,m.tabbableOptions);return{container:r,tabbableNodes:o,focusableNodes:u,firstTabbableNode:o.length>0?o[0]:null,lastTabbableNode:o.length>0?o[o.length-1]:null,nextTabbableNode:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=u.findIndex((function(n){return n===t}));if(!(r<0))return n?u.slice(r+1).find((function(t){return e(t,m.tabbableOptions)})):u.slice(0,r).reverse().find((function(t){return e(t,m.tabbableOptions)}))}}})),y.tabbableGroups=y.containerGroups.filter((function(t){return t.tabbableNodes.length>0})),y.tabbableGroups.length<=0&&!k("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function t(n){!1!==n&&n!==c.activeElement&&(n&&n.focus?(n.focus({preventScroll:!!m.preventScroll}),y.mostRecentlyFocusedNode=n,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(n)&&n.select()):t(j()))},E=function(t){var n=k("setReturnFocus",t);return n||!1!==n&&t},g=function(t){var n=p(t);O(n)>=0||(d(m.clickOutsideDeactivates,t)?i.deactivate({returnFocus:m.returnFocusOnDeactivate&&!r(n,m.tabbableOptions)}):d(m.allowOutsideClick,t)||t.preventDefault())},N=function(t){var n=p(t),e=O(n)>=0;e||n instanceof Document?e&&(y.mostRecentlyFocusedNode=n):(t.stopImmediatePropagation(),T(y.mostRecentlyFocusedNode||j()))},A=function(t){if(("Escape"===(n=t).key||"Esc"===n.key||27===n.keyCode)&&!1!==d(m.escapeDeactivates,t))return t.preventDefault(),void i.deactivate();var n;(m.isKeyForward(t)||m.isKeyBackward(t))&&function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=p(t);D();var u=null;if(y.tabbableGroups.length>0){var i=O(o),a=i>=0?y.containerGroups[i]:void 0;if(i<0)u=n?y.tabbableGroups[y.tabbableGroups.length-1].lastTabbableNode:y.tabbableGroups[0].firstTabbableNode;else if(n){var c=b(y.tabbableGroups,(function(t){return o===t.firstTabbableNode}));c<0&&(a.container===o||r(o,m.tabbableOptions)&&!e(o,m.tabbableOptions)&&!a.nextTabbableNode(o,!1))&&(c=i),c>=0?u=y.tabbableGroups[0===c?y.tabbableGroups.length-1:c-1].lastTabbableNode:f(t)||(u=a.nextTabbableNode(o,!1))}else{var s=b(y.tabbableGroups,(function(t){return o===t.lastTabbableNode}));s<0&&(a.container===o||r(o,m.tabbableOptions)&&!e(o,m.tabbableOptions)&&!a.nextTabbableNode(o))&&(s=i),s>=0?u=y.tabbableGroups[s===y.tabbableGroups.length-1?0:s+1].firstTabbableNode:f(t)||(u=a.nextTabbableNode(o))}}else u=k("fallbackFocus");u&&(f(t)&&t.preventDefault(),T(u))}(t,m.isKeyBackward(t))},C=function(t){var n=p(t);O(n)>=0||d(m.clickOutsideDeactivates,t)||d(m.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())},R=function(){if(y.active)return function(t,n){if(t.length>0){var e=t[t.length-1];e!==n&&e.pause()}var r=t.indexOf(n);-1===r||t.splice(r,1),t.push(n)}(h,i),y.delayInitialFocusTimer=m.delayInitialFocus?l((function(){T(j())})):T(j()),c.addEventListener("focusin",N,!0),c.addEventListener("mousedown",g,{capture:!0,passive:!1}),c.addEventListener("touchstart",g,{capture:!0,passive:!1}),c.addEventListener("click",C,{capture:!0,passive:!1}),c.addEventListener("keydown",A,{capture:!0,passive:!1}),i},S=function(){if(y.active)return c.removeEventListener("focusin",N,!0),c.removeEventListener("mousedown",g,!0),c.removeEventListener("touchstart",g,!0),c.removeEventListener("click",C,!0),c.removeEventListener("keydown",A,!0),i};return(i={get active(){return y.active},get paused(){return y.paused},activate:function(t){if(y.active)return this;var n=F(t,"onActivate"),e=F(t,"onPostActivate"),r=F(t,"checkCanFocusTrap");r||D(),y.active=!0,y.paused=!1,y.nodeFocusedBeforeActivation=c.activeElement,n&&n();var o=function(){r&&D(),R(),e&&e()};return r?(r(y.containers.concat()).then(o,o),this):(o(),this)},deactivate:function(t){if(!y.active)return this;var n=a({onDeactivate:m.onDeactivate,onPostDeactivate:m.onPostDeactivate,checkCanReturnFocus:m.checkCanReturnFocus},t);clearTimeout(y.delayInitialFocusTimer),y.delayInitialFocusTimer=void 0,S(),y.active=!1,y.paused=!1,function(t,n){var e=t.indexOf(n);-1!==e&&t.splice(e,1),t.length>0&&t[t.length-1].unpause()}(h,i);var e=F(n,"onDeactivate"),r=F(n,"onPostDeactivate"),o=F(n,"checkCanReturnFocus"),u=F(n,"returnFocus","returnFocusOnDeactivate");e&&e();var c=function(){l((function(){u&&T(E(y.nodeFocusedBeforeActivation)),r&&r()}))};return u&&o?(o(E(y.nodeFocusedBeforeActivation)).then(c,c),this):(c(),this)},pause:function(){return y.paused||!y.active||(y.paused=!0,S()),this},unpause:function(){return y.paused&&y.active?(y.paused=!1,D(),R(),this):this},updateContainerElements:function(t){var n=[].concat(t).filter(Boolean);return y.containers=n.map((function(t){return"string"==typeof t?c.querySelector(t):t})),y.active&&D(),this}}).updateContainerElements(o),i}(c,{allowOutsideClick:!0,clickOutsideDeactivates:t=>!t.composedPath().find((t=>t===c)),document:c.ownerDocument,escapeDeactivates:!1,fallbackFocus:c,setReturnFocus:t=>(o(t),!1),tabbableOptions:u,trapStack:h}))}function y(t){t.focusTrapDisabled||t.focusTrap?.activate()}function F(t){t.focusTrap?.deactivate()}function O(t){t.focusTrap?.updateContainerElements(t.focusTrapEl)}export{y as a,m as c,F as d,O as u}