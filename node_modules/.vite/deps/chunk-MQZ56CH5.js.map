{
  "version": 3,
  "sources": ["../../@arcgis/core/portal/support/resourceExtension.js", "../../@arcgis/core/core/accessorSupport/decorators/persistable.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function t(i){return o[p(i)]||e}function p(i){return i instanceof Blob?i.type:n(i.url)}function n(t){const p=i(t);return g[p]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\",\"bin.gz\":\"application/octet-stream\"};for(const c in g)o[g[c]]=c;export{t as getResourceContentExtension};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as t}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as r,isBlobProtocol as e,join as o,getPathExtension as s}from\"../../urlUtils.js\";import{generateUUID as n}from\"../../uuid.js\";import{getOwnPropertyMetadata as i}from\"../metadata.js\";import{nameToId as a}from\"../PropertyOrigin.js\";import{propertyJSONMeta as p}from\"./property.js\";import{getResourceContentExtension as u}from\"../../../portal/support/resourceExtension.js\";import{r as c,t as l,M as m,i as f,p as y,a as d}from\"../../../chunks/persistableUrlUtils.js\";function g(t){const r=t?.origins??[void 0];return(e,o)=>{const s=h(t,e,o);for(const t of r){const r=p(e,t,o);for(const t in s)r[t]=s[t]}}}function h(t,r,e){if(\"resource\"===t?.type)return v(t,r,e);switch(t?.type??\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}function v(o,s,n){const p=i(s,n);return{type:String,read:(t,r,e)=>{const o=c(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,i,u,c){if(!c||!c.resources)return\"string\"==typeof s?void(i[u]=l(s,c)):void(i[u]=s.write({},c));const y=x(s),d=l(y,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},m.NO),g=p.type!==String&&(!t(this)||c&&c.origin&&this.originIdOf(n)>a(c.origin)),h={object:this,propertyName:n,value:s,targetUrl:d,dest:i,targetPropertyName:u,context:c,params:o};c&&c.portalItem&&d&&!r(d)?g?w(h):j(h):c&&c.portalItem&&(null==d||null!=f(d)||e(d)||g)?U(h):i[u]=d}}}}function U(t){const{targetUrl:r,params:s,value:i,context:a,dest:p,targetPropertyName:c}=t;if(!a.portalItem)return;const l=y(r),m=l?.filename??n(),f=s?.prefix??l?.prefix,d=N(i,r,a),g=o(f,m),h=`${g}.${u(d)}`,v=a.portalItem.resourceFromPath(h);e(r)&&a.resources&&a.resources.pendingOperations.push(P(r).then((t=>{v.path=`${g}.${u(t)}`,p[c]=v.itemRelativeUrl})).catch((()=>{})));const U=s?.compress??!1;a.resources&&I({...t,resource:v,content:d,compress:U,updates:a.resources.toAdd}),p[c]=v.itemRelativeUrl}function w(t){const{context:r,targetUrl:e,params:o,value:n,dest:i,targetPropertyName:a}=t;if(!r.portalItem)return;const p=r.portalItem.resourceFromPath(e),c=N(n,e,r),l=u(c),m=s(p.path),f=o?.compress??!1;l===m?(r.resources&&I({...t,resource:p,content:c,compress:f,updates:r.resources.toUpdate}),i[a]=e):U(t)}function j({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}function I({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{O(t,r,e)}})}function N(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function P(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function x(t){return null==t?null:\"string\"==typeof t?t:t.url}function O(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{g as persistable};\n"],
  "mappings": "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",
  "names": ["t", "i", "p", "n", "g", "t", "e", "o", "s", "r", "n", "p", "i", "x", "d", "h", "U", "a", "m", "v"]
}
