import {
  e,
  r as r2
} from "./chunk-YNUWEZ4E.js";
import {
  a2,
  oe,
  pe,
  r,
  t
} from "./chunk-57QYUXCA.js";
import {
  c
} from "./chunk-OS7L4DDX.js";
import {
  a
} from "./chunk-SQSR6K2M.js";
import {
  o
} from "./chunk-CZBRZ6SU.js";
import {
  f
} from "./chunk-C5H57NTD.js";
import {
  U
} from "./chunk-DMI7A7TC.js";
import {
  n5 as n
} from "./chunk-OOLCFNXJ.js";
import {
  f as f2,
  j
} from "./chunk-MJXQTGI2.js";
import {
  s
} from "./chunk-LIZHLHNA.js";

// node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js
var i;
var s2 = { exports: {} };
i = function() {
  return function(e4) {
    var t3 = {};
    function r3(n3) {
      if (t3[n3])
        return t3[n3].exports;
      var i3 = t3[n3] = { exports: {}, id: n3, loaded: false };
      return e4[n3].call(i3.exports, i3, i3.exports, r3), i3.loaded = true, i3.exports;
    }
    return r3.m = e4, r3.c = t3, r3.p = "", r3(0);
  }([function(e4, t3, r3) {
    Object.defineProperty(t3, "__esModule", { value: true }), t3.isNotPNG = u4, t3.isNotAPNG = h4, t3.default = c5;
    var n3 = s4(r3(1)), i3 = r3(2);
    function s4(e5) {
      return e5 && e5.__esModule ? e5 : { default: e5 };
    }
    var a5 = new Error("Not a PNG"), o5 = new Error("Not an animated PNG");
    function u4(e5) {
      return e5 === a5;
    }
    function h4(e5) {
      return e5 === o5;
    }
    var l4 = new Uint8Array([137, 80, 78, 71, 13, 10, 26, 10]);
    function c5(e5) {
      var t4 = new Uint8Array(e5);
      if (Array.prototype.some.call(l4, function(e6, r5) {
        return e6 !== t4[r5];
      }))
        return a5;
      var r4 = false;
      if (p2(t4, function(e6) {
        return !(r4 = "acTL" === e6);
      }), !r4)
        return o5;
      var n4 = [], s5 = [], u5 = null, h5 = null, c6 = 0, f5 = new i3.APNG();
      if (p2(t4, function(e6, t5, r5, a6) {
        var o6 = new DataView(t5.buffer);
        switch (e6) {
          case "IHDR":
            u5 = t5.subarray(r5 + 8, r5 + 8 + a6), f5.width = o6.getUint32(r5 + 8), f5.height = o6.getUint32(r5 + 12);
            break;
          case "acTL":
            f5.numPlays = o6.getUint32(r5 + 8 + 4);
            break;
          case "fcTL":
            h5 && (f5.frames.push(h5), c6++), (h5 = new i3.Frame()).width = o6.getUint32(r5 + 8 + 4), h5.height = o6.getUint32(r5 + 8 + 8), h5.left = o6.getUint32(r5 + 8 + 12), h5.top = o6.getUint32(r5 + 8 + 16);
            var l5 = o6.getUint16(r5 + 8 + 20), p3 = o6.getUint16(r5 + 8 + 22);
            0 === p3 && (p3 = 100), h5.delay = 1e3 * l5 / p3, h5.delay <= 10 && (h5.delay = 100), f5.playTime += h5.delay, h5.disposeOp = o6.getUint8(r5 + 8 + 24), h5.blendOp = o6.getUint8(r5 + 8 + 25), h5.dataParts = [], 0 === c6 && 2 === h5.disposeOp && (h5.disposeOp = 1);
            break;
          case "fdAT":
            h5 && h5.dataParts.push(t5.subarray(r5 + 8 + 4, r5 + 8 + a6));
            break;
          case "IDAT":
            h5 && h5.dataParts.push(t5.subarray(r5 + 8, r5 + 8 + a6));
            break;
          case "IEND":
            s5.push(v2(t5, r5, 12 + a6));
            break;
          default:
            n4.push(v2(t5, r5, 12 + a6));
        }
      }), h5 && f5.frames.push(h5), 0 == f5.frames.length)
        return o5;
      var m3 = new Blob(n4), g2 = new Blob(s5);
      return f5.frames.forEach(function(e6) {
        var t5 = [];
        t5.push(l4), u5.set(_2(e6.width), 0), u5.set(_2(e6.height), 4), t5.push(d2("IHDR", u5)), t5.push(m3), e6.dataParts.forEach(function(e7) {
          return t5.push(d2("IDAT", e7));
        }), t5.push(g2), e6.imageData = new Blob(t5, { type: "image/png" }), delete e6.dataParts, t5 = null;
      }), f5;
    }
    function p2(e5, t4) {
      var r4 = new DataView(e5.buffer), n4 = 8, i4 = void 0, s5 = void 0, a6 = void 0;
      do {
        s5 = r4.getUint32(n4), a6 = t4(i4 = f4(e5, n4 + 4, 4), e5, n4, s5), n4 += 12 + s5;
      } while (false !== a6 && "IEND" != i4 && n4 < e5.length);
    }
    function f4(e5, t4, r4) {
      var n4 = Array.prototype.slice.call(e5.subarray(t4, t4 + r4));
      return String.fromCharCode.apply(String, n4);
    }
    function m2(e5) {
      for (var t4 = new Uint8Array(e5.length), r4 = 0; r4 < e5.length; r4++)
        t4[r4] = e5.charCodeAt(r4);
      return t4;
    }
    function v2(e5, t4, r4) {
      var n4 = new Uint8Array(r4);
      return n4.set(e5.subarray(t4, t4 + r4)), n4;
    }
    var d2 = function(e5, t4) {
      var r4 = e5.length + t4.length, i4 = new Uint8Array(r4 + 8), s5 = new DataView(i4.buffer);
      s5.setUint32(0, t4.length), i4.set(m2(e5), 4), i4.set(t4, 8);
      var a6 = (0, n3.default)(i4, 4, r4);
      return s5.setUint32(r4 + 4, a6), i4;
    }, _2 = function(e5) {
      return new Uint8Array([e5 >>> 24 & 255, e5 >>> 16 & 255, e5 >>> 8 & 255, 255 & e5]);
    };
  }, function(e4, t3) {
    Object.defineProperty(t3, "__esModule", { value: true }), t3.default = function(e5) {
      for (var t4 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n4 = -1, i4 = t4, s5 = t4 + (arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : e5.length - t4); i4 < s5; i4++)
        n4 = n4 >>> 8 ^ r3[255 & (n4 ^ e5[i4])];
      return -1 ^ n4;
    };
    for (var r3 = new Uint32Array(256), n3 = 0; n3 < 256; n3++) {
      for (var i3 = n3, s4 = 0; s4 < 8; s4++)
        i3 = 0 != (1 & i3) ? 3988292384 ^ i3 >>> 1 : i3 >>> 1;
      r3[n3] = i3;
    }
  }, function(e4, t3, r3) {
    Object.defineProperty(t3, "__esModule", { value: true }), t3.Frame = t3.APNG = void 0;
    var n3 = function() {
      function e5(e6, t4) {
        for (var r4 = 0; r4 < t4.length; r4++) {
          var n4 = t4[r4];
          n4.enumerable = n4.enumerable || false, n4.configurable = true, "value" in n4 && (n4.writable = true), Object.defineProperty(e6, n4.key, n4);
        }
      }
      return function(t4, r4, n4) {
        return r4 && e5(t4.prototype, r4), n4 && e5(t4, n4), t4;
      };
    }(), i3 = s4(r3(3));
    function s4(e5) {
      return e5 && e5.__esModule ? e5 : { default: e5 };
    }
    function a5(e5, t4) {
      if (!(e5 instanceof t4))
        throw new TypeError("Cannot call a class as a function");
    }
    t3.APNG = function() {
      function e5() {
        a5(this, e5), this.width = 0, this.height = 0, this.numPlays = 0, this.playTime = 0, this.frames = [];
      }
      return n3(e5, [{ key: "createImages", value: function() {
        return Promise.all(this.frames.map(function(e6) {
          return e6.createImage();
        }));
      } }, { key: "getPlayer", value: function(e6) {
        var t4 = this, r4 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        return this.createImages().then(function() {
          return new i3.default(t4, e6, r4);
        });
      } }]), e5;
    }(), t3.Frame = function() {
      function e5() {
        a5(this, e5), this.left = 0, this.top = 0, this.width = 0, this.height = 0, this.delay = 0, this.disposeOp = 0, this.blendOp = 0, this.imageData = null, this.imageElement = null;
      }
      return n3(e5, [{ key: "createImage", value: function() {
        var e6 = this;
        return this.imageElement ? Promise.resolve() : new Promise(function(t4, r4) {
          var n4 = URL.createObjectURL(e6.imageData);
          e6.imageElement = document.createElement("img"), e6.imageElement.onload = function() {
            URL.revokeObjectURL(n4), t4();
          }, e6.imageElement.onerror = function() {
            URL.revokeObjectURL(n4), e6.imageElement = null, r4(new Error("Image creation error"));
          }, e6.imageElement.src = n4;
        });
      } }]), e5;
    }();
  }, function(e4, t3, r3) {
    Object.defineProperty(t3, "__esModule", { value: true });
    var n3 = function() {
      function e5(e6, t4) {
        for (var r4 = 0; r4 < t4.length; r4++) {
          var n4 = t4[r4];
          n4.enumerable = n4.enumerable || false, n4.configurable = true, "value" in n4 && (n4.writable = true), Object.defineProperty(e6, n4.key, n4);
        }
      }
      return function(t4, r4, n4) {
        return r4 && e5(t4.prototype, r4), n4 && e5(t4, n4), t4;
      };
    }();
    function i3(e5) {
      return e5 && e5.__esModule ? e5 : { default: e5 };
    }
    function s4(e5, t4) {
      if (!(e5 instanceof t4))
        throw new TypeError("Cannot call a class as a function");
    }
    function a5(e5, t4) {
      if (!e5)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !t4 || "object" != typeof t4 && "function" != typeof t4 ? e5 : t4;
    }
    function o5(e5, t4) {
      if ("function" != typeof t4 && null !== t4)
        throw new TypeError("Super expression must either be null or a function, not " + typeof t4);
      e5.prototype = Object.create(t4 && t4.prototype, { constructor: { value: e5, enumerable: false, writable: true, configurable: true } }), t4 && (Object.setPrototypeOf ? Object.setPrototypeOf(e5, t4) : e5.__proto__ = t4);
    }
    var u4 = function(e5) {
      function t4(e6, r4, n4) {
        s4(this, t4);
        var i4 = a5(this, (t4.__proto__ || Object.getPrototypeOf(t4)).call(this));
        return i4.playbackRate = 1, i4._currentFrameNumber = 0, i4._ended = false, i4._paused = true, i4._numPlays = 0, i4._apng = e6, i4.context = r4, i4.stop(), n4 && i4.play(), i4;
      }
      return o5(t4, e5), n3(t4, [{ key: "renderNextFrame", value: function() {
        this._currentFrameNumber = (this._currentFrameNumber + 1) % this._apng.frames.length, this._currentFrameNumber === this._apng.frames.length - 1 && (this._numPlays++, 0 !== this._apng.numPlays && this._numPlays >= this._apng.numPlays && (this._ended = true, this._paused = true)), this._prevFrame && 1 == this._prevFrame.disposeOp ? this.context.clearRect(this._prevFrame.left, this._prevFrame.top, this._prevFrame.width, this._prevFrame.height) : this._prevFrame && 2 == this._prevFrame.disposeOp && this.context.putImageData(this._prevFrameData, this._prevFrame.left, this._prevFrame.top);
        var e6 = this.currentFrame;
        this._prevFrame = e6, this._prevFrameData = null, 2 == e6.disposeOp && (this._prevFrameData = this.context.getImageData(e6.left, e6.top, e6.width, e6.height)), 0 == e6.blendOp && this.context.clearRect(e6.left, e6.top, e6.width, e6.height), this.context.drawImage(e6.imageElement, e6.left, e6.top), this.emit("frame", this._currentFrameNumber), this._ended && this.emit("end");
      } }, { key: "play", value: function() {
        var e6 = this;
        this.emit("play"), this._ended && this.stop(), this._paused = false;
        var t5 = performance.now() + this.currentFrame.delay / this.playbackRate, r4 = function r5(n4) {
          if (!e6._ended && !e6._paused) {
            if (n4 >= t5) {
              for (; n4 - t5 >= e6._apng.playTime / e6.playbackRate; )
                t5 += e6._apng.playTime / e6.playbackRate, e6._numPlays++;
              do {
                e6.renderNextFrame(), t5 += e6.currentFrame.delay / e6.playbackRate;
              } while (!e6._ended && n4 > t5);
            }
            requestAnimationFrame(r5);
          }
        };
        requestAnimationFrame(r4);
      } }, { key: "pause", value: function() {
        this._paused || (this.emit("pause"), this._paused = true);
      } }, { key: "stop", value: function() {
        this.emit("stop"), this._numPlays = 0, this._ended = false, this._paused = true, this._currentFrameNumber = -1, this.context.clearRect(0, 0, this._apng.width, this._apng.height), this.renderNextFrame();
      } }, { key: "currentFrameNumber", get: function() {
        return this._currentFrameNumber;
      } }, { key: "currentFrame", get: function() {
        return this._apng.frames[this._currentFrameNumber];
      } }, { key: "paused", get: function() {
        return this._paused;
      } }, { key: "ended", get: function() {
        return this._ended;
      } }]), t4;
    }(i3(r3(4)).default);
    t3.default = u4;
  }, function(e4, t3) {
    function r3() {
      this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0;
    }
    function n3(e5) {
      return "function" == typeof e5;
    }
    function i3(e5) {
      return "number" == typeof e5;
    }
    function s4(e5) {
      return "object" == typeof e5 && null !== e5;
    }
    function a5(e5) {
      return void 0 === e5;
    }
    e4.exports = r3, r3.EventEmitter = r3, r3.prototype._events = void 0, r3.prototype._maxListeners = void 0, r3.defaultMaxListeners = 10, r3.prototype.setMaxListeners = function(e5) {
      if (!i3(e5) || e5 < 0 || isNaN(e5))
        throw TypeError("n must be a positive number");
      return this._maxListeners = e5, this;
    }, r3.prototype.emit = function(e5) {
      var t4, r4, i4, o5, u4, h4;
      if (this._events || (this._events = {}), "error" === e5 && (!this._events.error || s4(this._events.error) && !this._events.error.length)) {
        if ((t4 = arguments[1]) instanceof Error)
          throw t4;
        var l4 = new Error('Uncaught, unspecified "error" event. (' + t4 + ")");
        throw l4.context = t4, l4;
      }
      if (a5(r4 = this._events[e5]))
        return false;
      if (n3(r4))
        switch (arguments.length) {
          case 1:
            r4.call(this);
            break;
          case 2:
            r4.call(this, arguments[1]);
            break;
          case 3:
            r4.call(this, arguments[1], arguments[2]);
            break;
          default:
            o5 = Array.prototype.slice.call(arguments, 1), r4.apply(this, o5);
        }
      else if (s4(r4))
        for (o5 = Array.prototype.slice.call(arguments, 1), i4 = (h4 = r4.slice()).length, u4 = 0; u4 < i4; u4++)
          h4[u4].apply(this, o5);
      return true;
    }, r3.prototype.addListener = function(e5, t4) {
      var i4;
      if (!n3(t4))
        throw TypeError("listener must be a function");
      return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", e5, n3(t4.listener) ? t4.listener : t4), this._events[e5] ? s4(this._events[e5]) ? this._events[e5].push(t4) : this._events[e5] = [this._events[e5], t4] : this._events[e5] = t4, s4(this._events[e5]) && !this._events[e5].warned && (i4 = a5(this._maxListeners) ? r3.defaultMaxListeners : this._maxListeners) && i4 > 0 && this._events[e5].length > i4 && (this._events[e5].warned = true, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[e5].length), "function" == typeof console.trace && console.trace()), this;
    }, r3.prototype.on = r3.prototype.addListener, r3.prototype.once = function(e5, t4) {
      if (!n3(t4))
        throw TypeError("listener must be a function");
      var r4 = false;
      function i4() {
        this.removeListener(e5, i4), r4 || (r4 = true, t4.apply(this, arguments));
      }
      return i4.listener = t4, this.on(e5, i4), this;
    }, r3.prototype.removeListener = function(e5, t4) {
      var r4, i4, a6, o5;
      if (!n3(t4))
        throw TypeError("listener must be a function");
      if (!this._events || !this._events[e5])
        return this;
      if (a6 = (r4 = this._events[e5]).length, i4 = -1, r4 === t4 || n3(r4.listener) && r4.listener === t4)
        delete this._events[e5], this._events.removeListener && this.emit("removeListener", e5, t4);
      else if (s4(r4)) {
        for (o5 = a6; o5-- > 0; )
          if (r4[o5] === t4 || r4[o5].listener && r4[o5].listener === t4) {
            i4 = o5;
            break;
          }
        if (i4 < 0)
          return this;
        1 === r4.length ? (r4.length = 0, delete this._events[e5]) : r4.splice(i4, 1), this._events.removeListener && this.emit("removeListener", e5, t4);
      }
      return this;
    }, r3.prototype.removeAllListeners = function(e5) {
      var t4, r4;
      if (!this._events)
        return this;
      if (!this._events.removeListener)
        return 0 === arguments.length ? this._events = {} : this._events[e5] && delete this._events[e5], this;
      if (0 === arguments.length) {
        for (t4 in this._events)
          "removeListener" !== t4 && this.removeAllListeners(t4);
        return this.removeAllListeners("removeListener"), this._events = {}, this;
      }
      if (n3(r4 = this._events[e5]))
        this.removeListener(e5, r4);
      else if (r4)
        for (; r4.length; )
          this.removeListener(e5, r4[r4.length - 1]);
      return delete this._events[e5], this;
    }, r3.prototype.listeners = function(e5) {
      return this._events && this._events[e5] ? n3(this._events[e5]) ? [this._events[e5]] : this._events[e5].slice() : [];
    }, r3.prototype.listenerCount = function(e5) {
      if (this._events) {
        var t4 = this._events[e5];
        if (n3(t4))
          return 1;
        if (t4)
          return t4.length;
      }
      return 0;
    }, r3.listenerCount = function(e5, t4) {
      return e5.listenerCount(t4);
    };
  }]);
}, s2.exports = i();
var a3 = o(s2.exports);
async function o2(e4, t3) {
  const i3 = a3(e4);
  if (i3 instanceof Error)
    throw i3;
  await i3.createImages(), f2(t3);
  const { frames: s4, width: o5, height: u4 } = i3, h4 = document.createElement("canvas");
  h4.width = o5, h4.height = u4;
  const l4 = h4.getContext("2d"), c5 = [], p2 = [];
  for (const r3 of s4) {
    p2.push(n(r3.delay || 100));
    const e5 = r3.imageElement;
    0 === r3.blendOp ? l4.globalCompositeOperation = "copy" : l4.globalCompositeOperation = "source-over";
    const t4 = 2 === r3.disposeOp && l4.getImageData(r3.left, r3.top, r3.width, r3.height);
    l4.drawImage(e5, r3.left, r3.top);
    const i4 = l4.getImageData(0, 0, o5, u4);
    c5.push(i4), 0 === r3.disposeOp || (1 === r3.disposeOp ? l4.clearRect(r3.left, r3.top, r3.width, r3.height) : 2 === r3.disposeOp && l4.putImageData(t4, r3.left, r3.top));
  }
  return { frameDurations: p2, getFrame: (e5) => c5[e5], width: o5, height: u4 };
}
var u = [137, 80, 78, 71, 13, 10, 26, 10];
function h(e4) {
  const t3 = new Uint8Array(e4);
  return !u.some((e5, r3) => e5 !== t3[r3]);
}
function l(e4) {
  if (!h(e4))
    return false;
  const t3 = new DataView(e4), r3 = new Uint8Array(e4);
  let n3, i3 = 8;
  do {
    const e5 = t3.getUint32(i3);
    if (n3 = String.fromCharCode.apply(String, Array.prototype.slice.call(r3.subarray(i3 + 4, i3 + 8))), "acTL" === n3)
      return true;
    i3 += 12 + e5;
  } while ("IEND" !== n3 && i3 < r3.length);
  return false;
}

// node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js
var t2 = {};
var n2 = {};
var a4 = {};
Object.defineProperty(a4, "__esModule", { value: true }), a4.loop = a4.conditional = a4.parse = void 0;
var i2 = function e3(r3, t3) {
  var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, a5 = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : n3;
  if (Array.isArray(t3))
    t3.forEach(function(t4) {
      return e3(r3, t4, n3, a5);
    });
  else if ("function" == typeof t3)
    t3(r3, n3, a5, e3);
  else {
    var i3 = Object.keys(t3)[0];
    Array.isArray(t3[i3]) ? (a5[i3] = {}, e3(r3, t3[i3], n3, a5[i3])) : a5[i3] = t3[i3](r3, n3, a5, e3);
  }
  return n3;
};
a4.parse = i2;
var o3 = function(e4, r3) {
  return function(t3, n3, a5, i3) {
    r3(t3, n3, a5) && i3(t3, e4, n3, a5);
  };
};
a4.conditional = o3;
var d = function(e4, r3) {
  return function(t3, n3, a5, i3) {
    for (var o5 = [], d2 = t3.pos; r3(t3, n3, a5); ) {
      var s4 = {};
      if (i3(t3, e4, n3, s4), t3.pos === d2)
        break;
      d2 = t3.pos, o5.push(s4);
    }
    return o5;
  };
};
a4.loop = d;
var s3 = {};
Object.defineProperty(s3, "__esModule", { value: true }), s3.readBits = s3.readArray = s3.readUnsigned = s3.readString = s3.peekBytes = s3.readBytes = s3.peekByte = s3.readByte = s3.buildStream = void 0;
var c2 = function(e4) {
  return { data: e4, pos: 0 };
};
s3.buildStream = c2;
var u2 = function() {
  return function(e4) {
    return e4.data[e4.pos++];
  };
};
s3.readByte = u2;
var f3 = function() {
  var e4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
  return function(r3) {
    return r3.data[r3.pos + e4];
  };
};
s3.peekByte = f3;
var l2 = function(e4) {
  return function(r3) {
    return r3.data.subarray(r3.pos, r3.pos += e4);
  };
};
s3.readBytes = l2;
var p = function(e4) {
  return function(r3) {
    return r3.data.subarray(r3.pos, r3.pos + e4);
  };
};
s3.peekBytes = p;
var g = function(e4) {
  return function(r3) {
    return Array.from(l2(e4)(r3)).map(function(e5) {
      return String.fromCharCode(e5);
    }).join("");
  };
};
s3.readString = g;
var y = function(e4) {
  return function(r3) {
    var t3 = l2(2)(r3);
    return e4 ? (t3[1] << 8) + t3[0] : (t3[0] << 8) + t3[1];
  };
};
s3.readUnsigned = y;
var v = function(e4, r3) {
  return function(t3, n3, a5) {
    for (var i3 = "function" == typeof r3 ? r3(t3, n3, a5) : r3, o5 = l2(e4), d2 = new Array(i3), s4 = 0; s4 < i3; s4++)
      d2[s4] = o5(t3);
    return d2;
  };
};
s3.readArray = v;
var h2 = function(e4, r3, t3) {
  for (var n3 = 0, a5 = 0; a5 < t3; a5++)
    n3 += e4[r3 + a5] && Math.pow(2, t3 - a5 - 1);
  return n3;
};
var m = function(e4) {
  return function(r3) {
    for (var t3 = u2()(r3), n3 = new Array(8), a5 = 0; a5 < 8; a5++)
      n3[7 - a5] = !!(t3 & 1 << a5);
    return Object.keys(e4).reduce(function(r4, t4) {
      var a6 = e4[t4];
      return a6.length ? r4[t4] = h2(n3, a6.index, a6.length) : r4[t4] = n3[a6.index], r4;
    }, {});
  };
};
s3.readBits = m, function(e4) {
  Object.defineProperty(e4, "__esModule", { value: true }), e4.default = void 0;
  var r3 = a4, t3 = s3, n3 = { blocks: function(e5) {
    for (var r4 = 0, n4 = [], a5 = e5.data.length, i4 = 0, o6 = (0, t3.readByte)()(e5); o6 !== r4 && o6; o6 = (0, t3.readByte)()(e5)) {
      if (e5.pos + o6 >= a5) {
        var d3 = a5 - e5.pos;
        n4.push((0, t3.readBytes)(d3)(e5)), i4 += d3;
        break;
      }
      n4.push((0, t3.readBytes)(o6)(e5)), i4 += o6;
    }
    for (var s4 = new Uint8Array(i4), c6 = 0, u5 = 0; u5 < n4.length; u5++)
      s4.set(n4[u5], c6), c6 += n4[u5].length;
    return s4;
  } }, i3 = (0, r3.conditional)({ gce: [{ codes: (0, t3.readBytes)(2) }, { byteSize: (0, t3.readByte)() }, { extras: (0, t3.readBits)({ future: { index: 0, length: 3 }, disposal: { index: 3, length: 3 }, userInput: { index: 6 }, transparentColorGiven: { index: 7 } }) }, { delay: (0, t3.readUnsigned)(true) }, { transparentColorIndex: (0, t3.readByte)() }, { terminator: (0, t3.readByte)() }] }, function(e5) {
    var r4 = (0, t3.peekBytes)(2)(e5);
    return 33 === r4[0] && 249 === r4[1];
  }), o5 = (0, r3.conditional)({ image: [{ code: (0, t3.readByte)() }, { descriptor: [{ left: (0, t3.readUnsigned)(true) }, { top: (0, t3.readUnsigned)(true) }, { width: (0, t3.readUnsigned)(true) }, { height: (0, t3.readUnsigned)(true) }, { lct: (0, t3.readBits)({ exists: { index: 0 }, interlaced: { index: 1 }, sort: { index: 2 }, future: { index: 3, length: 2 }, size: { index: 5, length: 3 } }) }] }, (0, r3.conditional)({ lct: (0, t3.readArray)(3, function(e5, r4, t4) {
    return Math.pow(2, t4.descriptor.lct.size + 1);
  }) }, function(e5, r4, t4) {
    return t4.descriptor.lct.exists;
  }), { data: [{ minCodeSize: (0, t3.readByte)() }, n3] }] }, function(e5) {
    return 44 === (0, t3.peekByte)()(e5);
  }), d2 = (0, r3.conditional)({ text: [{ codes: (0, t3.readBytes)(2) }, { blockSize: (0, t3.readByte)() }, { preData: function(e5, r4, n4) {
    return (0, t3.readBytes)(n4.text.blockSize)(e5);
  } }, n3] }, function(e5) {
    var r4 = (0, t3.peekBytes)(2)(e5);
    return 33 === r4[0] && 1 === r4[1];
  }), c5 = (0, r3.conditional)({ application: [{ codes: (0, t3.readBytes)(2) }, { blockSize: (0, t3.readByte)() }, { id: function(e5, r4, n4) {
    return (0, t3.readString)(n4.blockSize)(e5);
  } }, n3] }, function(e5) {
    var r4 = (0, t3.peekBytes)(2)(e5);
    return 33 === r4[0] && 255 === r4[1];
  }), u4 = (0, r3.conditional)({ comment: [{ codes: (0, t3.readBytes)(2) }, n3] }, function(e5) {
    var r4 = (0, t3.peekBytes)(2)(e5);
    return 33 === r4[0] && 254 === r4[1];
  }), f4 = [{ header: [{ signature: (0, t3.readString)(3) }, { version: (0, t3.readString)(3) }] }, { lsd: [{ width: (0, t3.readUnsigned)(true) }, { height: (0, t3.readUnsigned)(true) }, { gct: (0, t3.readBits)({ exists: { index: 0 }, resolution: { index: 1, length: 3 }, sort: { index: 4 }, size: { index: 5, length: 3 } }) }, { backgroundColorIndex: (0, t3.readByte)() }, { pixelAspectRatio: (0, t3.readByte)() }] }, (0, r3.conditional)({ gct: (0, t3.readArray)(3, function(e5, r4) {
    return Math.pow(2, r4.lsd.gct.size + 1);
  }) }, function(e5, r4) {
    return r4.lsd.gct.exists;
  }), { frames: (0, r3.loop)([i3, c5, u4, o5, d2], function(e5) {
    var r4 = (0, t3.peekByte)()(e5);
    return 33 === r4 || 44 === r4;
  }) }];
  e4.default = f4;
}(n2);
var x = {};
Object.defineProperty(x, "__esModule", { value: true }), x.deinterlace = void 0;
var B = function(e4, r3) {
  for (var t3 = new Array(e4.length), n3 = e4.length / r3, a5 = function(n4, a6) {
    var i4 = e4.slice(a6 * r3, (a6 + 1) * r3);
    t3.splice.apply(t3, [n4 * r3, r3].concat(i4));
  }, i3 = [0, 4, 2, 1], o5 = [8, 8, 4, 2], d2 = 0, s4 = 0; s4 < 4; s4++)
    for (var c5 = i3[s4]; c5 < n3; c5 += o5[s4])
      a5(c5, d2), d2++;
  return t3;
};
x.deinterlace = B;
var w = {};
Object.defineProperty(w, "__esModule", { value: true }), w.lzw = void 0;
var b = function(e4, r3, t3) {
  var n3, a5, i3, o5, d2, s4, c5, u4, f4, l4, p2, g2, y2, v2, h4, m2, x2 = 4096, B2 = -1, w2 = t3, b2 = new Array(t3), k2 = new Array(x2), A2 = new Array(x2), U3 = new Array(x2 + 1);
  for (d2 = (a5 = 1 << (l4 = e4)) + 1, n3 = a5 + 2, c5 = B2, i3 = (1 << (o5 = l4 + 1)) - 1, u4 = 0; u4 < a5; u4++)
    k2[u4] = 0, A2[u4] = u4;
  for (p2 = g2 = y2 = v2 = h4 = m2 = 0, f4 = 0; f4 < w2; ) {
    if (0 === v2) {
      if (g2 < o5) {
        p2 += r3[m2] << g2, g2 += 8, m2++;
        continue;
      }
      if (u4 = p2 & i3, p2 >>= o5, g2 -= o5, u4 > n3 || u4 == d2)
        break;
      if (u4 == a5) {
        i3 = (1 << (o5 = l4 + 1)) - 1, n3 = a5 + 2, c5 = B2;
        continue;
      }
      if (c5 == B2) {
        U3[v2++] = A2[u4], c5 = u4, y2 = u4;
        continue;
      }
      for (s4 = u4, u4 == n3 && (U3[v2++] = y2, u4 = c5); u4 > a5; )
        U3[v2++] = A2[u4], u4 = k2[u4];
      y2 = 255 & A2[u4], U3[v2++] = y2, n3 < x2 && (k2[n3] = c5, A2[n3] = y2, 0 == (++n3 & i3) && n3 < x2 && (o5++, i3 += n3)), c5 = s4;
    }
    v2--, b2[h4++] = U3[v2], f4++;
  }
  for (f4 = h4; f4 < w2; f4++)
    b2[f4] = 0;
  return b2;
};
w.lzw = b, Object.defineProperty(t2, "__esModule", { value: true });
var k = t2.decompressFrames = t2.decompressFrame = C = t2.parseGIF = void 0;
var A = I(n2);
var U2 = a4;
var S = s3;
var z = x;
var _ = w;
function I(e4) {
  return e4 && e4.__esModule ? e4 : { default: e4 };
}
var j2 = function(e4) {
  var r3 = new Uint8Array(e4);
  return (0, U2.parse)((0, S.buildStream)(r3), A.default);
};
var C = t2.parseGIF = j2;
var M = function(e4) {
  for (var r3 = e4.pixels.length, t3 = new Uint8ClampedArray(4 * r3), n3 = 0; n3 < r3; n3++) {
    var a5 = 4 * n3, i3 = e4.pixels[n3], o5 = e4.colorTable[i3] || [0, 0, 0];
    t3[a5] = o5[0], t3[a5 + 1] = o5[1], t3[a5 + 2] = o5[2], t3[a5 + 3] = i3 !== e4.transparentIndex ? 255 : 0;
  }
  return t3;
};
var O = function(e4, r3, t3) {
  if (e4.image) {
    var n3 = e4.image, a5 = n3.descriptor.width * n3.descriptor.height, i3 = (0, _.lzw)(n3.data.minCodeSize, n3.data.blocks, a5);
    n3.descriptor.lct.interlaced && (i3 = (0, z.deinterlace)(i3, n3.descriptor.width));
    var o5 = { pixels: i3, dims: { top: e4.image.descriptor.top, left: e4.image.descriptor.left, width: e4.image.descriptor.width, height: e4.image.descriptor.height } };
    return n3.descriptor.lct && n3.descriptor.lct.exists ? o5.colorTable = n3.lct : o5.colorTable = r3, e4.gce && (o5.delay = 10 * (e4.gce.delay || 10), o5.disposalType = e4.gce.extras.disposal, e4.gce.extras.transparentColorGiven && (o5.transparentIndex = e4.gce.transparentColorIndex)), t3 && (o5.patch = M(o5)), o5;
  }
  console.warn("gif frame does not have associated image.");
};
t2.decompressFrame = O;
var T = function(e4, r3) {
  return e4.frames.filter(function(e5) {
    return e5.image;
  }).map(function(t3) {
    return O(t3, e4.gct, r3);
  });
};
async function D(t3, n3) {
  const a5 = C(t3), i3 = k(a5, true), { width: o5, height: d2 } = a5.lsd, s4 = document.createElement("canvas");
  s4.width = o5, s4.height = d2;
  const c5 = s4.getContext("2d"), u4 = [], f4 = [];
  for (const l4 of i3) {
    f4.push(n(l4.delay || 100));
    const t4 = new ImageData(l4.patch, l4.dims.width, l4.dims.height), n4 = c(t4), a6 = 3 === l4.disposalType && c5.getImageData(l4.dims.left, l4.dims.top, l4.dims.width, l4.dims.height);
    c5.drawImage(n4, l4.dims.left, l4.dims.top);
    const i4 = c5.getImageData(0, 0, o5, d2);
    u4.push(i4), 1 === l4.disposalType || (2 === l4.disposalType ? c5.clearRect(l4.dims.left, l4.dims.top, l4.dims.width, l4.dims.height) : 3 === l4.disposalType && c5.putImageData(a6, l4.dims.left, l4.dims.top));
  }
  return { frameDurations: f4, getFrame: (e4) => u4[e4], width: o5, height: d2 };
}
k = t2.decompressFrames = T;
var F = [71, 73, 70];
function P(e4) {
  const r3 = new Uint8Array(e4);
  return !F.some((e5, t3) => e5 !== r3[t3]);
}
function G(e4) {
  if (!P(e4))
    return false;
  const r3 = new DataView(e4), t3 = r3.getUint8(10);
  let n3 = 13 + (128 & t3 ? 3 * 2 ** (1 + (7 & t3)) : 0), a5 = 0, i3 = false;
  for (; !i3; ) {
    switch (r3.getUint8(n3++)) {
      case 33:
        if (!o5())
          return false;
        break;
      case 44:
        d2();
        break;
      case 59:
        i3 = true;
        break;
      default:
        return false;
    }
    if (a5 > 1)
      return true;
  }
  function o5() {
    switch (r3.getUint8(n3++)) {
      case 249:
        s4();
        break;
      case 1:
        c5();
        break;
      case 254:
        u4();
        break;
      case 255:
        f4();
        break;
      default:
        return false;
    }
    return true;
  }
  function d2() {
    a5++, n3 += 8;
    const e5 = r3.getUint8(n3++);
    n3 += 128 & e5 ? 3 * 2 ** (1 + (7 & e5)) : 0, n3++, l4();
  }
  function s4() {
    n3++, n3 += 4, l4();
  }
  function c5() {
    a5++, n3++, n3 += 12, l4();
  }
  function u4() {
    l4();
  }
  function f4() {
    n3++, n3 += 8, n3 += 3, l4();
  }
  function l4() {
    let e5;
    for (; e5 = r3.getUint8(n3++); )
      n3 += e5;
  }
  return false;
}

// node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js
var o4 = class {
  constructor() {
    this._resourceMap = /* @__PURE__ */ new Map(), this._inFlightResourceMap = /* @__PURE__ */ new Map(), this.geometryEngine = null;
  }
  destroy() {
    this._inFlightResourceMap.clear(), this._resourceMap.clear();
  }
  getResource(e4) {
    var _a;
    return (_a = this._resourceMap.get(e4)) != null ? _a : null;
  }
  async fetchResource(e4, t3) {
    const r3 = this._resourceMap.get(e4);
    if (r3)
      return { width: r3.width, height: r3.height };
    const i3 = this._inFlightResourceMap.get(e4);
    if (i3)
      return i3.then((e5) => ({ width: e5.width, height: e5.height }));
    const s4 = h3(e4, t3);
    return this._inFlightResourceMap.set(e4, i3), s4.then((t4) => (this._inFlightResourceMap.delete(e4), this._resourceMap.set(e4, t4), { width: t4.width, height: t4.height }), () => ({ width: 0, height: 0 }));
  }
  deleteResource(e4) {
    this._inFlightResourceMap.delete(e4), this._resourceMap.delete(e4);
  }
};
async function c3(i3, s4) {
  const n3 = window.URL.createObjectURL(i3);
  try {
    const { data: t3 } = await U(n3, { ...s4, responseType: "image" });
    return t3;
  } catch (a5) {
    if (!j(a5))
      throw new s("mapview-invalid-resource", `Could not fetch requested resource at ${n3}`);
    throw a5;
  } finally {
    window.URL.revokeObjectURL(n3);
  }
}
async function h3(e4, t3) {
  const { arrayBuffer: r3, mediaType: o5 } = await u3(e4, t3), h4 = "image/png" === o5;
  if ("image/gif" === o5 && G(r3))
    return D(r3);
  if (h4 && l(r3))
    return o2(r3, t3);
  return c3(new Blob([r3], { type: o5 }), t3);
}
async function u3(i3, s4) {
  let n3;
  const a5 = ";base64,";
  if (i3.includes(a5)) {
    const e4 = i3.indexOf(a5), t3 = i3.indexOf(a5) + a5.length, r3 = i3.substring(t3), s5 = atob(r3), o5 = new Uint8Array(s5.length);
    for (let i4 = 0; i4 < s5.length; i4++)
      o5[i4] = s5.charCodeAt(i4);
    n3 = { arrayBuffer: o5.buffer, mediaType: i3.substring(0, e4).replace("data:", "") };
  } else
    try {
      const t3 = await U(i3, { responseType: "array-buffer", ...s4 }), r3 = t3.data;
      n3 = { arrayBuffer: r3, mediaType: t3.getHeader("Content-Type") };
    } catch (o5) {
      if (!j(o5))
        throw new s("mapview-invalid-resource", `Could not fetch requested resource at ${i3}`);
    }
  return n3;
}

// node_modules/@arcgis/core/symbols/cim/Rasterizer.js
var l3 = 512;
var c4 = class {
  constructor(e4) {
    this._resourceManager = e4;
  }
  dispose() {
    this._rasterizationCanvas = null;
  }
  rasterizeJSONResource(m2, l4, c5) {
    if (this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement("canvas")), "simple-fill" === m2.type || "esriSFS" === m2.type) {
      const [t3, r3, i3] = r2(this._rasterizationCanvas, m2.style, l4);
      return { size: [r3, i3], image: new Uint32Array(t3.buffer), sdf: false, simplePattern: true, anchorX: 0, anchorY: 0, rasterizationScale: f(Math.ceil(l4)) };
    }
    if ("simple-line" === m2.type || "esriSLS" === m2.type || "line" === m2.type && m2.dashTemplate) {
      let e4, r3;
      if ("simple-line" === m2.type || "esriSLS" === m2.type)
        switch (e4 = pe(m2.style, m2.cap), m2.cap) {
          case "butt":
            r3 = "Butt";
            break;
          case "square":
            r3 = "Square";
            break;
          default:
            r3 = "Round";
        }
      else
        e4 = m2.dashTemplate, r3 = m2.cim.capStyle;
      const [a5, n3, s4] = e(e4, r3);
      return { size: [n3, s4], image: new Uint32Array(a5.buffer), sdf: true, simplePattern: true, anchorX: 0, anchorY: 0 };
    }
    let f4, h4, p2, u4 = 1;
    if ("simple-marker" === m2.type || "esriSMS" === m2.type || "line-marker" === m2.type ? (f4 = oe.fromSimpleMarker(m2), p2 = r(f4)) : m2.cim && "CIMHatchFill" === m2.cim.type ? (f4 = oe.fromCIMHatchFill(m2.cim, l4), h4 = new t(f4.frame.xmin, -f4.frame.ymax, f4.frame.xmax - f4.frame.xmin, f4.frame.ymax - f4.frame.ymin), u4 = l4) : m2.cim.markerPlacement && "CIMMarkerPlacementInsidePolygon" === m2.cim.markerPlacement.type ? (f4 = oe.fromCIMInsidePolygon(m2.cim), h4 = new t(f4.frame.xmin, -f4.frame.ymax, f4.frame.xmax - f4.frame.xmin, f4.frame.ymax - f4.frame.ymin)) : (f4 = m2.cim, p2 = r(f4)), p2 && !c5) {
      const [e4, t3, r3] = a2(p2);
      return e4 ? { size: [t3, r3], image: new Uint32Array(e4.buffer), sdf: true, simplePattern: true, anchorX: 0, anchorY: 0, rasterizationScale: u4 } : null;
    }
    const [y2, d2, g2, C2, z2] = oe.rasterize(this._rasterizationCanvas, f4, h4, this._resourceManager, !c5);
    return y2 ? { size: [d2, g2], image: new Uint32Array(y2.buffer), sdf: false, simplePattern: false, anchorX: C2, anchorY: z2 } : null;
  }
  rasterizeImageResource(e4, t3, r3, a5) {
    this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement("canvas")), this._rasterizationCanvas.width = e4, this._rasterizationCanvas.height = t3;
    const i3 = this._rasterizationCanvas.getContext("2d");
    r3 instanceof ImageData ? i3.putImageData(r3, 0, 0) : (r3.setAttribute("width", `${e4}px`), r3.setAttribute("height", `${t3}px`), i3.drawImage(r3, 0, 0, e4, t3));
    const n3 = i3.getImageData(0, 0, e4, t3), s4 = new Uint8Array(n3.data);
    if (a5) {
      for (const m2 of a5)
        if (m2 && m2.oldColor && 4 === m2.oldColor.length && m2.newColor && 4 === m2.newColor.length) {
          const [e5, t4, r4, a6] = m2.oldColor, [i4, n4, o6, l4] = m2.newColor;
          if (e5 === i4 && t4 === n4 && r4 === o6 && a6 === l4)
            continue;
          for (let m3 = 0; m3 < s4.length; m3 += 4)
            e5 === s4[m3] && t4 === s4[m3 + 1] && r4 === s4[m3 + 2] && a6 === s4[m3 + 3] && (s4[m3] = i4, s4[m3 + 1] = n4, s4[m3 + 2] = o6, s4[m3 + 3] = l4);
        }
    }
    let o5;
    for (let m2 = 0; m2 < s4.length; m2 += 4)
      o5 = s4[m2 + 3] / 255, s4[m2] = s4[m2] * o5, s4[m2 + 1] = s4[m2 + 1] * o5, s4[m2 + 2] = s4[m2 + 2] * o5;
    let c5 = s4, f4 = e4, h4 = t3;
    const p2 = l3;
    if (f4 >= p2 || h4 >= p2) {
      const r4 = f4 / h4;
      r4 > 1 ? (f4 = p2, h4 = Math.round(p2 / r4)) : (h4 = p2, f4 = Math.round(p2 * r4)), c5 = new Uint8Array(4 * f4 * h4);
      const a6 = new Uint8ClampedArray(c5.buffer);
      a(s4, e4, t3, a6, f4, h4, false);
    }
    return { size: [f4, h4], image: new Uint32Array(c5.buffer), sdf: false, simplePattern: false, anchorX: 0, anchorY: 0 };
  }
};

export {
  o4 as o,
  c4 as c
};
//# sourceMappingURL=chunk-GOHXATVD.js.map
