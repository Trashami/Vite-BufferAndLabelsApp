import {
  g
} from "./chunk-MQZ56CH5.js";
import {
  c as c3
} from "./chunk-BDAWQRMD.js";
import {
  i as i2
} from "./chunk-C6BDJNUQ.js";
import "./chunk-IZUZZJS7.js";
import {
  un
} from "./chunk-FFVIDMFN.js";
import "./chunk-I4RYNNL6.js";
import {
  c
} from "./chunk-FX6IXM55.js";
import {
  O
} from "./chunk-QFFP6A5Q.js";
import "./chunk-YGVY4EIZ.js";
import "./chunk-ZWUEORSX.js";
import "./chunk-US2IWMHE.js";
import "./chunk-ZPYDYUP5.js";
import {
  b
} from "./chunk-SOEQPPQP.js";
import {
  x
} from "./chunk-YM6PUX7G.js";
import "./chunk-QEYOWTXD.js";
import "./chunk-KDO6J2FO.js";
import "./chunk-RT3T2K4S.js";
import "./chunk-WJCI2CGX.js";
import {
  c as c2,
  m as m2,
  u as u2
} from "./chunk-XMZAPOBR.js";
import "./chunk-BLJKKR5D.js";
import "./chunk-X2S4RQJ4.js";
import "./chunk-376OPXM4.js";
import "./chunk-DER356EU.js";
import {
  n as n2,
  t as t2
} from "./chunk-B4DKBAM3.js";
import "./chunk-6M2AHKYV.js";
import "./chunk-6O43OEU5.js";
import {
  i,
  l as l2
} from "./chunk-KXVMEIWT.js";
import {
  j
} from "./chunk-UDND2Z3V.js";
import "./chunk-23Y3DIC6.js";
import "./chunk-JUVQV3R3.js";
import "./chunk-C5H57NTD.js";
import "./chunk-3LR5O4WA.js";
import "./chunk-GDVNKPJ7.js";
import "./chunk-D4V6J5BT.js";
import "./chunk-OSHI574D.js";
import "./chunk-YWAQYJRC.js";
import "./chunk-B356PXLT.js";
import "./chunk-EHPBHJYZ.js";
import "./chunk-3MNMDUQZ.js";
import {
  w
} from "./chunk-UWG37XSU.js";
import "./chunk-LNZAOBFW.js";
import "./chunk-PF5I4XZQ.js";
import "./chunk-HLM6QCL2.js";
import "./chunk-RXYULINL.js";
import {
  l,
  w as w2
} from "./chunk-5NXILPDI.js";
import "./chunk-THVR7IAM.js";
import "./chunk-ZWJJTUFL.js";
import "./chunk-DMI7A7TC.js";
import "./chunk-ZHAW7FZS.js";
import "./chunk-KAN4HXCG.js";
import "./chunk-VWYWOOPX.js";
import "./chunk-M5VHU5LK.js";
import {
  u2 as u
} from "./chunk-7QMMKGW4.js";
import {
  e as e2,
  m,
  n2 as n,
  y as y2
} from "./chunk-OOLCFNXJ.js";
import "./chunk-6KZ2LTDA.js";
import "./chunk-U2XHEJM7.js";
import "./chunk-MJXQTGI2.js";
import "./chunk-LIZHLHNA.js";
import "./chunk-BTUHYGXO.js";
import "./chunk-UA3YPL2R.js";
import "./chunk-HVKDYDPP.js";
import "./chunk-6QC7MLLS.js";
import {
  e,
  o,
  r,
  t,
  y
} from "./chunk-MIHB3CIK.js";
import "./chunk-OL3AADLO.js";

// node_modules/@arcgis/core/analysis/featureReferenceUtils.js
function t3(e3, t4) {
  return l3(e3) === l3(t4);
}
function l3(t4) {
  if (t(t4))
    return null;
  const l4 = null != t4.layer ? t4.layer.id : "";
  let r3 = null;
  return r3 = null != t4.objectId ? t4.objectId : null != t4.layer && "objectIdField" in t4.layer && null != t4.layer.objectIdField && null != t4.attributes ? t4.attributes[t4.layer.objectIdField] : t4.uid, null == r3 ? null : `o-${l4}-${r3}`;
}
var r2 = { json: { write: { writer: n3, target: { "feature.layerId": { type: [Number, String] }, "feature.objectId": { type: [Number, String] } } }, origins: { "web-scene": { read: u3 } } } };
function n3(t4, l4) {
  var _a;
  t(t4) || null == ((_a = t4.layer) == null ? void 0 : _a.objectIdField) || null == t4.attributes || (l4.feature = { layerId: t4.layer.id, objectId: t4.attributes[t4.layer.objectIdField] });
}
function u3(e3) {
  if (null != e3.layerId && null != e3.objectId)
    return { uid: null, layer: { id: e3.layerId, objectIdField: "ObjectId" }, attributes: { ObjectId: e3.objectId } };
}

// node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js
var f = class extends u(i(m)) {
  constructor(o2) {
    super(o2), this.position = null, this.elevationInfo = null, this.feature = null;
  }
  equals(o2) {
    return y(this.position, o2.position) && y(this.elevationInfo, o2.elevationInfo) && t3(this.feature, o2.feature);
  }
};
e2([y2({ type: w }), g()], f.prototype, "position", void 0), e2([y2({ type: x }), g()], f.prototype, "elevationInfo", void 0), e2([y2(r2)], f.prototype, "feature", void 0), f = e2([n("esri.analysis.LineOfSightAnalysisObserver")], f);
var u4 = f;

// node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js
var m3 = class extends u(l2) {
  constructor(o2) {
    super(o2), this.position = null, this.elevationInfo = null, this.feature = null;
  }
  equals(o2) {
    return y(this.position, o2.position) && y(this.elevationInfo, o2.elevationInfo) && t3(this.feature, o2.feature);
  }
};
e2([y2({ type: w }), g()], m3.prototype, "position", void 0), e2([y2({ type: x }), g()], m3.prototype, "elevationInfo", void 0), e2([y2(r2)], m3.prototype, "feature", void 0), m3 = e2([n("esri.analysis.LineOfSightAnalysisTarget")], m3);
var f2 = m3;

// node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js
var b2 = j.ofType(f2);
var x2 = class extends c3 {
  constructor(t4) {
    super(t4), this.type = "line-of-sight", this.observer = null, this.extent = null;
  }
  initialize() {
    this.addHandles(l(() => this._computeExtent(), (t4) => {
      (t(t4) || t(t4.pending)) && this._set("extent", r(t4) ? t4.extent : null);
    }, w2));
  }
  get targets() {
    return this._get("targets") || new b2();
  }
  set targets(t4) {
    this._set("targets", n2(t4, this.targets, b2));
  }
  get spatialReference() {
    return r(this.observer) && r(this.observer.position) ? this.observer.position.spatialReference : null;
  }
  get requiredPropertiesForEditing() {
    return [o(this.observer, (t4) => t4.position)];
  }
  async waitComputeExtent() {
    const t4 = this._computeExtent();
    return r(t4) ? e(t4.pending) : null;
  }
  _computeExtent() {
    const t4 = this.spatialReference;
    if (t(this.observer) || t(this.observer.position) || t(t4))
      return null;
    const e3 = (t5) => "absolute-height" === i2(t5.position, t5.elevationInfo), r3 = this.observer.position, o2 = u2(r3.x, r3.y, r3.z, r3.x, r3.y, r3.z);
    for (const i3 of this.targets)
      if (r(i3.position)) {
        const e4 = un(i3.position, t4);
        if (r(e4.pending))
          return { pending: e4.pending, extent: null };
        if (r(e4.geometry)) {
          const { x: t5, y: r4, z: s2 } = e4.geometry;
          c2(o2, [t5, r4, s2]);
        }
      }
    const s = m2(o2, t4);
    return e3(this.observer) && this.targets.every(e3) || (s.zmin = null, s.zmax = null), { pending: null, extent: s };
  }
  clear() {
    this.observer = null, this.targets.removeAll();
  }
};
e2([y2({ type: ["line-of-sight"] })], x2.prototype, "type", void 0), e2([y2({ type: u4, json: { read: true, write: true } })], x2.prototype, "observer", void 0), e2([y2({ cast: t2, type: b2, nonNullable: true, json: { read: true, write: true } })], x2.prototype, "targets", null), e2([y2({ value: null, readOnly: true })], x2.prototype, "extent", void 0), e2([y2({ readOnly: true })], x2.prototype, "spatialReference", null), e2([y2({ readOnly: true })], x2.prototype, "requiredPropertiesForEditing", null), x2 = e2([n("esri.analysis.LineOfSightAnalysis")], x2);
var O2 = x2;

// node_modules/@arcgis/core/layers/LineOfSightLayer.js
var f3 = j.ofType(f2);
var g2 = class extends c(O(b)) {
  constructor(e3) {
    super(e3), this.type = "line-of-sight", this.operationalLayerType = "LineOfSightLayer", this.analysis = new O2(), this.opacity = 1;
  }
  initialize() {
    this.addHandles(l(() => this.analysis, (e3, t4) => {
      r(t4) && t4.parent === this && (t4.parent = null), r(e3) && (e3.parent = this);
    }, w2));
  }
  async load() {
    return r(this.analysis) && this.addResolvingPromise(this.analysis.waitComputeExtent()), this;
  }
  get observer() {
    return o(this.analysis, (e3) => e3.observer);
  }
  set observer(e3) {
    o(this.analysis, (t4) => t4.observer = e3);
  }
  get targets() {
    return r(this.analysis) ? this.analysis.targets : new j();
  }
  set targets(e3) {
    var _a;
    n2(e3, (_a = this.analysis) == null ? void 0 : _a.targets);
  }
  get fullExtent() {
    return r(this.analysis) ? this.analysis.extent : null;
  }
  get spatialReference() {
    return r(this.analysis) ? e(this.analysis.spatialReference) : null;
  }
  releaseAnalysis(e3) {
    this.analysis === e3 && (this.analysis = new O2());
  }
};
e2([y2({ json: { read: false }, readOnly: true })], g2.prototype, "type", void 0), e2([y2({ type: ["LineOfSightLayer"] })], g2.prototype, "operationalLayerType", void 0), e2([y2({ type: u4, json: { read: true, write: { ignoreOrigin: true } } })], g2.prototype, "observer", null), e2([y2({ type: f3, json: { read: true, write: { ignoreOrigin: true } } })], g2.prototype, "targets", null), e2([y2({ nonNullable: true, json: { read: false, write: false } })], g2.prototype, "analysis", void 0), e2([y2({ readOnly: true })], g2.prototype, "fullExtent", null), e2([y2({ readOnly: true })], g2.prototype, "spatialReference", null), e2([y2({ readOnly: true, json: { read: false, write: false, origins: { service: { read: false, write: false }, "portal-item": { read: false, write: false }, "web-document": { read: false, write: false } } } })], g2.prototype, "opacity", void 0), e2([y2({ type: ["show", "hide"] })], g2.prototype, "listMode", void 0), g2 = e2([n("esri.layers.LineOfSightLayer")], g2);
var j2 = g2;
export {
  j2 as default
};
//# sourceMappingURL=LineOfSightLayer-L2NXMX5U.js.map
