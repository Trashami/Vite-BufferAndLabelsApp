{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/meshUtils/projection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport r from\"../../../core/Logger.js\";import{isNone as e}from\"../../../core/maybe.js\";import{b as o,i as t,f as n,t as f}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f64.js\";import{c}from\"../../../chunks/mat4f64.js\";import{t as m,n as s}from\"../../../chunks/vec3.js\";import{c as i}from\"../../../chunks/vec3f64.js\";import{projectBuffer as y,computeTranslationToOriginAndRotation as p}from\"../../projection.js\";import{getSphericalPCPF as u}from\"../../projectionEllipsoid.js\";import{isCGCS2000 as P,isMars as T,isMoon as l}from\"../spatialReferenceUtils.js\";import{y2lat as A}from\"../webMercatorUtils.js\";import{BufferViewVec3f as F,BufferViewVec3f64 as d}from\"../buffer/BufferView.js\";import{t as E,a as C,n as _}from\"../../../chunks/vec32.js\";const g=r.getLogger(\"esri.geometry.support.meshUtils.normalProjection\");function j(r,e,o,t,n){return B(t)?(b(Y.TO_PCPF,F.fromTypedArray(r),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n)),n):(g.error(\"Cannot convert spatial reference to PCPF\"),n)}function h(r,e,o,t,n){return B(t)?(b(Y.FROM_PCPF,F.fromTypedArray(r),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n)),n):(g.error(\"Cannot convert to spatial reference from PCPF\"),n)}function M(r,e,o){return y(r,e,0,o,u(e),0,r.length/3),o}function O(r,e,o){return y(r,u(o),0,e,o,0,r.length/3),e}function R(r,o,t){if(e(r))return o;const n=d.fromTypedArray(r),f=d.fromTypedArray(o);return E(f,n,t),o}function v(r,n,f){if(e(r))return n;o(x,f);const a=F.fromTypedArray(r),c=F.fromTypedArray(n);return C(c,a,x),t(x)||_(c,c),n}function V(r,n,f){if(e(r))return n;o(x,f);const a=F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c=F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT);if(C(c,a,x),t(x)||_(c,c),r!==n)for(let e=3;e<r.length;e+=4)n[e]=r[e];return n}function k(r,e,o,t,n){if(!B(t))return g.error(\"Cannot convert spatial reference to PCPF\"),n;b(Y.TO_PCPF,F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function L(r,e,o,t,n){if(!B(t))return g.error(\"Cannot convert to spatial reference from PCPF\"),n;b(Y.FROM_PCPF,F.fromTypedArray(r,16),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function b(r,e,o,t,a,c){if(!e)return;const i=o.count,y=u(a);if(S(a))for(let s=0;s<i;s++)t.getVec(s,U),e.getVec(s,w),p(y,U,W,y),n(x,W),r===Y.FROM_PCPF&&f(x,x),m(w,w,x),c.setVec(s,w);else for(let u=0;u<i;u++){t.getVec(u,U),e.getVec(u,w),p(y,U,W,y),n(x,W);const a=A(o.get(u,1));let i=Math.cos(a);r===Y.TO_PCPF&&(i=1/i),x[0]*=i,x[1]*=i,x[2]*=i,x[3]*=i,x[4]*=i,x[5]*=i,r===Y.FROM_PCPF&&f(x,x),m(w,w,x),s(w,w),c.setVec(u,w)}return c}function B(r){return S(r)||N(r)}function S(r){return r.isWGS84||P(r)||T(r)||l(r)}function N(r){return r.isWebMercator}var Y;!function(r){r[r.TO_PCPF=0]=\"TO_PCPF\",r[r.FROM_PCPF=1]=\"FROM_PCPF\"}(Y||(Y={}));const U=i(),w=i(),W=c(),x=a();export{O as projectFromPCPF,h as projectNormalFromPCPF,j as projectNormalToPCPF,L as projectTangentFromPCPF,k as projectTangentToPCPF,M as projectToPCPF,v as transformNormal,R as transformPosition,V as transformTangent};\n"],
  "mappings": "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",
  "names": ["g", "r", "e", "o", "t", "n", "B", "O", "a", "c", "i", "S", "s", "u"]
}
