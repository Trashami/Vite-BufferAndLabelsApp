{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as t}from\"../../../lib/VertexAttribute.js\";function o(o){o.attributes.add(t.POSITION,\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../../../../core/has.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function c({code:c},i){i.doublePrecisionRequiresObfuscation?c.add(e`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):c.add(e`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}function i(e){return!!has(\"force-double-precision-obfuscation\")||e.driverTest.doublePrecisionRequiresObfuscation}export{c as DoublePrecision,i as doublePrecisionRequiresObfuscation};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"mat3\",e.Draw,((e,s,t)=>e.setUniformMatrix3fv(r,o(s,t))))}}export{o as Matrix3DrawUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{c as r}from\"../../../../../../chunks/mat3f64.js\";import{c as o}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f32.js\";import{c as t}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as a}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as s}from\"../util/DoublePrecision.glsl.js\";import{Float3DrawUniform as i}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as m}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as d,NoParameters as n}from\"../../shaderModules/interfaces.js\";import{Matrix3DrawUniform as l}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as f}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as v}from\"../../shaderModules/Matrix4PassUniform.js\";function F(r,o){r.include(a);const e=r.vertex;e.include(s,o),r.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),r.varyings.add(\"vPosition_view\",\"vec3\"),e.uniforms.add([new m(\"transformWorldFromViewTH\",(r=>r.transformWorldFromViewTH)),new m(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL)),new f(\"transformViewFromCameraRelativeRS\",(r=>r.transformViewFromCameraRelativeRS)),new v(\"transformProjFromView\",(r=>r.transformProjFromView)),new l(\"transformWorldFromModelRS\",(r=>r.transformWorldFromModelRS)),new i(\"transformWorldFromModelTH\",(r=>r.transformWorldFromModelTH)),new i(\"transformWorldFromModelTL\",(r=>r.transformWorldFromModelTL))]),e.code.add(d`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\ntransformWorldFromModelTL,\ntransformWorldFromModelTH,\n-transformWorldFromViewTL,\n-transformWorldFromViewTH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}`),e.code.add(d`\n    void forwardPosition(float fOffset) {\n      vPositionWorldCameraRelative = positionWorldCameraRelative();\n      if (fOffset != 0.0) {\n        vPositionWorldCameraRelative += fOffset * ${o.spherical?d`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:d`vec3(0.0, 0.0, 1.0)`};\n      }\n\n      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;\n      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);\n    }\n  `),r.fragment.uniforms.add(new m(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL))),e.code.add(d`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`),r.fragment.code.add(d`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`)}class c extends n{constructor(){super(...arguments),this.transformWorldFromViewTH=t(),this.transformWorldFromViewTL=t(),this.transformViewFromCameraRelativeRS=r(),this.transformProjFromView=o()}}class W extends n{constructor(){super(...arguments),this.transformWorldFromModelRS=r(),this.transformWorldFromModelTH=e(),this.transformWorldFromModelTL=e()}}export{F as VertexPosition,W as VertexPositionDrawParameters,c as VertexPositionPassParameters};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"./ShaderOutput.js\";import{VertexPosition as r}from\"./attributes/VertexPosition.glsl.js\";import{Float2PassUniform as a}from\"../shaderModules/Float2PassUniform.js\";import{glsl as o}from\"../shaderModules/interfaces.js\";function t(e){e.varyings.add(\"linearDepth\",\"float\")}function i(e){e.vertex.uniforms.add(new a(\"nearFar\",((e,r)=>r.camera.nearFar)))}function n(e){e.vertex.code.add(o`float calculateLinearDepth(vec2 nearFar,float z) {\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n}`)}function d(a,d){const{vertex:s}=a;switch(d.output){case e.Color:if(d.receiveShadows)return t(a),void s.code.add(o`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case e.Depth:case e.Shadow:case e.ShadowHighlight:case e.ShadowExludeHighlight:return a.include(r,d),t(a),i(a),n(a),void s.code.add(o`void forwardLinearDepth() {\nlinearDepth = calculateLinearDepth(nearFar, vPosition_view.z);\n}`)}s.code.add(o`void forwardLinearDepth() {}`)}export{d as ForwardLinearDepth,n as addCalculateLinearDepth,t as addLinearDepth,i as addNearFar};\n"],
  "mappings": "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",
  "names": ["o", "n", "c", "i", "n", "e", "o", "e", "t", "o", "e", "r", "n", "c", "t", "e", "i", "n", "a", "d"]
}
