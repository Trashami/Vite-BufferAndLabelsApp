import {
  t7 as t,
  x,
  y4 as y
} from "./chunk-OOLCFNXJ.js";

// node_modules/@arcgis/core/views/3d/support/PropertiesPool.js
var o = class {
  constructor(r, o2) {
    this._owner = o2, this._properties = {}, this._afterDispatchHandle = null;
    for (const t2 in r) {
      const o3 = r[t2], s = new t(o3, void 0, void 0, 2, 2);
      this._properties[t2] = { pool: s, acquired: [] };
    }
    this._afterDispatchHandle = y(() => this._release());
  }
  destroy() {
    this._afterDispatchHandle && (this._afterDispatchHandle.remove(), this._afterDispatchHandle = null);
    for (const e in this._properties) {
      const t2 = this._properties[e];
      for (const e2 of t2.acquired)
        x(e2) || t2.pool.release(e2);
      t2.pool.destroy(), t2.pool = null, t2.acquired = null;
    }
    this._properties = null, this._owner = null;
  }
  get(e) {
    const t2 = this._owner._get(e), r = this._properties[e];
    let o2 = r.pool.acquire();
    for (r.acquired.push(o2); o2 === t2; )
      r.acquired.push(o2), o2 = r.pool.acquire();
    return o2;
  }
  _release() {
    for (const e in this._properties) {
      const t2 = this._properties[e];
      let o2 = 0;
      for (const e2 of t2.acquired)
        x(e2) ? t2.acquired[o2++] = e2 : t2.pool.release(e2);
      t2.acquired.length = o2;
    }
  }
};

export {
  o
};
//# sourceMappingURL=chunk-P3W4YLFD.js.map
