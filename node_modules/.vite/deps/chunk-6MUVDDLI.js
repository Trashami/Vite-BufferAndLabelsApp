import {
  e as e2
} from "./chunk-QXHTRQEZ.js";
import {
  M
} from "./chunk-NWBHRPMR.js";
import {
  n2 as n3
} from "./chunk-IIUWTGWW.js";
import {
  a as a3
} from "./chunk-REIQNAQW.js";
import {
  a,
  a2,
  c
} from "./chunk-MZIWIEIR.js";
import {
  j
} from "./chunk-UDND2Z3V.js";
import {
  s as s2
} from "./chunk-23Y3DIC6.js";
import {
  h,
  l
} from "./chunk-5NXILPDI.js";
import {
  n as n2
} from "./chunk-THVR7IAM.js";
import {
  s
} from "./chunk-VWYWOOPX.js";
import {
  e,
  m,
  n2 as n,
  t5 as t,
  y
} from "./chunk-OOLCFNXJ.js";

// node_modules/@arcgis/core/widgets/LayerList/support/layerListUtils.js
var e3 = { hide: "hide", hideChildren: "hide-children" };
function n4(e4) {
  if (e4)
    return null != e4.listMode ? e4.listMode : void 0;
}
function i(e4) {
  if (e4)
    return null != e4.minScale ? e4.minScale : void 0;
}
function t2(e4) {
  if (e4)
    return null != e4.maxScale ? e4.maxScale : void 0;
}
function r(e4) {
  if (!e4)
    return "inherited";
  const n5 = e4.get("layer.capabilities.exportMap.supportsSublayerVisibility");
  if ("boolean" == typeof n5)
    return n5 ? "independent" : "inherited";
  const i2 = e4.get("capabilities.exportMap.supportsSublayerVisibility");
  return "boolean" == typeof i2 ? i2 ? "independent" : "inherited" : null != e4.visibilityMode ? e4.visibilityMode : "independent";
}
function u(n5) {
  if (!n5)
    return;
  if (!("type" in n5)) {
    return "sublayers";
  }
  if (!(n5.listMode === e3.hideChildren || "wmts" === n5.type)) {
    if ("group" === n5.type) {
      return "layers";
    }
    return "sublayers";
  }
}
function o(e4) {
  const n5 = e4 && (e4.get("layer.layer") || e4.layer);
  if (!n5)
    return false;
  const i2 = n5.get("capabilities.exportMap.supportsDynamicLayers");
  return "boolean" != typeof i2 || i2;
}
function l2(i2) {
  return n4(i2) !== e3.hide;
}
function a4(e4, n5) {
  if (!e4 || isNaN(n5))
    return false;
  const r3 = i(e4), u2 = t2(e4), o3 = !isNaN(r3) && r3 > 0 && n5 > r3, l3 = !isNaN(u2) && u2 > 0 && n5 < u2;
  return o3 || l3;
}
function s3(e4, n5) {
  e4 && e4.sort((e5, i2) => {
    const t3 = n5.indexOf(e5.uid), r3 = n5.indexOf(i2.uid);
    return t3 > r3 ? -1 : t3 < r3 ? 1 : 0;
  });
}
function c2(e4, n5) {
  const i2 = e4 == null ? void 0 : e4.layer;
  if (!i2)
    return;
  const t3 = u(i2);
  if (!t3)
    return;
  s3(i2.get(t3), n5);
}
function d(e4) {
  const n5 = e4 == null ? void 0 : e4.layer;
  return n5 && "group" === n5.type ? n5.layers : null;
}
function f(e4, n5) {
  var _a;
  const i2 = (_a = e4.layer) == null ? void 0 : _a.uid;
  return i2 && n5.find((e5) => {
    var _a2;
    return ((_a2 = e5.layer) == null ? void 0 : _a2.uid) === i2;
  });
}
function y2(e4) {
  const n5 = p(e4) ? e4 : null, i2 = e4 == null ? void 0 : e4.parent, t3 = "map-image" === (i2 == null ? void 0 : i2.type) && n5.source, r3 = "";
  return t3 && i2 ? { layer: i2, title: r3, sublayerIds: [t3.mapLayerId] } : { layer: e4, title: r3 };
}
function p(e4) {
  return !!(e4 == null ? void 0 : e4.layer);
}

// node_modules/@arcgis/core/support/actions/ActionSlider.js
var o2;
var r2 = o2 = class extends c {
  constructor(s4) {
    super(s4), this.displayValueEnabled = false, this.max = 1, this.min = 0, this.step = 0.1, this.type = "slider", this.value = null;
  }
  clone() {
    return new o2({ active: this.active, className: this.className, disabled: this.disabled, id: this.id, indicator: this.indicator, title: this.title, visible: this.visible, displayValueEnabled: this.displayValueEnabled, max: this.max, min: this.min, step: this.step, value: this.value });
  }
};
e([y()], r2.prototype, "displayValueEnabled", void 0), e([y()], r2.prototype, "max", void 0), e([y()], r2.prototype, "min", void 0), e([y()], r2.prototype, "step", void 0), e([y()], r2.prototype, "value", void 0), r2 = o2 = e([n("esri.support.Action.ActionSlider")], r2);
var a5 = r2;

// node_modules/@arcgis/core/widgets/LayerList/ListItemPanel.js
var p2 = { base: "esri-layer-list-panel", content: "esri-layer-list-panel__content", contentLegend: "esri-layer-list-panel__content--legend", contentString: "esri-layer-list-panel__content--string", contentElement: "esri-layer-list-panel__content--html-element", contentWidget: "esri-layer-list-panel__content--widget" };
var h2 = "legends";
var g = class extends s2(M) {
  constructor(e4, s4) {
    super(e4, s4), this._legend = null, this._handles = new t(), this.content = null, this.image = null, this.listItem = null, this.open = false, this.visible = true;
  }
  initialize() {
    this.addHandles(l(() => this.content, (e4) => this._createLegend(e4), h));
  }
  destroy() {
    const { _legend: e4 } = this;
    e4 && e4.destroy(), this._legend = null;
  }
  get className() {
    const { image: e4 } = this, t3 = this._getFirstWidget();
    return this._get("className") || !e4 && t3 ? t3.iconClass : "";
  }
  set className(e4) {
    this._override("className", e4);
  }
  get disabled() {
    var _a;
    const { listItem: e4, _legend: t3, content: s4 } = this;
    return !e4 || !(Array.isArray(s4) && s4.length > 1) && (!!t3 && (!((_a = t3.activeLayerInfos) == null ? void 0 : _a.length) || !e4.visibleAtCurrentScale));
  }
  set disabled(e4) {
    this._overrideIfSome("disabled", e4);
  }
  get title() {
    const e4 = this._getFirstWidget();
    return this._get("title") || e4 ? e4.label : "";
  }
  set title(e4) {
    this._override("title", e4);
  }
  render() {
    return n3("div", { class: p2.base }, this._renderContents());
  }
  _renderContent(e4) {
    const { _legend: t3, disabled: s4 } = this;
    return !e4 || s4 ? null : "legend" === e4 && t3 ? n3("div", { class: this.classes(p2.content, p2.contentLegend), key: t3 }, t3.render()) : "string" == typeof e4 ? n3("div", { class: this.classes(p2.content, p2.contentString), key: e4, innerHTML: e4 }) : e2(e4) ? n3("div", { class: this.classes(p2.content, p2.contentWidget), key: e4 }, e4.render()) : e4 instanceof HTMLElement ? n3("div", { class: this.classes(p2.content, p2.contentElement), key: e4, bind: e4, afterCreate: this._attachToNode }) : null;
  }
  _renderContents() {
    const { content: e4 } = this;
    return Array.isArray(e4) ? e4.map((e5) => this._renderContent(e5)) : this._renderContent(e4);
  }
  _getLegendOptions() {
    const { listItem: e4 } = this;
    if (!e4)
      return {};
    const { layer: t3, view: s4 } = e4;
    return t3 && s4 ? { view: s4, layerInfos: [y2(t3)] } : {};
  }
  _createLegend(e4) {
    this._hasLegend(e4) && !this._legend && import("./Legend-4HSPVMGQ.js").then(({ default: e5 }) => {
      const { _handles: t3, listItem: s4 } = this, i2 = new e5(this._getLegendOptions());
      this._legend = i2, this.notifyChange("className"), this.notifyChange("title");
      const o3 = l(() => {
        var _a, _b;
        return [s4 == null ? void 0 : s4.view, s4 == null ? void 0 : s4.layer, (_a = s4 == null ? void 0 : s4.layer) == null ? void 0 : _a.source, (_b = s4 == null ? void 0 : s4.layer) == null ? void 0 : _b.parent];
      }, () => this._updateLegend(i2), h);
      t3.add(o3, h2), this.scheduleRender();
    });
  }
  _hasLegend(e4) {
    const t3 = "legend";
    return e4 === t3 || !!Array.isArray(e4) && e4.includes(t3);
  }
  _attachToNode(e4) {
    e4.appendChild(this);
  }
  _updateLegend(e4) {
    e4.set(this._getLegendOptions()), this.scheduleRender();
  }
  _getWidget(e4) {
    return "legend" === e4 ? this._legend : e2(e4) ? e4 : null;
  }
  _getFirstWidget() {
    const { content: e4 } = this;
    if (Array.isArray(e4)) {
      let t3 = null;
      return e4.some((e5) => {
        const s4 = this._getWidget(e5);
        return s4 && (t3 = s4), !!s4;
      }), t3;
    }
    return this._getWidget(e4);
  }
};
e([y()], g.prototype, "_legend", void 0), e([y()], g.prototype, "className", null), e([y()], g.prototype, "content", void 0), e([y()], g.prototype, "disabled", null), e([y()], g.prototype, "image", void 0), e([y()], g.prototype, "listItem", void 0), e([y()], g.prototype, "title", null), e([y()], g.prototype, "open", void 0), e([y()], g.prototype, "visible", void 0), g = e([n("esri.widgets.LayerList.ListItemPanel")], g);
var _ = g;

// node_modules/@arcgis/core/widgets/LayerList/ListItem.js
var g2;
var S = j.ofType({ key: "type", defaultKeyValue: "button", base: c, typeMap: { button: a, toggle: a2, slider: a5 } });
var C = j.ofType(S);
var _2 = "layer";
var P = "child-list-mode";
var O = "hide";
var j2 = "esri.widgets.LayerList.ListItem";
var I = g2 = class extends s2(a3(m)) {
  constructor(t3) {
    super(t3), this.actionsSections = new C(), this.actionsOpen = false, this.checkPublishStatusEnabled = false, this.children = new (j.ofType(g2))(), this.childrenSortable = true, this.hidden = false, this.layer = null, this.layerView = null, this.listItemCreatedFunction = null, this.open = false, this.panel = null, this.parent = null, this.sortable = true, this.view = null;
  }
  initialize() {
    if (this.handles.add([l(() => this.layer, (t3) => this._watchLayerProperties(t3), h), l(() => this.checkPublishStatusEnabled, (t3) => this._updateChildrenPublishing(t3), h), l(() => this.view, (t3) => this._updateChildrenView(t3), h), l(() => this.panel, (t3) => this._setListItemOnPanel(t3), h), l(() => [this.layer, this.view], () => this._getLayerView(), h)]), "function" == typeof this.listItemCreatedFunction) {
      const t3 = { item: this };
      this.listItemCreatedFunction.call(null, t3);
    }
  }
  destroy() {
    this.view = null;
  }
  get connectionStatus() {
    const { layerView: t3, publishing: e4 } = this;
    if (!e4 && t3 && "connectionStatus" in t3)
      return t3.connectionStatus;
  }
  get error() {
    var _a;
    return (_a = this.layer) == null ? void 0 : _a.loadError;
  }
  get incompatible() {
    const { layerView: t3 } = this;
    return !(!t3 || !("spatialReferenceSupported" in t3)) && !t3.spatialReferenceSupported;
  }
  castPanel(t3) {
    return this.get("panel.open") && !t3.hasOwnProperty("open") && (t3.open = true), t3 ? new _(t3) : null;
  }
  get title() {
    const t3 = this.get("layer.layer");
    return (!t3 || t3 && this.get("layer.layer.loaded")) && this.get("layer.title") || this.get("layer.attributes.title") || "";
  }
  set title(t3) {
    this._override("title", t3);
  }
  get publishing() {
    const { layer: t3, checkPublishStatusEnabled: e4 } = this;
    return e4 && t3 && "publishingInfo" in t3 && "publishing" === t3.publishingInfo.status;
  }
  get updating() {
    const { layerView: t3, connectionStatus: e4, layer: i2, publishing: s4 } = this;
    return !s4 && !e4 && (t3 ? t3.updating : "loading" === (i2 == null ? void 0 : i2.loadStatus) || false);
  }
  get visible() {
    var _a;
    return (_a = this.layer) == null ? void 0 : _a.visible;
  }
  set visible(t3) {
    const e4 = this.layer;
    e4 && (e4.visible = t3);
  }
  get visibleAtCurrentScale() {
    return !a4(this.layer, this.get("view.scale"));
  }
  get visibilityMode() {
    return r(this.layer);
  }
  clone() {
    return new g2({ actionsSections: this.actionsSections.clone(), actionsOpen: this.actionsOpen, checkPublishStatusEnabled: this.checkPublishStatusEnabled, children: this.children.clone(), layer: this.layer, listItemCreatedFunction: this.listItemCreatedFunction, open: this.open, panel: this.panel, title: this.title, view: this.view, visible: this.visible });
  }
  _setListItemOnPanel(t3) {
    t3 && (t3.listItem = this);
  }
  _updateChildrenPublishing(t3) {
    const e4 = this.children;
    e4 && e4.forEach((e5) => e5.checkPublishStatusEnabled = t3);
  }
  _updateChildrenView(t3) {
    const e4 = this.children;
    e4 && e4.forEach((e5) => e5.view = t3);
  }
  _addChildren(t3) {
    if (this.handles.remove(P), this.children.removeAll(), !t3)
      return;
    t3.forEach((e5) => {
      this.handles.add(l(() => e5.listMode, () => this._addChildren(t3)), P);
    });
    const e4 = t3.filter((t4) => n4(t4) !== O);
    this.children.addMany(this._makeChildren(e4));
  }
  _watchSublayerChanges(t3) {
    t3 && this.handles.add(t3.on("change", () => {
      this._addChildren(t3);
    }), _2);
  }
  _initializeChildLayers(t3) {
    this._addChildren(t3), this._watchSublayerChanges(t3);
  }
  _makeChildren(t3) {
    return t3.map((t4) => l2(t4) ? new g2({ layer: t4, checkPublishStatusEnabled: this.checkPublishStatusEnabled, listItemCreatedFunction: this.listItemCreatedFunction, parent: this, view: this.view }) : null).reverse();
  }
  _watchLayerProperties(t3) {
    if (!this.handles)
      return;
    if (this.handles.remove(_2), this.handles.remove(P), !t3)
      return;
    this.handles.add(l(() => t3.listMode, () => this._watchLayerProperties(t3)), _2);
    if ("hide-children" === n4(t3))
      return void this.children.removeAll();
    const e4 = u(t3);
    e4 && this.handles.add(l(() => t3[e4], () => {
      t3.hasOwnProperty(e4) && this._initializeChildLayers(t3[e4]);
    }, h), _2);
  }
  async _getLayerView() {
    const { layer: t3, view: e4 } = this;
    if (t3 && e4)
      try {
        const i2 = await e4.whenLayerView(t3);
        if (i2.layer !== this.layer)
          return;
        this._set("layerView", i2);
      } catch {
      }
  }
};
e([y({ type: C })], I.prototype, "actionsSections", void 0), e([y()], I.prototype, "actionsOpen", void 0), e([y()], I.prototype, "checkPublishStatusEnabled", void 0), e([y({ type: j })], I.prototype, "children", void 0), e([y()], I.prototype, "childrenSortable", void 0), e([y({ readOnly: true })], I.prototype, "connectionStatus", null), e([y({ readOnly: true })], I.prototype, "error", null), e([y()], I.prototype, "hidden", void 0), e([y({ readOnly: true })], I.prototype, "incompatible", null), e([y()], I.prototype, "layer", void 0), e([y({ readOnly: true })], I.prototype, "layerView", void 0), e([y()], I.prototype, "listItemCreatedFunction", void 0), e([y()], I.prototype, "open", void 0), e([y({ type: _ })], I.prototype, "panel", void 0), e([s("panel")], I.prototype, "castPanel", null), e([y()], I.prototype, "parent", void 0), e([y()], I.prototype, "sortable", void 0), e([y()], I.prototype, "title", null), e([y({ readOnly: true })], I.prototype, "publishing", null), e([y({ readOnly: true })], I.prototype, "updating", null), e([y()], I.prototype, "view", void 0), e([y()], I.prototype, "visible", null), e([y({ readOnly: true })], I.prototype, "visibleAtCurrentScale", null), e([y({ readOnly: true })], I.prototype, "visibilityMode", null), I = g2 = e([n(j2)], I);
var L = I;

// node_modules/@arcgis/core/widgets/LayerList/LayerListViewModel.js
var h3 = { view: "view", viewLayers: "view-layers", mapLayers: "map-layers", layerViews: "layer-views", layerListMode: "layer-list-mode", children: "children" };
var m2 = "hide";
var p3 = j.ofType(L);
var y3 = class extends n2.EventedAccessor {
  constructor(e4) {
    super(e4), this._handles = new t(), this.checkPublishStatusEnabled = false, this.listItemCreatedFunction = null, this.operationalItems = new p3(), this.view = null;
  }
  initialize() {
    this._handles.add([l(() => {
      var _a;
      return [this.view, (_a = this.view) == null ? void 0 : _a.ready];
    }, () => this._viewHandles(), h), l(() => [this.listItemCreatedFunction, this.checkPublishStatusEnabled], () => this._recompileList())], h3.view);
  }
  destroy() {
    this._handles.destroy(), this._handles = null, this.view = null, this.operationalItems.removeAll();
  }
  get state() {
    const e4 = this.get("view");
    return this.get("view.ready") ? "ready" : e4 ? "loading" : "disabled";
  }
  triggerAction(e4, t3) {
    e4 && !e4.disabled && this.emit("trigger-action", { action: e4, item: t3 });
  }
  moveListItem(e4, t3, s4, i2) {
    var _a, _b;
    const r3 = e4 == null ? void 0 : e4.layer;
    if (!r3)
      return;
    const a6 = (_b = (_a = this.view) == null ? void 0 : _a.map) == null ? void 0 : _b.layers, o3 = t3 ? d(t3) : a6, l3 = s4 ? d(s4) : a6;
    if (!o3 || !l3)
      return;
    const { operationalItems: n5 } = this, d2 = (t3 == null ? void 0 : t3.children) || n5, h4 = (s4 == null ? void 0 : s4.children) || n5, m3 = l3.length - i2;
    e4.parent = s4 || null, d2.includes(e4) && d2.remove(e4), o3.includes(r3) && o3.remove(r3), h4.includes(e4) || h4.add(e4, m3), l3.includes(r3) || l3.add(r3, m3);
  }
  _createLayerViewHandles(e4) {
    const { _handles: t3 } = this;
    t3.remove(h3.layerViews), this._compileList(), e4 && t3.add(e4.on("change", () => this._compileList()), h3.layerViews);
  }
  _createMapLayerHandles(e4) {
    const { _handles: t3 } = this;
    t3.remove(h3.mapLayers), this._compileList(), e4 && t3.add(e4.on("change", () => this._compileList()), h3.mapLayers);
  }
  _createListItem(e4) {
    const { view: t3, listItemCreatedFunction: s4, checkPublishStatusEnabled: i2 } = this;
    return new L({ checkPublishStatusEnabled: i2, layer: e4, listItemCreatedFunction: s4, view: t3 });
  }
  _removeAllItems() {
    const { _handles: e4, operationalItems: t3 } = this;
    t3.forEach((t4) => {
      e4.remove(`${h3.children}-${t4.uid}`);
    }), t3.removeAll();
  }
  _getViewableLayers(e4) {
    if (e4)
      return e4.filter((e5) => n4(e5) !== m2);
  }
  _watchLayersListMode(e4) {
    const { _handles: t3 } = this;
    t3.remove(h3.layerListMode), e4 && e4.forEach((e5) => {
      "listMode" in e5 && t3.add(l(() => e5.listMode, () => this._compileList()), h3.layerListMode);
    });
  }
  _compileList() {
    const e4 = this.get("view.map.layers");
    this._watchLayersListMode(e4);
    const t3 = this._getViewableLayers(e4);
    t3 && t3.length ? (this._createNewItems(t3), this._removeItems(t3), this._sortItems(t3)) : this._removeAllItems();
  }
  _createNewItems(e4) {
    const { operationalItems: t3 } = this;
    e4.forEach((e5) => {
      t3.find((t4) => t4.layer === e5) || t3.add(this._createListItem(e5));
    });
  }
  _removeItems(e4) {
    const { _handles: t3, operationalItems: s4 } = this, i2 = [];
    s4.forEach((s5) => {
      s5 && e4 && e4.includes(s5.layer) || (t3.remove(`${h3.children}-${s5.uid}`), i2.push(s5));
    }), s4.removeMany(i2);
  }
  _sortItems(e4) {
    const { operationalItems: t3 } = this;
    t3.sort((t4, s4) => {
      const i2 = e4.indexOf(t4.layer), r3 = e4.indexOf(s4.layer);
      return i2 > r3 ? -1 : i2 < r3 ? 1 : 0;
    });
  }
  _recompileList() {
    this._removeAllItems(), this._compileList();
  }
  _viewHandles() {
    const { _handles: e4, view: t3 } = this;
    e4.remove([h3.mapLayers, h3.layerViews, h3.viewLayers]), this._compileList(), t3 && t3.ready && e4.add([l(() => {
      var _a, _b;
      return (_b = (_a = this.view) == null ? void 0 : _a.map) == null ? void 0 : _b.allLayers;
    }, (e5) => this._createMapLayerHandles(e5), h), l(() => {
      var _a;
      return (_a = this.view) == null ? void 0 : _a.allLayerViews;
    }, (e5) => this._createLayerViewHandles(e5), h)], h3.viewLayers);
  }
};
e([y()], y3.prototype, "checkPublishStatusEnabled", void 0), e([y()], y3.prototype, "listItemCreatedFunction", void 0), e([y({ type: p3 })], y3.prototype, "operationalItems", void 0), e([y({ readOnly: true })], y3.prototype, "state", null), e([y()], y3.prototype, "view", void 0), y3 = e([n("esri.widgets.LayerList.LayerListViewModel")], y3);
var v = y3;

export {
  u,
  o,
  l2 as l,
  s3 as s,
  c2 as c,
  f,
  L,
  v
};
//# sourceMappingURL=chunk-6MUVDDLI.js.map
