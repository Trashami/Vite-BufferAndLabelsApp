import {
  d
} from "./chunk-PHXBWNSB.js";
import {
  t as t4
} from "./chunk-TFPMF7EJ.js";
import {
  e as e5
} from "./chunk-4RQKL5NC.js";
import {
  a as a3,
  n as n5
} from "./chunk-G34PZCB3.js";
import "./chunk-DUCSW4OU.js";
import {
  f,
  i as i2,
  s as s8
} from "./chunk-WVDA5Z37.js";
import {
  e as e6
} from "./chunk-EKKHTIQT.js";
import {
  t as t3
} from "./chunk-RDNOEC45.js";
import {
  e as e4
} from "./chunk-QRBRKBU3.js";
import {
  M,
  e2 as e3
} from "./chunk-NWBHRPMR.js";
import {
  A,
  k as k2,
  n2 as n3,
  v as v3
} from "./chunk-IIUWTGWW.js";
import "./chunk-K6AYGXUT.js";
import "./chunk-BHXTNOEK.js";
import "./chunk-IS4TIT4N.js";
import "./chunk-I4RYNNL6.js";
import {
  c
} from "./chunk-GY2AJLN6.js";
import {
  s as s6
} from "./chunk-FMJZBZWF.js";
import {
  u
} from "./chunk-GOYVJTGW.js";
import {
  a as a2
} from "./chunk-ZPYDYUP5.js";
import {
  $
} from "./chunk-WJCI2CGX.js";
import {
  g
} from "./chunk-J6LQZWZI.js";
import {
  m as m4,
  n as n4
} from "./chunk-OD3FDQCI.js";
import "./chunk-J2PJNRU7.js";
import "./chunk-56SPM3WK.js";
import "./chunk-XMZAPOBR.js";
import "./chunk-BLJKKR5D.js";
import "./chunk-ZGNCYHMZ.js";
import "./chunk-X2S4RQJ4.js";
import {
  k as k3
} from "./chunk-FUPLN7UM.js";
import "./chunk-376OPXM4.js";
import "./chunk-DER356EU.js";
import "./chunk-MZIWIEIR.js";
import {
  S
} from "./chunk-TQEOEDAZ.js";
import {
  m as m3
} from "./chunk-SHFHZMHO.js";
import "./chunk-NRP45AHD.js";
import "./chunk-IWQ7452U.js";
import "./chunk-NAN5J6QS.js";
import "./chunk-B4DKBAM3.js";
import "./chunk-6M2AHKYV.js";
import {
  j as j3
} from "./chunk-SZIJNKCV.js";
import "./chunk-6O43OEU5.js";
import "./chunk-J2K7ZDSV.js";
import "./chunk-2UML3WQZ.js";
import "./chunk-KXVMEIWT.js";
import {
  j as j2
} from "./chunk-UDND2Z3V.js";
import {
  s as s7
} from "./chunk-23Y3DIC6.js";
import "./chunk-JUVQV3R3.js";
import "./chunk-RAX2HD42.js";
import "./chunk-ZYRIJWLX.js";
import "./chunk-C5H57NTD.js";
import "./chunk-3LR5O4WA.js";
import "./chunk-GDVNKPJ7.js";
import "./chunk-D4V6J5BT.js";
import "./chunk-OSHI574D.js";
import "./chunk-YWAQYJRC.js";
import "./chunk-B356PXLT.js";
import {
  v as v2
} from "./chunk-EHPBHJYZ.js";
import {
  m2,
  v2 as v
} from "./chunk-3MNMDUQZ.js";
import {
  R,
  w,
  w2
} from "./chunk-UWG37XSU.js";
import {
  k2 as k
} from "./chunk-LNZAOBFW.js";
import "./chunk-PF5I4XZQ.js";
import "./chunk-HLM6QCL2.js";
import "./chunk-RXYULINL.js";
import {
  a,
  h,
  j,
  l as l2
} from "./chunk-5NXILPDI.js";
import {
  n as n2
} from "./chunk-THVR7IAM.js";
import "./chunk-ZWJJTUFL.js";
import {
  L
} from "./chunk-XQN7F674.js";
import {
  U as U2
} from "./chunk-DMI7A7TC.js";
import "./chunk-ZHAW7FZS.js";
import "./chunk-KAN4HXCG.js";
import {
  s as s5
} from "./chunk-4FEGON7M.js";
import "./chunk-VWYWOOPX.js";
import {
  s as s4
} from "./chunk-M5VHU5LK.js";
import "./chunk-CXFRNDG4.js";
import {
  l
} from "./chunk-7QMMKGW4.js";
import {
  e as e2,
  m,
  n2 as n,
  t5 as t2,
  y as y2
} from "./chunk-OOLCFNXJ.js";
import "./chunk-6KZ2LTDA.js";
import "./chunk-U2XHEJM7.js";
import {
  E,
  U,
  i
} from "./chunk-MJXQTGI2.js";
import {
  s as s3
} from "./chunk-LIZHLHNA.js";
import {
  b
} from "./chunk-BTUHYGXO.js";
import {
  s,
  s2
} from "./chunk-UA3YPL2R.js";
import {
  has,
  o2 as o,
  y
} from "./chunk-HVKDYDPP.js";
import "./chunk-6QC7MLLS.js";
import {
  e,
  r,
  t
} from "./chunk-MIHB3CIK.js";
import "./chunk-OL3AADLO.js";

// node_modules/@arcgis/core/widgets/Search/SearchSource.js
var r2 = class extends s7(l) {
  constructor(t7) {
    super(t7), this.autoNavigate = null, this.filter = null, this.getResults = null, this.getSuggestions = null, this.maxResults = null, this.maxSuggestions = null, this.minSuggestCharacters = null, this.outFields = null, this.placeholder = "", this.popupEnabled = null, this.popupTemplate = null, this.prefix = "", this.resultGraphicEnabled = null, this.resultSymbol = null, this.suggestionsEnabled = null, this.suffix = "", this.withinViewEnabled = false, this.zoomScale = null;
  }
};
e2([y2()], r2.prototype, "autoNavigate", void 0), e2([y2()], r2.prototype, "filter", void 0), e2([y2()], r2.prototype, "getResults", void 0), e2([y2()], r2.prototype, "getSuggestions", void 0), e2([y2()], r2.prototype, "maxResults", void 0), e2([y2()], r2.prototype, "maxSuggestions", void 0), e2([y2()], r2.prototype, "minSuggestCharacters", void 0), e2([y2()], r2.prototype, "outFields", void 0), e2([y2()], r2.prototype, "placeholder", void 0), e2([y2()], r2.prototype, "popupEnabled", void 0), e2([y2()], r2.prototype, "popupTemplate", void 0), e2([y2()], r2.prototype, "prefix", void 0), e2([y2()], r2.prototype, "resultGraphicEnabled", void 0), e2([y2()], r2.prototype, "resultSymbol", void 0), e2([y2()], r2.prototype, "suggestionsEnabled", void 0), e2([y2()], r2.prototype, "suffix", void 0), e2([y2()], r2.prototype, "withinViewEnabled", void 0), e2([y2()], r2.prototype, "zoomScale", void 0), r2 = e2([n("esri.widgets.Search.SearchSource")], r2);
var i3 = r2;

// node_modules/@arcgis/core/widgets/Search/support/geometryUtils.js
var o2 = s2.getLogger("esri.widgets.Search.support.geometryUtils");
function s9(r3, t7) {
  var _a, _b;
  if (!t7)
    return o2.error("missing-parameter: view is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "view is missing."));
  if (!r3)
    return o2.error("missing-parameter: point is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "point is missing."));
  if (r3.hasZ || "2d" === t7.type)
    return Promise.resolve(r3);
  const n13 = (_a = t7 == null ? void 0 : t7.map) == null ? void 0 : _a.ground;
  return n13 && n13.layers.length ? n13.queryElevation(r3, { cache: (_b = t7.basemapTerrain) == null ? void 0 : _b.elevationQueryCache }).then((e9) => e9.geometry) : Promise.resolve(r3);
}
function m5(e9) {
  if (t(e9))
    return null;
  switch (e9.type) {
    case "point":
      return e9;
    case "extent":
      return e9.center;
    case "polygon":
      return e9.centroid;
    case "multipoint":
      return e9.getPoint(0);
    case "polyline":
      return e9.getPoint(0, 0);
  }
  return null;
}
function a4(e9, r3, n13) {
  return t(e9) ? null : "extent" === e9.type ? e9 : "multipoint" === e9.type || "polygon" === e9.type || "polyline" === e9.type ? e9.extent : "point" === e9.type ? c2(e9, r3, n13) : void 0;
}
function p(e9, r3, n13) {
  return t(e9) || t(r3) ? null : c2(e9.center, r3, n13);
}
function c2(e9, r3, t7) {
  const o5 = e9.hasZ ? e9.z : void 0;
  if (r3 && r3.map) {
    return (t7 ? d(r3, t7) : r3.extent).clone().centerAt(e9).set({ zmax: o5, zmin: o5 });
  }
  return new w2({ xmin: e9.x - 0.25, ymin: e9.y - 0.25, xmax: e9.x + 0.25, ymax: e9.y + 0.25, spatialReference: e9.spatialReference, zmin: o5, zmax: o5 });
}

// node_modules/@arcgis/core/widgets/Search/support/layerSearchUtils.js
var d2 = /https?:\/\/services.*\.arcgis\.com/i;
var f2 = /(?:\{([^}]+)\})/g;
var p2 = s2.getLogger("esri.widgets.Search.support.layerSearchUtils");
function m6(t7, r3) {
  const { exactMatch: i7 = false, location: o5, maxResults: l6, spatialReference: u4, source: a10, sourceIndex: c10, suggestResult: d8, view: f6 } = t7, { layer: m10, filter: g5, zoomScale: T2 } = a10, L4 = f6 && f6.scale, S5 = y3(a10, f6), q3 = r3 && r3.signal;
  return F(m10).then(() => {
    const e9 = m10.popupTemplate;
    return e9 ? e9.getRequiredFields(m10.fieldsIndex) : null;
  }).then((t8) => {
    var _a, _b, _c;
    const { objectIdField: r4, returnZ: y6 } = m10, F2 = b2(a10);
    if (!I(m10, F2))
      throw p2.error("invalid-field: displayField is invalid."), new s3("getResults():invalid-field", "displayField is invalid.");
    const C2 = t8 && t8.length ? t8 : [F2], E3 = a10.outFields || C2, M3 = h2(E3);
    E3.includes(r4) || M3 || E3.push(r4), ((_a = m10.floorInfo) == null ? void 0 : _a.floorField) && E3.push(m10.floorInfo.floorField);
    if (!(M3 || j4(m10, E3)))
      throw p2.error("invalid-field: outField is invalid."), new s3("getResults():invalid-field", "outField is invalid.");
    const N2 = m10.createQuery(), { orderByFields: k5 } = a10;
    if (k5 && (N2.orderByFields = k5), u4) {
      N2.outSpatialReference = u4;
      const e9 = 1 / $(u4);
      e9 && (N2.maxAllowableOffset = e9);
    }
    const O2 = "mesh" === m10.geometryType || "multipatch" === m10.geometryType, A3 = ((_c = (_b = m10.capabilities) == null ? void 0 : _b.data) == null ? void 0 : _c.supportsZ) && !O2;
    if (N2.returnZ = A3 && false !== y6, N2.returnGeometry = true, N2.multipatchOption = O2 ? "xyFootprint" : null, E3 && (N2.outFields = E3), o5)
      N2.geometry = o5;
    else if (d8.key)
      N2.objectIds = [d8.key];
    else {
      const t9 = a10.searchFields || [F2];
      if (!j4(m10, t9))
        throw p2.error("invalid-field: search field is invalid."), new s3("getResults():invalid-field", "search field is invalid.");
      $2(m10) && (N2.num = l6), S5 && (N2.geometry = S5);
      if (!d8.text.trim())
        return [];
      const r5 = d8.text, { prefix: n13 = "", suffix: o6 = "" } = a10, u5 = R2(`${n13}${r5}${o6}`);
      v4(m10) && w3(m10, t9) && !i7 && r5 && (N2.fullText = [new c({ onFields: t9, searchTerm: r5, searchType: "prefix" })]);
      const c11 = D({ searchTerm: u5, layer: m10, searchFields: t9, filter: g5, exactMatch: i7, query: N2, type: "search" });
      if (N2.where = c11, !x(N2))
        return [];
    }
    return m10.queryFeatures(N2, { signal: q3 }).then((e9) => U3(e9, f6, a10, c10, F2, L4, T2));
  });
}
function g2(t7, r3) {
  const { source: i7, spatialReference: n13, view: o5, suggestTerm: l6, maxSuggestions: u4, sourceIndex: a10, exactMatch: c10 } = t7, { layer: d8, filter: m10 } = i7, g5 = r3 && r3.signal, T2 = y3(i7, o5);
  return F(d8).then(() => {
    if (!$2(d8))
      return [];
    const t8 = b2(i7), r4 = i7.searchFields || [t8], o6 = [];
    i7.suggestionTemplate ? i7.suggestionTemplate.replace(f2, (e9, t9) => (o6.push(t9), e9)) : o6.push(t8);
    const y6 = h2(o6);
    o6.includes(d8.objectIdField) || y6 || o6.push(d8.objectIdField);
    const F2 = I(d8, t8), L4 = y6 || j4(d8, o6), S5 = j4(d8, r4);
    if (!F2)
      throw p2.error("invalid-field: displayField is invalid."), new s3("getSuggestions():invalid-field", "displayField is invalid.");
    if (!L4)
      throw p2.error("invalid-field: outField is invalid."), new s3("getSuggestions():invalid-field", "outField is invalid.");
    if (!S5)
      throw p2.error("invalid-field: search field is invalid."), new s3("getSuggestions():invalid-field", "search field is invalid.");
    const q3 = d8.createQuery(), { orderByFields: C2 } = i7;
    C2 && (q3.orderByFields = C2), q3.outSpatialReference = n13, q3.returnGeometry = false, q3.num = u4, q3.outFields = o6, T2 && (q3.geometry = T2);
    if (!l6.trim())
      return [];
    const { prefix: E3 = "", suffix: M3 = "" } = i7, N2 = R2(`${E3}${l6}${M3}`);
    v4(d8) && w3(d8, r4) && !c10 && l6 && (q3.fullText = [new c({ onFields: r4, searchTerm: l6, searchType: "prefix" })]);
    const k5 = D({ searchTerm: N2, layer: d8, searchFields: r4, filter: m10, exactMatch: c10, query: q3, type: "suggest" });
    return q3.where = k5, x(q3) ? d8.queryFeatures(q3, { signal: g5 }).then((e9) => A2(e9, i7, a10, t8)) : [];
  });
}
function y3(e9, t7) {
  const { filter: r3, withinViewEnabled: i7 } = e9, n13 = t7 && t7.extent;
  return r3 && r3.geometry || (i7 && n13 ? n13 : void 0);
}
function h2(e9) {
  return e9 && e9.includes("*");
}
async function F(e9) {
  e9 && await e9.load();
}
function x(e9) {
  return !(!e9.fullText && !e9.where);
}
function w3(e9, t7) {
  const r3 = e9 == null ? void 0 : e9.indexes;
  if (!r3 || !(t7 == null ? void 0 : t7.length))
    return false;
  return r3.filter((e10) => "FullText" === e10.indexType).some((e10) => {
    var _a;
    const r4 = ((_a = e10.fields) == null ? void 0 : _a.split(",").map((e11) => e11.trim().toLowerCase())) || [];
    return t7.every((e11) => r4.includes(e11.toLowerCase()));
  });
}
function v4(e9) {
  var _a, _b, _c;
  return (_c = (_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsFullTextSearch) != null ? _c : false;
}
function $2(e9) {
  var _a, _b, _c;
  return (_c = (_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsPagination) != null ? _c : false;
}
function T(e9) {
  var _a, _b, _c, _d;
  return (_d = (_c = (_b = (_a = e9 == null ? void 0 : e9.fieldsIndex) == null ? void 0 : _a.fields) == null ? void 0 : _b.find((e10) => "string" === e10.type)) == null ? void 0 : _c.name) != null ? _d : "";
}
function b2(e9) {
  return e9.displayField || e9.layer.displayField || T(e9.layer);
}
function j4(e9, t7) {
  return !(!e9 || !(t7 == null ? void 0 : t7.length)) && t7.every((t8) => I(e9, t8));
}
function I(e9, t7) {
  return !!e9.getField(t7);
}
function L2(e9) {
  for (let t7 = 0; t7 < e9.length; t7++)
    if (e9.charCodeAt(t7) > 255)
      return true;
  return false;
}
function S2(e9, t7, r3) {
  let i7 = null;
  const { codedValues: n13 } = e9;
  return n13 && n13.some((e10) => {
    const n14 = e10.name, o5 = r3 ? n14 : n14.toLowerCase();
    return (r3 ? t7 : t7.toLowerCase()) === o5 && (i7 = e10.code.toString(), true);
  }), i7;
}
function R2(e9) {
  return e9.replace(/\'/g, "''");
}
function q(e9, t7) {
  const r3 = t7 && t7.where;
  return r3 ? `(${e9}) AND (${r3})` : e9;
}
function C({ currentTerm: e9, field: t7, filter: r3, exactMatch: i7, url: n13, type: o5 }) {
  const s11 = t7.type, l6 = t7.name;
  if ("string" === s11 || "date" === s11 || "global-id" === s11) {
    const t8 = d2.test(n13), s12 = t8 && L2(e9) ? "N" : "";
    if (i7 && "search" === o5)
      return q(`${l6} = ${s12}'${e9}'`, r3);
    if (t8) {
      return q(`${l6} LIKE ${s12}${`'${e9}%'`}`, r3);
    }
    return q(`${`LOWER(${l6})`} LIKE ${s12}${`'${e9.toLowerCase()}%'`}`, r3);
  }
  if ("oid" === s11 || "small-integer" === s11 || "integer" === s11 || "single" === s11 || "double" === s11) {
    const t8 = Number(e9);
    return isNaN(t8) ? null : q(`${l6} = ${t8}`, r3);
  }
  return q(`${l6} = ${e9}`, r3);
}
function E2(e9, t7) {
  return e9 ? ` OR (${t7})` : `(${t7})`;
}
function D({ searchTerm: e9, layer: t7, searchFields: r3, filter: i7, exactMatch: n13, query: o5, type: s11 }) {
  const { definitionExpression: l6, url: u4 } = t7;
  let a10 = "";
  return !o5.fullText && e9 && r3 && r3.forEach((r4) => {
    const o6 = t7.getField(r4), l7 = "function" == typeof t7.getFieldDomain && t7.getFieldDomain(r4), c10 = (l7 && "coded-value" === l7.type ? S2(l7, e9, n13) : null) || e9 || null;
    if (null !== c10) {
      const e10 = C({ currentTerm: c10, field: o6, filter: i7, exactMatch: n13, url: u4, type: s11 });
      e10 && (a10 += E2(a10, e10));
    }
  }), l6 && a10 ? `(${l6}) AND (${a10})` : l6 || a10;
}
function M2(e9, t7) {
  let r3 = null;
  const { codedValues: i7 } = e9;
  return i7 && i7.length && i7.some((e10) => e10.code === t7 && (r3 = e10.name, true)), r3;
}
function N(e9, t7) {
  return e9[Object.keys(e9).find((e10) => e10.toLowerCase() === t7.toLowerCase())];
}
function k4(e9, t7, r3) {
  const i7 = e9.sourceLayer, { attributes: n13 } = e9, o5 = "function" == typeof i7.getFieldDomain && i7.getFieldDomain(r3);
  if (t7)
    return s6(t7, n13);
  if (r3 && n13) {
    const e10 = i7.getField(r3), t8 = N(n13, r3);
    return null == t8 ? "" : o5 && "coded-value" === o5.type ? M2(o5, t8) : "date" === (e10 == null ? void 0 : e10.type) ? L(new Date(t8)) : "number" == typeof t8 ? t8.toString() : "string" != typeof t8 ? "" : t8.trim();
  }
  return "";
}
function O(e9, t7, r3, i7) {
  const n13 = e9.sourceLayer, { attributes: o5 } = e9, { objectIdField: s11 } = n13, l6 = o5[s11];
  return { text: k4(e9, t7.suggestionTemplate, i7), key: l6, sourceIndex: r3 };
}
function A2(e9, t7, r3, i7) {
  return e9.features.map((e10) => O(e10, t7, r3, i7));
}
function B(e9, r3, n13, s11, a10, c10, d8) {
  const f6 = e9.clone(), p7 = e9.sourceLayer, m10 = p7 && p7.objectIdField, g5 = m10 && e9.attributes[m10], y6 = k4(e9, n13.searchTemplate, a10), h5 = a4(f6.geometry, r3, c10), F2 = "number" == typeof d8 ? p(y(h5), r3, d8) : h5, x3 = e9.clone();
  return r(F2) && (x3.geometry = v.fromExtent(F2)), { extent: F2, target: x3, feature: f6, key: g5, name: y6, sourceIndex: s11 };
}
function U3(e9, t7, r3, i7, n13, o5, s11) {
  return e9.features.map((e10) => B(e10, t7, r3, i7, n13, o5, s11));
}

// node_modules/@arcgis/core/widgets/Search/LayerSearchSource.js
var o3;
var h3 = o3 = class extends i3 {
  constructor(e9) {
    super(e9), this.displayField = null, this.exactMatch = null, this.orderByFields = null, this.searchFields = null, this.searchTemplate = null, this.suggestionTemplate = null, this.getResults = (e10, t7) => m6({ source: this, ...e10 }, t7), this.getSuggestions = (e10, t7) => g2({ source: this, ...e10 }, t7);
  }
  set layer(e9) {
    this._set("layer", e9), e9 && e9.load().catch(() => {
    });
  }
  get name() {
    var _a;
    return (_a = this._getLayerTitle()) != null ? _a : "";
  }
  set name(e9) {
    this._overrideIfSome("name", e9);
  }
  clone() {
    return new o3({ autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? y(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, displayField: this.displayField, exactMatch: this.exactMatch, layer: this.layer, searchFields: this.searchFields ? y(this.searchFields) : null, suggestionTemplate: this.suggestionTemplate, zoomScale: this.zoomScale });
  }
  _getFirstStringField() {
    var _a, _b;
    return (_b = (_a = this.layer.fieldsIndex.fields.find((e9) => "string" === e9.type)) == null ? void 0 : _a.name) != null ? _b : "";
  }
  _getDisplayField() {
    return this.displayField || this.layer.displayField || this._getFirstStringField();
  }
  _getSearchFieldsString() {
    const { layer: e9, searchFields: t7 } = this;
    if (!e9.loaded)
      return "";
    return `: ${(t7 || [this._getDisplayField()]).map((t8) => {
      const s11 = e9.getField(t8);
      return s11 && s11.alias || t8;
    }).join(", ")}`;
  }
  _getLayerTitle() {
    const { layer: e9 } = this;
    if (!e9)
      return;
    const { title: t7 } = e9;
    return t7 ? `${t7}${this._getSearchFieldsString()}` : void 0;
  }
};
e2([y2({ json: { read: { source: "field.name" }, write: { target: "field.name" } } })], h3.prototype, "displayField", void 0), e2([y2({ json: { read: { source: "field.exactMatch" }, write: { target: "field.exactMatch" } } })], h3.prototype, "exactMatch", void 0), e2([y2({ value: null })], h3.prototype, "layer", null), e2([y2()], h3.prototype, "name", null), e2([y2({ type: [String], json: { write: true } })], h3.prototype, "orderByFields", void 0), e2([y2()], h3.prototype, "searchFields", void 0), e2([y2()], h3.prototype, "searchTemplate", void 0), e2([y2()], h3.prototype, "suggestionTemplate", void 0), h3 = o3 = e2([n("esri.widgets.Search.LayerSearchSource")], h3);
var n6 = h3;

// node_modules/@arcgis/core/rest/locator/utils.js
function e7(e9) {
  return e9 && "number" == typeof e9.x && "number" == typeof e9.y;
}
function n7(e9) {
  return e9 && "number" == typeof e9.xmin && "number" == typeof e9.ymin && "number" == typeof e9.xmax && "number" == typeof e9.ymax;
}

// node_modules/@arcgis/core/rest/support/AddressCandidate.js
var i4 = class extends l {
  constructor(t7) {
    super(t7), this.address = null, this.attributes = null, this.extent = null, this.location = null, this.score = null;
  }
};
e2([y2({ type: String, json: { write: true } })], i4.prototype, "address", void 0), e2([y2({ type: Object, json: { write: true } })], i4.prototype, "attributes", void 0), e2([y2({ type: w2, json: { write: true } })], i4.prototype, "extent", void 0), e2([y2({ type: w, json: { write: true } })], i4.prototype, "location", void 0), e2([y2({ type: Number, json: { write: true } })], i4.prototype, "score", void 0), i4 = e2([n("esri.rest.support.AddressCandidate")], i4);
var c3 = i4;

// node_modules/@arcgis/core/rest/support/AddressToLocationsParameters.js
var a5 = class extends l {
  constructor(t7) {
    super(t7), this.address = null, this.apiKey = null, this.categories = null, this.countryCode = null, this.forStorage = null, this.location = null, this.locationType = null, this.magicKey = null, this.maxLocations = null, this.outFields = null, this.outSpatialReference = null, this.searchExtent = null;
  }
};
e2([y2({ type: Object, json: { write: true } })], a5.prototype, "address", void 0), e2([y2(t4)], a5.prototype, "apiKey", void 0), e2([y2({ type: [String], json: { read: { source: "category", reader: (t7) => t7 ? t7.split(",") : null }, write: { target: "category", writer: (t7, o5) => {
  o5.category = t7 ? t7.join(",") : null;
} } } })], a5.prototype, "categories", void 0), e2([y2({ type: String, json: { write: true } })], a5.prototype, "countryCode", void 0), e2([y2({ type: Boolean, json: { write: true } })], a5.prototype, "forStorage", void 0), e2([y2({ type: w, json: { write: { writer: (t7, o5) => {
  o5.location = t7 ? t7.clone().normalize() : null;
} } } })], a5.prototype, "location", void 0), e2([y2({ type: String, json: { write: true } })], a5.prototype, "locationType", void 0), e2([y2({ type: String, json: { write: true } })], a5.prototype, "magicKey", void 0), e2([y2({ type: Number, json: { write: true } })], a5.prototype, "maxLocations", void 0), e2([y2({ type: [String], json: { write: { writer: (t7, o5) => {
  o5.outFields = t7 ? t7.join(",") : null;
} } } })], a5.prototype, "outFields", void 0), e2([y2({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a5.prototype, "outSpatialReference", void 0), e2([y2({ type: w2, json: { write: { writer: (t7, o5) => {
  const e9 = t7 ? t7.shiftCentralMeridian() : null;
  o5.searchExtent = e9;
} } } })], a5.prototype, "searchExtent", void 0), a5 = e2([n("esri.rest.support.AddressToLocationsParameters")], a5), a5.from = b(a5);
var c4 = a5;

// node_modules/@arcgis/core/rest/locator/addressToLocations.js
async function d3(o5, n13, a10) {
  n13 = c4.from(n13);
  const d8 = f(o5), { address: p7, ...m10 } = n13.toJSON(), u4 = { ...p7, ...m10, f: "json" }, c10 = s8({ ...d8.query, ...u4 }), j7 = i2(c10, a10), l6 = `${d8.path}/findAddressCandidates`;
  return U2(l6, j7).then(f3);
}
function f3({ data: r3 }) {
  if (!r3)
    return [];
  const { candidates: t7, spatialReference: e9 } = r3;
  return t7 ? t7.map((r4) => {
    if (!r4)
      return;
    const { extent: t8, location: s11 } = r4, i7 = !t8 || n7(t8);
    return e7(s11) && i7 ? (t8 && (t8.spatialReference = e9), s11.spatialReference = e9, c3.fromJSON(r4)) : void 0;
  }) : [];
}

// node_modules/@arcgis/core/rest/support/LocationToAddressParameters.js
var a6 = class extends l {
  constructor(o5) {
    super(o5), this.apiKey = null, this.location = null, this.locationType = null, this.outSpatialReference = null;
  }
};
e2([y2(t4)], a6.prototype, "apiKey", void 0), e2([y2({ type: w, json: { write: { writer: (o5, r3) => {
  const t7 = o5 ? o5.clone().normalize() : null, e9 = void 0 !== t7;
  r3.location = e9 ? t7 : null;
} } } })], a6.prototype, "location", void 0), e2([y2({ type: String, json: { write: true } })], a6.prototype, "locationType", void 0), e2([y2({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a6.prototype, "outSpatialReference", void 0), a6 = e2([n("esri.rest.support.LocationToAddressParameters")], a6), a6.from = b(a6);
var n8 = a6;

// node_modules/@arcgis/core/rest/locator/locationToAddress.js
async function n9(e9, n13, i7) {
  n13 = n8.from(n13);
  const c10 = f(e9), m10 = { ...n13.toJSON(), f: "json" }, u4 = s8({ ...c10.query, ...m10 }), f6 = i2(u4, i7), p7 = `${c10.path}/reverseGeocode`;
  return U2(p7, f6).then(d4);
}
function d4({ data: r3 }) {
  if (!r3)
    return;
  const { address: o5, location: t7 } = r3, s11 = o5 && o5.Match_addr || "";
  return c3.fromJSON({ address: s11, attributes: o5 || {}, location: t7, score: 100 });
}

// node_modules/@arcgis/core/rest/support/SuggestionCandidate.js
var e8 = class extends l {
  constructor(o5) {
    super(o5), this.isCollection = null, this.magicKey = null, this.text = null;
  }
};
e2([y2({ type: Boolean, json: { write: true } })], e8.prototype, "isCollection", void 0), e2([y2({ type: String, json: { write: true } })], e8.prototype, "magicKey", void 0), e2([y2({ type: String, json: { write: true } })], e8.prototype, "text", void 0), e8 = e2([n("esri.rest.support.SuggestionCandidate")], e8);
var p3 = e8;

// node_modules/@arcgis/core/rest/support/SuggestLocationsParameters.js
var c5 = class extends l {
  constructor(t7) {
    super(t7), this.apiKey = null, this.categories = null, this.countryCode = null, this.location = null, this.maxSuggestions = null, this.outSpatialReference = null, this.searchExtent = null, this.text = null;
  }
};
e2([y2(t4)], c5.prototype, "apiKey", void 0), e2([y2({ type: [String], json: { read: { source: "category", reader: (t7) => t7 ? t7.split(",") : null }, write: { target: "category", writer: (t7, o5) => {
  o5.category = t7 ? t7.join(",") : null;
} } } })], c5.prototype, "categories", void 0), e2([y2({ type: String, json: { write: true } })], c5.prototype, "countryCode", void 0), e2([y2({ type: w, json: { write: { writer: (t7, o5) => {
  o5.location = t7 ? t7.clone().normalize() : null;
} } } })], c5.prototype, "location", void 0), e2([y2({ type: Number, json: { write: true } })], c5.prototype, "maxSuggestions", void 0), e2([y2({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], c5.prototype, "outSpatialReference", void 0), e2([y2({ type: w2, json: { write: { writer: (t7, o5) => {
  const e9 = t7 ? t7.shiftCentralMeridian() : null;
  o5.searchExtent = JSON.stringify(e9);
} } } })], c5.prototype, "searchExtent", void 0), e2([y2({ type: String, json: { write: true } })], c5.prototype, "text", void 0), c5 = e2([n("esri.rest.support.SuggestLocationsParameters")], c5), c5.from = b(c5);
var l3 = c5;

// node_modules/@arcgis/core/rest/locator/suggestLocations.js
async function u2(n13, u4, m10) {
  const p7 = f(n13), a10 = { ...(u4 = l3.from(u4)).toJSON(), f: "json" }, f6 = s8({ ...p7.query, ...a10 }), g5 = i2(f6, m10), c10 = `${p7.path}/suggest`;
  return U2(c10, g5).then(i5);
}
function i5(t7) {
  const { data: o5 } = t7;
  if (!o5)
    return [];
  const { suggestions: r3 } = o5;
  return r3 ? r3.map((t8) => new p3(t8)) : [];
}

// node_modules/@arcgis/core/widgets/Search/support/locatorUtils.js
var f4 = "Single Line Input";
var d5 = 3e5;
function g3(e9, o5) {
  return e9.location ? h4(e9, o5) : I2(e9, o5);
}
function p4(e9, o5) {
  if (o5.localSearchDisabled)
    return null;
  const t7 = e9 == null ? void 0 : e9.scale;
  return "number" == typeof t7 && t7 <= d5 ? e9.get("extent.center") : null;
}
function y4(e9, t7) {
  const { source: r3, spatialReference: s11, view: n13, suggestTerm: c10, maxSuggestions: a10, sourceIndex: l6 } = e9, m10 = new l3(), { apiKey: f6, url: d8 } = r3, g5 = j5(r3, n13), y6 = t7 && t7.signal;
  if (!d8)
    return Promise.resolve(null);
  f6 && (m10.apiKey = f6), r3.categories && (m10.categories = r3.categories), s11 && (m10.outSpatialReference = s11);
  const x3 = p4(n13, r3);
  x3 && (m10.location = x3);
  if (!c10.trim())
    return Promise.resolve(null);
  const { prefix: v6 = "", suffix: S5 = "" } = r3, w6 = `${v6}${c10}${S5}`;
  return m10.text = w6, g5 && (m10.searchExtent = e(g5)), m10.maxSuggestions = a10, r3.countryCode && (m10.countryCode = r3.countryCode), u2(d8, m10, { signal: y6 }).then((e10) => b3(e10, l6));
}
function x2(e9) {
  return !!e9 && /(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function v5(e9) {
  return !!e9 && /(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function S3(e9) {
  return !!e9 && /(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
var w4 = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";
function h4(e9, o5) {
  const { source: t7, spatialReference: r3, location: s11, sourceIndex: i7, view: c10 } = e9, { apiKey: u4, url: l6, zoomScale: m10, defaultZoomScale: f6 } = t7, d8 = c10 && c10.scale, g5 = o5 && o5.signal, p7 = new n8();
  return p7.location = s11, u4 && (p7.apiKey = u4), r3 && (p7.outSpatialReference = r3), n9(l6, p7, { signal: g5 }).then((e10) => L3([e10], { sourceIndex: i7, scale: d8, view: c10, zoomScale: m10, defaultZoomScale: f6 })).catch(() => []);
}
function j5(e9, o5) {
  const { filter: t7, withinViewEnabled: r3 } = e9, s11 = o5 && o5.scale, n13 = o5 && o5.extent, i7 = t7 && t7.geometry;
  return a4(i7, o5, s11) || (r3 && n13 ? n13 : void 0);
}
function I2(e9, t7) {
  const { source: r3, suggestResult: n13, spatialReference: i7, view: a10, maxResults: u4, sourceIndex: l6 } = e9, m10 = r3 && r3.zoomScale, d8 = r3 && r3.defaultZoomScale;
  if (!n13.text.trim())
    return Promise.resolve(null);
  const g5 = !n13.key && r3.prefix ? r3.prefix : "", y6 = !n13.key && r3.suffix ? r3.suffix : "", x3 = `${g5}${n13.text}${y6}`, v6 = new c4(), { apiKey: S5, url: w6 } = r3, h5 = a10 && a10.scale, I4 = j5(r3, a10), $5 = t7 && t7.signal;
  if (S5 && (v6.apiKey = S5), !w6)
    return Promise.resolve(null);
  r3.categories && (v6.categories = r3.categories), r3.locationType && (v6.locationType = r3.locationType), i7 && (v6.outSpatialReference = i7);
  const b5 = p4(a10, r3);
  b5 && (v6.location = b5), v6.maxLocations = u4, I4 && (v6.searchExtent = e(I4)), r3.countryCode && (v6.countryCode = r3.countryCode);
  const { key: K3 } = n13, P2 = `${K3}`;
  return K3 && (v6.magicKey = P2), v6.address = {}, v6.address[r3.singleLineFieldName || f4] = x3, r3.outFields && (v6.outFields = r3.outFields), d3(w6, v6, { signal: $5 }).then((e10) => L3(e10, { key: P2, scale: h5, sourceIndex: l6, view: a10, zoomScale: m10, defaultZoomScale: d8 }));
}
function $3(e9, o5) {
  return { text: e9.text, key: e9.magicKey, sourceIndex: o5 };
}
function b3(e9, o5) {
  return e9.map((e10) => $3(e10, o5));
}
function K(o5, s11) {
  const { key: n13, scale: i7, sourceIndex: c10, view: a10, zoomScale: u4, defaultZoomScale: f6 } = s11, { attributes: d8, extent: g5, location: p7, address: y6 } = o5, x3 = new g({ geometry: p7, attributes: d8 }), v6 = g5 || p7, S5 = a4(v6, a10, i7), w6 = "number" == typeof u4 ? p(S5, a10, u4) : "number" == typeof f6 && "point" === v6.type ? p(S5, a10, f6) : S5, h5 = p7 ? `${p7.x},${p7.y}` : "", j7 = y6 || h5, I4 = x3.clone();
  return r(w6) && (I4.geometry = v.fromExtent(w6)), { extent: w6, feature: x3, target: I4, key: n13, name: j7, sourceIndex: c10 };
}
function L3(e9, o5) {
  return e9.filter(Boolean).map((e10) => K(e10, o5));
}

// node_modules/@arcgis/core/widgets/Search/LocatorSearchSource.js
var a7;
var p5 = "esri.widgets.Search.LocatorSearchSource";
var n10 = a7 = class extends i3 {
  constructor(e9) {
    super(e9), this.apiKey = null, this.categories = null, this.countryCode = null, this.defaultZoomScale = null, this.localSearchDisabled = false, this.locationType = null, this.name = "", this.placeholder = "", this.searchTemplate = "", this.singleLineFieldName = null, this.suggestionsEnabled = null, this.url = null, this.zoomScale = null, this.getResults = (e10, t7) => g3({ source: this, ...e10 }, t7), this.getSuggestions = (e10, t7) => y4({ source: this, ...e10 }, t7);
  }
  clone() {
    return new a7({ apiKey: this.apiKey, autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? y(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, categories: this.categories ? y(this.categories) : null, countryCode: this.countryCode, locationType: this.locationType, searchTemplate: this.searchTemplate, singleLineFieldName: this.singleLineFieldName, zoomScale: this.zoomScale });
  }
};
e2([y2()], n10.prototype, "apiKey", void 0), e2([y2()], n10.prototype, "categories", void 0), e2([y2()], n10.prototype, "countryCode", void 0), e2([y2({ json: { write: true } })], n10.prototype, "defaultZoomScale", void 0), e2([y2()], n10.prototype, "localSearchDisabled", void 0), e2([y2()], n10.prototype, "locationType", void 0), e2([y2({ json: { write: true } })], n10.prototype, "name", void 0), e2([y2({ json: { write: true } })], n10.prototype, "placeholder", void 0), e2([y2()], n10.prototype, "searchTemplate", void 0), e2([y2({ json: { write: true } })], n10.prototype, "singleLineFieldName", void 0), e2([y2({ json: { read: { source: "suggest" }, write: { target: "suggest" } } })], n10.prototype, "suggestionsEnabled", void 0), e2([y2({ json: { write: true } })], n10.prototype, "url", void 0), e2([y2({ json: { write: true } })], n10.prototype, "zoomScale", void 0), n10 = a7 = e2([n(p5)], n10);
var c6 = n10;

// node_modules/@arcgis/core/rest/geometryService/units.js
var _ = new s4({ MGRS: "mgrs", USNG: "usng", UTM: "utm", GeoRef: "geo-ref", GARS: "gars", DMS: "dms", DDM: "ddm", DD: "dd" });

// node_modules/@arcgis/core/rest/operations/generalize.js
var i6 = new s4({ 109006: "centimeters", 9102: "decimal-degrees", 109005: "decimeters", 9002: "feet", 109009: "inches", 9036: "kilometers", 9001: "meters", 9035: "miles", 109007: "millimeters", 109012: "nautical-miles", 9096: "yards" });

// node_modules/@arcgis/core/rest/support/GeneralizeParameters.js
var m7 = class extends l {
  constructor(r3) {
    super(r3), this.deviationUnit = null, this.geometries = null, this.maxDeviation = null;
  }
};
e2([y2({ type: String, json: { write: true } })], m7.prototype, "deviationUnit", void 0), e2([y2({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v2(r4)).filter(r) : null }, write: { writer: (r3, o5) => {
  var _a;
  o5.geometries = (_a = r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) != null ? _a : null;
} } } })], m7.prototype, "geometries", void 0), e2([y2({ type: Number, json: { write: true } })], m7.prototype, "maxDeviation", void 0), m7 = e2([n("esri.rest.support.GeneralizeParameters")], m7), m7.from = b(m7);

// node_modules/@arcgis/core/rest/operations/lengths.js
var n11 = new s4({ preserveShape: "preserve-shape" });

// node_modules/@arcgis/core/rest/support/LengthsParameters.js
var l4 = class extends l {
  constructor(o5) {
    super(o5), this.calculationType = null, this.geodesic = null, this.lengthUnit = null, this.polylines = null;
  }
};
e2([y2({ type: String, json: { write: true } })], l4.prototype, "calculationType", void 0), e2([y2({ type: Boolean, json: { write: true } })], l4.prototype, "geodesic", void 0), e2([y2({ json: { write: true } })], l4.prototype, "lengthUnit", void 0), e2([y2({ type: [m2], json: { read: { reader: (o5) => o5 ? o5.map((o6) => v2(o6)) : null }, write: { writer: (o5, r3) => {
  r3.polylines = o5.map((o6) => o6.toJSON());
} } } })], l4.prototype, "polylines", void 0), l4 = e2([n("esri.rest.support.LengthsParameters")], l4), l4.from = b(l4);

// node_modules/@arcgis/core/rest/operations/offset.js
var o4 = new s4({ esriGeometryOffsetBevelled: "bevelled", esriGeometryOffsetMitered: "mitered", esriGeometryOffsetRounded: "rounded" });
var s10 = new s4({ 9001: "meters", 9002: "feet", 9036: "kilometers", 9093: "miles", 109012: "nautical-miles", 109001: "yards" });

// node_modules/@arcgis/core/rest/support/OffsetParameters.js
var m8 = class extends l {
  constructor(o5) {
    super(o5), this.bevelRatio = null, this.geometries = null, this.offsetDistance = null, this.offsetHow = null, this.offsetUnit = null;
  }
};
e2([y2({ type: Number, json: { write: true } })], m8.prototype, "bevelRatio", void 0), e2([y2({ json: { read: { reader: (o5) => o5 ? o5.map((o6) => v2(o6)).filter(r) : null }, write: { writer: (o5, t7) => {
  var _a;
  t7.geometries = (_a = o5 == null ? void 0 : o5.map((o6) => o6.toJSON())) != null ? _a : null;
} } } })], m8.prototype, "geometries", void 0), e2([y2({ type: Number, json: { write: true } })], m8.prototype, "offsetDistance", void 0), e2([y2({ type: String, json: { write: true } })], m8.prototype, "offsetHow", void 0), e2([y2({ type: String, json: { write: true } })], m8.prototype, "offsetUnit", void 0), m8 = e2([n("esri.rest.support.OffsetParameters")], m8), m8.from = b(m8);

// node_modules/@arcgis/core/rest/operations/relation.js
var t5 = new s4({ esriGeometryRelationCross: "cross", esriGeometryRelationDisjoint: "disjoint", esriGeometryRelationIn: "in", esriGeometryRelationInteriorIntersection: "interior-intersection", esriGeometryRelationIntersection: "intersection", esriGeometryRelationLineCoincidence: "line-coincidence", esriGeometryRelationLineTouch: "line-touch", esriGeometryRelationOverlap: "overlap", esriGeometryRelationPointTouch: "point-touch", esriGeometryRelationTouch: "touch", esriGeometryRelationWithin: "within", esriGeometryRelationRelation: "relation" });

// node_modules/@arcgis/core/rest/support/RelationParameters.js
var a8 = class extends l {
  constructor(r3) {
    super(r3), this.geometries1 = null, this.geometries2 = null, this.relation = null, this.relationParameter = null;
  }
};
e2([y2({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v2(r4)).filter(r) : null }, write: { writer: (r3, e9) => {
  var _a;
  e9.geometries1 = (_a = r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) != null ? _a : null;
} } } })], a8.prototype, "geometries1", void 0), e2([y2({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v2(r4)).filter(r) : null }, write: { writer: (r3, e9) => {
  var _a;
  e9.geometries2 = (_a = r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) != null ? _a : null;
} } } })], a8.prototype, "geometries2", void 0), e2([y2({ type: String, json: { write: true } })], a8.prototype, "relation", void 0), e2([y2({ type: String, json: { write: true } })], a8.prototype, "relationParameter", void 0), a8 = e2([n("esri.rest.support.RelationParameters")], a8), a8.from = b(a8);

// node_modules/@arcgis/core/rest/operations/trimExtend.js
var t6 = new s4({ 0: "default-curve-extension", 1: "relocate-ends", 2: "keep-end-attributes", 4: "no-end-attributes", 8: "no-extend-at-from", 16: "no-extend-at-to" });

// node_modules/@arcgis/core/rest/support/TrimExtendParameters.js
var m9 = class extends l {
  constructor(r3) {
    super(r3), this.extendHow = "default-curve-extension", this.polylines = null, this.trimExtendTo = null;
  }
};
e2([y2({ type: String, json: { write: true } })], m9.prototype, "extendHow", void 0), e2([y2({ type: [m2], json: { read: { reader: (r3) => r3 ? r3.map((r4) => v2(r4)) : null }, write: { writer: (r3, o5) => {
  o5.polylines = r3.map((r4) => r4.toJSON());
} } } })], m9.prototype, "polylines", void 0), e2([y2({ json: { read: { reader: (r3) => r3 ? v2(r3) : null }, write: { writer: (r3, o5) => {
  o5.trimExtendTo = r3.toJSON();
} } } })], m9.prototype, "trimExtendTo", void 0), m9 = e2([n("esri.rest.support.TrimExtendParameters")], m9), m9.from = b(m9);

// node_modules/@arcgis/core/widgets/support/geolocationUtils.js
var a9 = s2.getLogger("esri.widgets.support.geolocationUtils");
var c8 = { maximumAge: 0, timeout: 15e3, enableHighAccuracy: true };
function u3() {
  const e9 = has("esri-geolocation");
  return e9 || a9.warn("geolocation-unsupported", "Geolocation unsupported."), e9;
}
function p6() {
  const e9 = window.isSecureContext;
  return e9 || a9.warn("insecure-context", "Geolocation requires a secure origin."), e9;
}
function l5() {
  return u3() && p6();
}
function g4(e9) {
  const r3 = 15e3;
  return e9 || (e9 = c8), new Promise((o5, i7) => {
    setTimeout(() => i7(new s3("geolocation:timeout", "getting the current geolocation position timed out")), r3), navigator.geolocation.getCurrentPosition(o5, i7, e9);
  });
}
function j6(e9, t7) {
  const { position: r3, view: o5 } = e9;
  return y5(d6(f5(r3)), o5, t7);
}
function f5(e9) {
  const t7 = e9 && e9.coords || {}, r3 = { accuracy: t7.accuracy, altitude: t7.altitude, altitudeAccuracy: t7.altitudeAccuracy, heading: t7.heading, latitude: t7.latitude, longitude: t7.longitude, speed: t7.speed };
  return e9 ? { coords: r3, timestamp: e9.timestamp } : e9;
}
function d6(e9) {
  const t7 = e9 && e9.coords;
  return t7 ? new w({ longitude: t7.longitude, latitude: t7.latitude, z: t7.altitude || null, spatialReference: { wkid: 4326 } }) : null;
}
function y5(e9, r3, o5) {
  if (!r3)
    return Promise.resolve(e9);
  const s11 = r3.spatialReference;
  return s11.isWGS84 ? Promise.resolve(e9) : s11.isWebMercator ? Promise.resolve(R(e9)) : P(o5).then((r4) => {
    if (!r4)
      throw new s3("geometry-service:missing-url", "Geometry service URL is missing");
    const i7 = new a3({ geometries: [e9], outSpatialReference: s11 });
    return n5(r4, i7, o5).then((e10) => e10[0]);
  });
}
function P(t7) {
  if (s.geometryServiceUrl)
    return Promise.resolve(s.geometryServiceUrl);
  const r3 = j3.getDefault();
  return r3.load(t7).catch(() => {
  }).then(() => r3.get("helperServices.geometry.url"));
}

// node_modules/@arcgis/core/widgets/Search/SearchViewModel.js
function H(e9, t7) {
  return e9.hasOwnProperty(t7) && null != e9[t7] && "" !== e9[t7];
}
var Q = () => u("esri/widgets/Search/t9n/Search");
var Z = "esri.widgets.Search.SearchViewModel";
var q2 = s2.getLogger(Z);
var z = "highlight";
var K2 = j2.ofType({ key: (e9) => e9.layer ? "layer" : "locator", base: i3, typeMap: { layer: n6, locator: c6 } });
var W = k.WGS84;
var X = "esri/images/search/search-symbol-32.png";
var Y = /<(?:.|\s)*?>/g;
var $4 = -1;
var ee = class extends e6(n2.EventedMixin(m)) {
  constructor(e9) {
    super(e9), this._handles = new t2(), this._gotoController = null, this._searching = null, this._createdFeatureLayers = [], this.autoNavigate = true, this.autoSelect = true, this.defaultPopupTemplate = null, this.defaultSources = new K2(), this.defaultSymbols = { point: new n4({ url: a2(X), size: 24, width: 24, height: 24 }), polyline: new m3({ color: [130, 130, 130, 1], width: 2 }), polygon: new S({ color: [235, 235, 235, 0.4], outline: { color: [130, 130, 130, 1], width: 2 } }) }, this.includeDefaultSources = true, this.maxInputLength = 128, this.maxResults = 6, this.maxSuggestions = 6, this.messages = null, this.minSuggestCharacters = 3, this.popupEnabled = true, this.popupTemplate = null, this.portal = j3.getDefault(), this.resultCount = null, this.resultGraphicEnabled = true, this.resultGraphic = null, this.results = null, this.selectedSuggestion = null, this.searchAllEnabled = true, this.selectedResult = null, this.sources = new K2(), this.suggestionDelay = 350, this.suggestionCount = null, this.suggestions = null, this.suggestionsEnabled = true, this.view = null;
  }
  initialize() {
    const e9 = async () => {
      const e10 = await Q();
      this.messages = e10, this.defaultPopupTemplate = new k3({ title: e10.searchResult, content: "{Match_addr}" });
    };
    e9(), this._handles.add([l2(() => [this.includeDefaultSources, this.view, this.portal], () => this._update(), h), s5(e9)]);
  }
  destroy() {
    this._destroyFeatureLayers(), this._abortGoTo(), this.clearGraphics(), this._handles.destroy(), this._handles = null;
  }
  get activeSource() {
    var _a;
    return (_a = this.allSources.at(this.activeSourceIndex)) != null ? _a : null;
  }
  get activeSourceIndex() {
    return 1 === this.allSources.length || !this.searchAllEnabled ? 0 : $4;
  }
  set activeSourceIndex(e9) {
    this._overrideIfSome("activeSourceIndex", e9);
  }
  get allPlaceholder() {
    var _a;
    return (_a = this.messages) == null ? void 0 : _a.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this._overrideIfSome("allPlaceholder", e9);
  }
  get allSources() {
    const { sources: e9, defaultSources: t7, includeDefaultSources: r3 } = this, s11 = "function" == typeof r3 ? r3.call(null, { sources: e9, defaultSources: t7 }) : r3 ? t7.concat(e9) : e9, o5 = this._get("allSources") || new K2();
    return o5.removeAll(), o5.addMany(s11.filter(Boolean)), o5;
  }
  get locationEnabled() {
    return this._get("locationEnabled") || l5();
  }
  set locationEnabled(e9) {
    if (void 0 === e9)
      return void this._clearOverride("locationEnabled");
    const t7 = l5();
    if (e9 && !t7) {
      const e10 = new s3("locationEnabled:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      q2.error(e10);
    }
    this._override("locationEnabled", !!e9 && t7);
  }
  get placeholder() {
    const { allSources: e9, activeSourceIndex: t7, allPlaceholder: r3 } = this;
    if (t7 === $4)
      return r3;
    const s11 = e9.at(t7);
    return s11 ? s11.placeholder : "";
  }
  set searchTerm(e9) {
    this._set("searchTerm", e9 || ""), this.clearGraphics(), this.selectedSuggestion && this.selectedSuggestion.text !== e9 && this._set("selectedSuggestion", null), "" === e9 && this._clear();
  }
  get searchTerm() {
    return this._get("searchTerm") || "";
  }
  get state() {
    return this._searching ? "searching" : this.updating ? "loading" : 0 === this.allSources.length ? "disabled" : "ready";
  }
  get updating() {
    return null != this._updatingPromise;
  }
  clear() {
    this.searchTerm = "";
  }
  clearGraphics() {
    this._removeHighlight(), this._closePopup(), this.view && this.view.graphics.remove(this.resultGraphic), this._set("resultGraphic", null);
  }
  search(e9, t7) {
    this.emit("search-start"), this.clearGraphics();
    const r3 = this._createSuggestionForSearch(e9), s11 = this.when().then(() => this._getResultsFromSources(r3, t7).then((e10) => {
      var _a;
      if ((_a = e(t7 == null ? void 0 : t7.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s12 = { activeSourceIndex: this.activeSourceIndex, searchTerm: r3.text, numResults: 0, numErrors: 0, errors: [], results: [] };
      this._formatResponse(s12, e10, r3);
      const o5 = this._getFirstResult(s12.results), i7 = (r3.location && o5 ? o5.name : r3.text).replace(Y, "");
      return this._set("searchTerm", i7), (r3.key && "number" == typeof r3.sourceIndex || r3.location) && this._set("selectedSuggestion", r3), this._set("results", s12.results), this._set("resultCount", s12.results.reduce((e11, t8) => e11 + t8.results.length, 0)), this.emit("search-complete", s12), this._selectFirstResult(o5).then(() => s12);
    })).then((e10) => (this._clearSearching(), e10), (e10) => {
      throw this._clearSearching(), e10;
    });
    return this._searching = s11, s11;
  }
  searchNearby(e9) {
    if (!this.locationEnabled) {
      const e10 = new s3("searchNearby:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      return q2.error(e10), Promise.reject(e10);
    }
    const t7 = g4().then((t8) => j6({ position: t8, view: this.view }, e9)).then((t8) => this.search(t8, e9));
    return this._searching = t7, t7.catch(() => {
    }).then(() => this._clearSearching()), t7;
  }
  select(e9) {
    if (this.clearGraphics(), !e9) {
      const t8 = new s3("select:missing-parameter", "Cannot select without a searchResult.", { searchResult: e9 });
      return q2.error(t8), Promise.reject(t8);
    }
    const { view: t7 } = this, r3 = H(e9, "sourceIndex") ? e9.sourceIndex : this._getSourceIndexOfResult(e9), o5 = this.allSources.at(r3);
    if (!o5) {
      const e10 = new s3("select:missing-source", "Cannot select without a source.", { source: o5 });
      return q2.error(e10), Promise.reject(e10);
    }
    const i7 = o5 instanceof n6 ? this._getLayerSourcePopupTemplate(o5) : o5.popupTemplate, l6 = o5.resultSymbol || this._getDefaultSymbol(e9), n13 = H(o5, "resultGraphicEnabled") ? o5.resultGraphicEnabled : this.resultGraphicEnabled, u4 = H(o5, "autoNavigate") ? o5.autoNavigate : this.autoNavigate, c10 = H(o5, "popupEnabled") ? o5.popupEnabled : this.popupEnabled, h5 = c10 ? i7 || this.popupTemplate || this.defaultPopupTemplate : null, { feature: g5 } = e9;
    if (!g5) {
      const e10 = new s3("select:missing-feature", "Cannot select without a feature.", { feature: g5 });
      return q2.error(e10), Promise.reject(e10);
    }
    const { attributes: m10, geometry: y6, layer: f6, sourceLayer: S5 } = g5, _2 = m5(y6), v6 = { layerViewQuery: this._getLayerView(g5), elevationQuery: t7 && r(_2) ? s9(_2, t7).catch(() => _2) : Promise.resolve(_2) };
    return E(v6).then((i8) => {
      const a10 = i8.layerViewQuery.value, d8 = i8.elevationQuery.value;
      l6 instanceof m4 && (l6.text = e9.name);
      const _3 = t7 && u4 ? e9.target || e9.extent : null;
      return (r(_3) ? this._goToSearchResult(_3) : Promise.resolve()).then(() => {
        var _a;
        const i9 = a10 ? g5 : new g({ geometry: y6, symbol: l6, attributes: m10, layer: f6, sourceLayer: S5, popupTemplate: h5 }), u5 = c10 && ((_a = this.view) == null ? void 0 : _a.popup), p7 = u5 && i9.getEffectivePopupTemplate(u5.defaultPopupTemplateEnabled);
        return p7 && t7.popup.open({ features: [i9], location: d8 }), a10 && e5(a10) && !p7 && this._highlightFeature({ graphic: i9, layerView: a10 }), !a10 && n13 && t7 && t7.graphics.push(i9), this._setResultFloor(e9), this._set("selectedResult", e9), this._set("resultGraphic", i9), this.emit("select-result", { result: e9, source: o5, sourceIndex: r3 }), e9;
      });
    });
  }
  suggest(e9, t7, r3) {
    const s11 = e9 || this.searchTerm;
    return this.emit("suggest-start", { searchTerm: s11 }), this._suggestTimer(t7, r3).then(() => this._suggestImmediate(s11, r3).then((e10) => (this._set("suggestions", e10.results), this._set("suggestionCount", e10.results.reduce((e11, t8) => e11 + t8.results.length, 0)), this.emit("suggest-complete", e10), e10)));
  }
  async when() {
    await j(() => !this.updating);
  }
  async _update() {
    const { portal: e9, view: t7 } = this;
    if (this.includeDefaultSources) {
      const r3 = this._updatingPromise = E([e9 == null ? void 0 : e9.load(), t7 == null ? void 0 : t7.when()]);
      if (this.destroyed)
        return;
      if (await r3, r3 !== this._updatingPromise)
        return;
    }
    await j(() => this.messages), this.destroyed || this._updateDefaultSources(), this._updatingPromise = null;
  }
  _clearSearching() {
    this._searching = null;
  }
  _convertHelperServices() {
    var _a, _b;
    const e9 = (_b = (_a = this.portal) == null ? void 0 : _a.helperServices) == null ? void 0 : _b.geocode;
    if (!e9)
      return [];
    return e9.map((e10) => {
      if (false === e10.placefinding)
        return;
      const t7 = s.apiKey && S3(e10.url) ? { url: w4 } : null, s11 = c6.fromJSON({ ...e10, ...t7 }), o5 = s11.url;
      if (S3(o5) || v5(o5) || x2(o5)) {
        const e11 = s11.outFields || ["Addr_type", "Match_addr", "StAddr", "City"], t8 = s11.placeholder || this.messages.placeholder, r3 = "number" == typeof s11.defaultZoomScale ? s11.defaultZoomScale : 2500;
        s11.set({ singleLineFieldName: "SingleLine", outFields: e11, placeholder: t8, defaultZoomScale: r3 });
      }
      return s11.singleLineFieldName ? s11 : void 0;
    }).filter(Boolean);
  }
  _destroyFeatureLayers() {
    this._createdFeatureLayers.forEach((e9) => e9 == null ? void 0 : e9.destroy()), this._createdFeatureLayers = [];
  }
  _getLayerSources(e9, t7) {
    var _a;
    const r3 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s11 = r3.findLayerById(e10.id);
      if (!s11)
        return;
      const o5 = this._getLayerJSON(e10), i7 = n6.fromJSON(o5);
      return i7.placeholder = t7, this._getLayer(s11, o5).then((e11) => {
        i7.layer = e11;
      }), i7;
    }).filter(Boolean).toArray();
  }
  _getTableSources(e9, t7) {
    var _a;
    const r3 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s11 = r3.findTableById(e10.id);
      if (!s11)
        return;
      const o5 = this._getLayerJSON(e10), i7 = n6.fromJSON(o5);
      return i7.placeholder = t7, this._getLayer(s11, o5).then((e11) => {
        i7.layer = e11;
      }), i7;
    }).filter(Boolean).toArray();
  }
  _convertApplicationProperties() {
    var _a, _b, _c;
    const e9 = (_a = this.view) == null ? void 0 : _a.map, t7 = (_c = (_b = e9 == null ? void 0 : e9.applicationProperties) == null ? void 0 : _b.viewing) == null ? void 0 : _c.search;
    if (!t7)
      return [];
    const { enabled: r3, hintText: s11, layers: o5, tables: i7 } = t7;
    if (!r3)
      return [];
    return [...this._getLayerSources(o5, s11), ...this._getTableSources(i7, s11)];
  }
  async _getSubLayer(e9, t7) {
    if (await e9.load(), !e9.allSublayers)
      throw new Error();
    const r3 = e9.allSublayers.find((e10) => e10.id === t7.subLayer);
    if (!r3)
      throw new Error();
    const s11 = await r3.createFeatureLayer();
    return this._createdFeatureLayers.push(s11), s11;
  }
  async _getBuildingSubLayer(e9, t7) {
    await e9.load();
    const r3 = e9.allSublayers.find((e10) => e10.id === t7.subLayer);
    if ("building-component" !== (r3 == null ? void 0 : r3.type))
      throw new Error();
    if (await r3.load(), null == r3.associatedLayer)
      throw new Error();
    return await r3.associatedLayer.load(), r3;
  }
  _getLayer(e9, t7) {
    return "feature" === e9.type || "scene" === e9.type || "csv" === e9.type || "geojson" === e9.type || "ogc-feature" === e9.type ? Promise.resolve(e9) : "map-image" === e9.type ? this._getSubLayer(e9, t7).catch(() => {
      const t8 = new s3("search:create-featurelayer", "Could not create a FeatureLayer from the MapImageLayer", { layer: e9 });
      return q2.error(t8), null;
    }) : "building-scene" === e9.type ? this._getBuildingSubLayer(e9, t7) : Promise.resolve(null);
  }
  _getLayerJSON(e9) {
    return "function" == typeof e9.toJSON ? e9.toJSON() : e9;
  }
  _updateDefaultSources() {
    const { defaultSources: e9, includeDefaultSources: t7 } = this;
    this._destroyFeatureLayers(), e9.removeAll(), t7 && e9.addMany([...this._convertApplicationProperties(), ...this._convertHelperServices()]);
  }
  _abortGoTo() {
    this._gotoController && this._gotoController.abort(), this._gotoController = null;
  }
  _clear() {
    this._abortGoTo(), this._set("resultCount", null), this._set("results", null), this._set("suggestions", null), this._set("suggestionCount", null), this._set("selectedResult", null), this._set("selectedSuggestion", null), this.emit("search-clear");
  }
  _closePopup() {
    var _a;
    const e9 = (_a = this.view) == null ? void 0 : _a.popup, { resultGraphic: t7 } = this;
    if (!e9 || !t7)
      return;
    const { selectedFeature: r3 } = e9;
    r3 && r3 === t7 && e9.close();
  }
  _suggestTimer(e9, t7) {
    const r3 = null != e9 ? e9 : this.suggestionDelay;
    return U(r3, null, t7 && t7.signal);
  }
  _createLocationForSearch(e9) {
    return e9 instanceof g ? m5(e9.geometry) : e9 instanceof w ? e9 : Array.isArray(e9) && 2 === e9.length ? new w({ longitude: e9[0], latitude: e9[1] }) : null;
  }
  _createSuggestionForSearch(e9) {
    if (e9 && H(e9, "key") && H(e9, "text") && H(e9, "sourceIndex"))
      return e9;
    const t7 = this._createLocationForSearch(e9), r3 = "string" == typeof e9 ? e9 : this.searchTerm, { selectedSuggestion: s11, selectedResult: o5 } = this, i7 = !e9 && s11 && o5, l6 = i7 && s11.key === o5.key && s11.sourceIndex === o5.sourceIndex, a10 = i7 && s11.location;
    return l6 || a10 ? s11 : { location: e(t7), text: t7 ? "" : r3, sourceIndex: null, key: null };
  }
  _getFirstResult(e9) {
    let t7 = null;
    return e9 && e9.some((e10) => {
      const { results: r3 } = e10, s11 = r3[0], o5 = !!s11;
      return o5 && (t7 = s11), o5;
    }), t7;
  }
  _selectFirstResult(e9) {
    return this.autoSelect && e9 ? this.select(e9) : Promise.resolve(null);
  }
  _suggestImmediate(e9, t7) {
    return this.when().then(() => this._getSuggestionsFromSources(e9, t7)).then((r3) => {
      var _a;
      if ((_a = e(t7 == null ? void 0 : t7.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s11 = { activeSourceIndex: this.activeSourceIndex, searchTerm: e9, numResults: 0, numErrors: 0, errors: [], results: [] };
      return this._formatResponse(s11, r3), s11;
    });
  }
  _formatSourceResponse(e9, t7, r3) {
    const s11 = t7 && t7.value || [], o5 = t7 && t7.error, i7 = this.allSources.at(r3);
    if (o5) {
      const t8 = { sourceIndex: r3, source: i7, error: o5 };
      e9.errors.push(t8), q2.error(o5), e9.numErrors++;
    } else {
      const t8 = { sourceIndex: r3, source: i7, results: s11 };
      e9.results.push(t8), e9.numResults += s11.length;
    }
  }
  _formatResponse(e9, t7, r3) {
    if (t7)
      if (e9.activeSourceIndex === $4) {
        const s11 = r3 && H(r3, "sourceIndex") && -1 !== r3.sourceIndex ? r3.sourceIndex : void 0;
        t7.forEach((t8, r4) => {
          const o5 = void 0 !== s11 ? s11 : r4;
          this._formatSourceResponse(e9, t8, o5);
        });
      } else
        this._formatSourceResponse(e9, t7[0], e9.activeSourceIndex);
  }
  _getResultsFromSources(e9, t7) {
    const { allSources: r3 } = this, s11 = !e9.location && H(e9, "sourceIndex") ? e9.sourceIndex : this.activeSourceIndex, o5 = [];
    if (!r3.length) {
      const e10 = new s3("search:no-sources-defined", "At least one source is required.", { allSources: r3 });
      return q2.error(e10), Promise.reject(e10);
    }
    return s11 === $4 ? r3.forEach((r4, s12) => {
      o5.push(this._getResultsFromSource(e9, s12, t7));
    }) : o5.push(this._getResultsFromSource(e9, s11, t7)), E(o5);
  }
  _getSuggestionsFromSources(e9, t7) {
    const { allSources: r3, activeSourceIndex: s11 } = this, o5 = [];
    if (!r3.length) {
      const e10 = new s3("suggest:no-sources-defined", "At least one source is required.", { allSources: r3 });
      return q2.error(e10), Promise.reject(e10);
    }
    return s11 === $4 ? r3.forEach((r4, s12) => {
      o5.push(this._getSuggestionsFromSource(e9, s12, t7));
    }) : o5.push(this._getSuggestionsFromSource(e9, s11, t7)), E(o5);
  }
  _getResultsFromSource(e9, t7, r3) {
    var _a;
    const s11 = this.allSources.at(t7), { location: o5 = null } = e9, i7 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || W, l6 = H(s11, "maxResults") ? s11.maxResults : this.maxResults, a10 = !!(s11 instanceof n6 && H(s11, "exactMatch")) && s11.exactMatch, { view: n13 } = this;
    return s11.getResults({ view: n13, sourceIndex: t7, location: o5, suggestResult: e9, spatialReference: i7, exactMatch: a10, maxResults: l6 }, r3);
  }
  _getSuggestionsFromSource(e9, t7, r3) {
    var _a;
    const s11 = this.allSources.at(t7), o5 = H(s11, "suggestionsEnabled") ? s11.suggestionsEnabled : this.suggestionsEnabled, i7 = e9.length, l6 = H(s11, "minSuggestCharacters") ? s11.minSuggestCharacters : this.minSuggestCharacters;
    if (o5 && e9.trim() && i7 >= l6) {
      const o6 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || W, i8 = H(s11, "maxSuggestions") ? s11.maxSuggestions : this.maxSuggestions, { view: l7 } = this, a10 = !!(s11 instanceof n6 && H(s11, "exactMatch")) && s11.exactMatch;
      return s11.getSuggestions({ view: l7, sourceIndex: t7, suggestTerm: e9, spatialReference: o6, maxSuggestions: i8, exactMatch: a10 }, r3);
    }
    return Promise.resolve(null);
  }
  _getLayerSourcePopupTemplate(e9) {
    const { layer: t7 } = e9;
    if (t7)
      return H(e9, "popupTemplate") ? e9.popupTemplate : t7.popupTemplate;
  }
  _getSourceIndexOfResult(e9) {
    const t7 = this.results;
    let r3 = null;
    return t7.some((t8) => t8.results.some((s11) => s11 === e9 && (r3 = t8.sourceIndex, true))), r3;
  }
  async _goToSearchResult(e9) {
    const t7 = !!e9;
    this._abortGoTo();
    const r3 = new AbortController();
    this._gotoController = r3;
    const s11 = { target: { target: e9 }, options: { animate: t7, signal: r3.signal } };
    await this.callGoTo(s11), this._gotoController = null;
  }
  _getDefaultSymbol(e9) {
    var _a;
    const { defaultSymbols: t7 } = this, r3 = (_a = e9.feature) == null ? void 0 : _a.geometry;
    if (t(r3))
      return null;
    switch (r3.type) {
      case "point":
      case "multipoint":
        return t7.point;
      case "polyline":
        return t7.polyline;
      case "extent":
      case "polygon":
        return t7.polygon;
      default:
        return null;
    }
  }
  _removeHighlight() {
    this._handles.remove(z);
  }
  async _getLayerView(e9) {
    const { view: t7 } = this;
    if (!e9 || !t7 || "building-component" === e9.layer.type || "subtype-sublayer" === e9.layer.type)
      return null;
    const { layer: r3 } = e9;
    return await t7.when(), t7.whenLayerView(r3);
  }
  _highlightFeature(e9) {
    const { graphic: t7, layerView: r3 } = e9, { attributes: s11, layer: o5 } = t7, { objectIdField: i7 } = o5, l6 = s11 && s11[i7], a10 = r3.highlight(l6 || t7);
    this._handles.add(a10, z);
  }
  _setResultFloor(e9) {
    var _a, _b, _c;
    const { view: t7 } = this, r3 = (_a = e9.feature) == null ? void 0 : _a.attributes, s11 = (_b = e9.feature) == null ? void 0 : _b.sourceLayer;
    if (s11 && "floorInfo" in s11 && ((_c = s11 == null ? void 0 : s11.floorInfo) == null ? void 0 : _c.floorField) && r3) {
      const e10 = r3[s11.floorInfo.floorField];
      t7 == null ? void 0 : t7.emit("select-result-floor", e10);
    }
  }
};
ee.ALL_INDEX = $4, e2([y2()], ee.prototype, "_searching", void 0), e2([y2()], ee.prototype, "_updatingPromise", void 0), e2([y2({ readOnly: true, value: null })], ee.prototype, "activeSource", null), e2([y2()], ee.prototype, "activeSourceIndex", null), e2([y2()], ee.prototype, "allPlaceholder", null), e2([y2({ readOnly: true })], ee.prototype, "allSources", null), e2([y2()], ee.prototype, "autoNavigate", void 0), e2([y2()], ee.prototype, "autoSelect", void 0), e2([y2()], ee.prototype, "defaultPopupTemplate", void 0), e2([y2({ readOnly: true })], ee.prototype, "defaultSources", void 0), e2([y2()], ee.prototype, "defaultSymbols", void 0), e2([y2()], ee.prototype, "includeDefaultSources", void 0), e2([y2()], ee.prototype, "locationEnabled", null), e2([y2()], ee.prototype, "maxInputLength", void 0), e2([y2()], ee.prototype, "maxResults", void 0), e2([y2()], ee.prototype, "maxSuggestions", void 0), e2([y2()], ee.prototype, "messages", void 0), e2([y2()], ee.prototype, "minSuggestCharacters", void 0), e2([y2({ readOnly: true })], ee.prototype, "placeholder", null), e2([y2()], ee.prototype, "popupEnabled", void 0), e2([y2({ type: k3 })], ee.prototype, "popupTemplate", void 0), e2([y2({ type: j3 })], ee.prototype, "portal", void 0), e2([y2()], ee.prototype, "resultCount", void 0), e2([y2()], ee.prototype, "resultGraphicEnabled", void 0), e2([y2({ readOnly: true })], ee.prototype, "resultGraphic", void 0), e2([y2({ readOnly: true })], ee.prototype, "results", void 0), e2([y2({ readOnly: true })], ee.prototype, "selectedSuggestion", void 0), e2([y2()], ee.prototype, "searchAllEnabled", void 0), e2([y2({ readOnly: true })], ee.prototype, "selectedResult", void 0), e2([y2()], ee.prototype, "searchTerm", null), e2([y2({ type: K2 })], ee.prototype, "sources", void 0), e2([y2({ readOnly: true })], ee.prototype, "state", null), e2([y2()], ee.prototype, "suggestionDelay", void 0), e2([y2()], ee.prototype, "suggestionCount", void 0), e2([y2({ readOnly: true })], ee.prototype, "suggestions", void 0), e2([y2()], ee.prototype, "suggestionsEnabled", void 0), e2([y2({ readOnly: true })], ee.prototype, "updating", null), e2([y2()], ee.prototype, "view", void 0), e2([y2()], ee.prototype, "clear", null), ee = e2([n(Z)], ee);
var te = ee;

// node_modules/@arcgis/core/widgets/Search/SearchResultRenderer.js
var n12 = { base: "esri-search-result-renderer esri-widget", anchor: "esri-widget__anchor", showMoreResults: "esri-search-result-renderer__more-results--show-more-results", moreResults: "esri-search-result-renderer__more-results", moreResultsList: "esri-search-result-renderer__more-results-list", moreResultsHeader: "esri-search-result-renderer__more-results-header", moreResultsItem: "esri-search-result-renderer__more-results-item", moreResultsListHeader: "esri-search-result-renderer__more-results-list-header" };
var c9 = class extends M {
  constructor(e9, s11) {
    super(e9, s11), this.messages = null, this.showMoreResultsOpen = false, this.viewModel = null;
  }
  render() {
    const e9 = { [n12.showMoreResults]: this.showMoreResultsOpen };
    return n3("div", { class: n12.base }, n3("div", { key: "esri-search-renderer__container", class: this.classes(n12.moreResults, e9) }, this.renderSearchResultName(), this.renderMoreResults()));
  }
  renderMoreResults() {
    return n3("div", { key: "esri-search-renderer__more-results" }, this.renderMoreResultsButton(), this.renderMoreResultsLists());
  }
  renderSearchResultName() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, s11 = e9 && e9.name || "";
    return n3("div", { key: "esri-search-renderer__result-name", class: n12.moreResultsItem }, s11);
  }
  renderMoreResultsLists() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.results, { resultCount: s11 } = this.viewModel;
    if (s11 < 2)
      return null;
    const r3 = e9.map((e10) => this.renderMoreResultsList(e10));
    return n3("div", { key: "esri-search-renderer__more-results-container", class: n12.moreResultsList }, r3);
  }
  renderMoreResultsButton() {
    const { messages: e9 } = this, { resultCount: s11 } = this.viewModel;
    return s11 < 2 ? null : n3("div", { key: "esri-search-renderer__more-results-button", class: n12.moreResultsItem }, n3("a", { class: n12.anchor, href: "#", bind: this, onclick: this._showMoreResultsClick, onkeydown: this._showMoreResultsClick }, this.showMoreResultsOpen ? e9.hideMoreResults : e9.showMoreResults));
  }
  renderMoreResultsHeader(e9, s11) {
    return n3("div", { key: `esri-search-result-renderer__header-${s11}`, class: n12.moreResultsListHeader }, e9);
  }
  renderMoreResultsList(e9) {
    var _a, _b;
    const { results: s11 } = e9, r3 = s11.length, t7 = !!r3, o5 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, l6 = 1 === r3 && s11[0] === o5, i7 = this._getSourceName(e9.source, e9.sourceIndex), n13 = ((_b = this.viewModel) == null ? void 0 : _b.results.length) > 1 && !l6 ? this.renderMoreResultsHeader(i7, e9.sourceIndex) : null, c10 = t7 && s11.map((e10, s12) => this.renderMoreResultsListItem(e10, s12)), d8 = t7 && !l6 ? n3("ul", { key: `esri-search-result-renderer__list-${e9.sourceIndex}` }, c10) : null;
    return t7 ? n3("div", { key: `esri-search-result-renderer__results-${e9.sourceIndex}` }, n13, d8) : null;
  }
  renderMoreResultsListItem(e9, s11) {
    return e9 !== this.get("viewModel.selectedResult") ? n3("li", { key: `esri-search-result-renderer__list-item-${s11}` }, n3("a", { class: n12.anchor, href: "#", tabindex: "0", bind: this, "data-result": e9, onclick: this._selectResultClick, onkeydown: this._selectResultClick }, e9.name)) : null;
  }
  _showMoreResultsClick(e9) {
    e9.preventDefault(), this.showMoreResultsOpen = !this.showMoreResultsOpen;
    const s11 = this.get("viewModel.view.popup");
    s11 && s11.reposition();
  }
  _selectResultClick(e9) {
    e9.preventDefault();
    const s11 = e9.currentTarget["data-result"];
    this.viewModel && this.viewModel.select(s11);
  }
  _getSourceName(e9, s11) {
    return s11 === te.ALL_INDEX ? this.messages.all : e9.name;
  }
};
e2([y2(), e3("esri/widgets/Search/t9n/Search")], c9.prototype, "messages", void 0), e2([y2()], c9.prototype, "showMoreResultsOpen", void 0), e2([y2()], c9.prototype, "viewModel", void 0), e2([t3()], c9.prototype, "_showMoreResultsClick", null), e2([t3()], c9.prototype, "_selectResultClick", null), c9 = e2([n("esri.widgets.Search.SearchResultRenderer")], c9);
var d7 = c9;

// node_modules/@arcgis/core/widgets/Search.js
var w5 = { base: "esri-search esri-widget", loader: "esri-widget__loader", loaderText: "esri-widget__loader-text", loaderAnimation: "esri-widget__loader-animation", esriInput: "esri-input", hasMultipleSources: "esri-search--multiple-sources", isLoading: "esri-search--loading", isSearching: "esri-search--searching", showSuggestions: "esri-search--show-suggestions", showSources: "esri-search--sources", showWarning: "esri-search--warning", container: "esri-search__container", input: "esri-search__input", inputContainer: "esri-search__input-container", form: "esri-search__form", submitButton: "esri-search__submit-button", sourcesButton: "esri-search__sources-button", clearButton: "esri-search__clear-button", sourceName: "esri-search__source-name", suggestionsMenu: "esri-search__suggestions-menu", suggestionList: "esri-search__suggestions-list", suggestionListCurrentLocation: "esri-search__suggestions-list--current-location", sourcesMenu: "esri-search__sources-menu", source: "esri-search__source", warningMenu: "esri-search__warning-menu", warningMenuBody: "esri-search__warning-body", warningMenuHeader: "esri-search__warning-header", warningMenuText: "esri-search__warning-text", noValueText: "esri-search__no-value-text", esriWidgetDisabled: "esri-widget--disabled", button: "esri-widget--button", fallbackText: "esri-icon-font-fallback-text", header: "esri-widget__heading", locate: "esri-icon-locate-circled", menu: "esri-menu", menuList: "esri-menu__list", menuItem: "esri-menu__list-item", menuItemActive: "esri-menu__list-item--active", menuItemFocus: "esri-menu__list-item--focus", menuHeader: "esri-menu__header", loadingIcon: "esri-icon-loading-indicator esri-rotating", searchIcon: "esri-icon-search", dropdownIcon: "esri-icon-down-arrow esri-search__sources-button--down", dropupIcon: "esri-icon-up-arrow esri-search__sources-button--up", clearIcon: "esri-icon-close", noticeIcon: "esri-icon-notice-triangle", widgetIcon: "esri-icon-search", disabled: "esri-disabled" };
var S4 = /<[a-z/][\s\S]*>/i;
var I3 = class extends M {
  constructor(e9, t7) {
    super(e9, t7), this._activeMenuItemIndex = -1, this._handles = new t2(), this._inputNode = null, this._menuItemCount = 0, this._sourceMenuButtonNode = null, this._sourceListNode = null, this._suggestionListNode = null, this._searchResultRenderer = new d7(), this._locateFailed = null, this._container = null, this.activeMenu = "none", this.disabled = false, this.iconClass = w5.widgetIcon, this.messages = null, this.messagesCommon = null, this.viewModel = new te(), this._clearActiveMenu = () => {
      this.activeMenu = "none";
    }, this._removeActiveMenu = (e10) => {
      var _a;
      const t8 = e10.relatedTarget;
      t8 && ((_a = this._container) == null ? void 0 : _a.contains(t8)) || this._clearActiveMenu();
    }, this.addHandles([l2(() => this.searchTerm, (e10) => {
      (e10 && "warning" === this.activeMenu || !e10 && !this.get("viewModel.selectedSuggestion.location")) && this._clearActiveMenu();
    }), a(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.allSources;
    }, "change", () => this._watchSourceChanges()), l2(() => this.activeMenu, () => this._resetActiveMenuItemIndex(), h), l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.defaultPopupTemplate;
    }, (e10) => {
      e10 && (e10.content = this._renderSearchResultsContent.bind(this));
    }, h)]);
  }
  destroy() {
    this._handles.destroy(), this._handles = null, this._cancelSuggest(), this._cancelSearch(), this._searchResultRenderer && (this._searchResultRenderer.viewModel = null, this._searchResultRenderer.destroy(), this._searchResultRenderer = null);
  }
  get displayedSearchTerm() {
    return `${this.viewModel.searchTerm}`.trim();
  }
  get inputId() {
    return this._buildId("input");
  }
  get suggestionsMenuId() {
    return this._buildId("suggest-menu");
  }
  get sourceMenuId() {
    return this._buildId("source-menu");
  }
  get sourceMenuButtonId() {
    return this._buildId("source-menu-button");
  }
  get activeSource() {
    return this.viewModel.activeSource;
  }
  get activeSourceIndex() {
    return this.viewModel.activeSourceIndex;
  }
  set activeSourceIndex(e9) {
    this.viewModel.activeSourceIndex = e9;
  }
  get allPlaceholder() {
    return this.viewModel.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this.viewModel.allPlaceholder = e9;
  }
  get allSources() {
    return this.viewModel.allSources;
  }
  get autoNavigate() {
    return this.viewModel.autoNavigate;
  }
  set autoNavigate(e9) {
    this.viewModel.autoNavigate = e9;
  }
  get autoSelect() {
    return this.viewModel.autoSelect;
  }
  set autoSelect(e9) {
    this.viewModel.autoSelect = e9;
  }
  get defaultSources() {
    return this.viewModel.defaultSources;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e9) {
    this.viewModel.goToOverride = e9;
  }
  get includeDefaultSources() {
    return this.viewModel.includeDefaultSources;
  }
  set includeDefaultSources(e9) {
    this.viewModel.includeDefaultSources = e9;
  }
  get label() {
    var _a, _b;
    return (_b = (_a = this.messages) == null ? void 0 : _a.widgetLabel) != null ? _b : "";
  }
  set label(e9) {
    this._overrideIfSome("label", e9);
  }
  get locationEnabled() {
    return this.viewModel.locationEnabled;
  }
  set locationEnabled(e9) {
    this.viewModel.locationEnabled = e9;
  }
  get maxResults() {
    return this.viewModel.maxResults;
  }
  set maxResults(e9) {
    this.viewModel.maxResults = e9;
  }
  get maxSuggestions() {
    return this.viewModel.maxSuggestions;
  }
  set maxSuggestions(e9) {
    this.viewModel.maxSuggestions = e9;
  }
  get minSuggestCharacters() {
    return this.viewModel.minSuggestCharacters;
  }
  set minSuggestCharacters(e9) {
    this.viewModel.minSuggestCharacters = e9;
  }
  get popupEnabled() {
    return this.viewModel.popupEnabled;
  }
  set popupEnabled(e9) {
    this.viewModel.popupEnabled = e9;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e9) {
    this.viewModel.popupTemplate = e9;
  }
  get portal() {
    return this.viewModel.portal;
  }
  set portal(e9) {
    this.viewModel.portal = e9;
  }
  get resultGraphic() {
    return this.viewModel.resultGraphic;
  }
  set resultGraphic(e9) {
    this.viewModel.resultGraphic = e9;
  }
  get resultGraphicEnabled() {
    return this.viewModel.resultGraphicEnabled;
  }
  set resultGraphicEnabled(e9) {
    this.viewModel.resultGraphicEnabled = e9;
  }
  get results() {
    return this.viewModel.results;
  }
  get searchAllEnabled() {
    return this.viewModel.searchAllEnabled;
  }
  set searchAllEnabled(e9) {
    this.viewModel.searchAllEnabled = e9;
  }
  get searchTerm() {
    return this.viewModel.searchTerm;
  }
  set searchTerm(e9) {
    this.viewModel.searchTerm = e9;
  }
  get selectedResult() {
    return this.viewModel.selectedResult;
  }
  get sources() {
    return this.viewModel.sources;
  }
  set sources(e9) {
    this.viewModel.sources = e9;
  }
  get suggestions() {
    return this.viewModel.suggestions;
  }
  get suggestionsEnabled() {
    return this.viewModel.suggestionsEnabled;
  }
  set suggestionsEnabled(e9) {
    this.viewModel.suggestionsEnabled = e9;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e9) {
    this.viewModel.view = e9;
  }
  clear() {
    this.viewModel.clear();
  }
  focus() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.focus(), this.emit("search-focus");
  }
  blur() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.blur(), this.emit("search-blur");
  }
  search(e9) {
    this._clearActiveMenu(), this._cancelSuggest(), this._cancelSearch();
    const t7 = new AbortController(), { signal: s11 } = t7;
    return this._searchController = t7, this.viewModel.search(e9, { signal: s11 }).catch((e10) => {
      if (this._searchController === t7)
        return this._clearActiveMenu(), this._searchController = null, e10;
    }).then((e10) => {
      if (this._searchController === t7)
        return this.activeMenu = e10.numResults ? "none" : "warning", this._searchController = null, e10;
    });
  }
  suggest(e9) {
    this._cancelSuggest();
    const t7 = new AbortController(), { signal: s11 } = t7;
    return this._suggestController = t7, this.viewModel.suggest(e9, null, { signal: s11 }).then((e10) => {
      if (this._suggestController === t7)
        return this._suggestController = null, e10.numResults && this._openSuggestionMenu(), this._scrollToTopSuggestion(), e10;
    }).catch(() => {
      if (this._suggestController === t7)
        return this._suggestController = null, null;
    });
  }
  render() {
    const { state: e9 } = this.viewModel, t7 = { [w5.disabled]: "disabled" === e9, [w5.esriWidgetDisabled]: this.disabled };
    return n3("div", { class: this.classes(w5.base, t7) }, "loading" === e9 ? this.renderLoader() : this.renderContainer());
  }
  renderSubmitButton() {
    const { messages: e9, disabled: t7 } = this;
    return n3("button", { "aria-label": e9.searchButtonTitle, bind: this, disabled: t7, class: this.classes(w5.submitButton, w5.button), key: "esri-search__submit-button", onclick: this._handleSearchButtonClick, title: e9.searchButtonTitle, type: "button" }, n3("span", { "aria-hidden": "true", class: w5.searchIcon }));
  }
  renderWarningMenu() {
    return n3("div", { key: "esri-search__error-menu", class: this.classes(w5.menu, w5.warningMenu) }, n3("div", { class: w5.warningMenuBody }, this.renderWarning()));
  }
  renderSourceMenuButton() {
    const { messages: e9, activeMenu: t7, sourceMenuId: s11, sourceMenuButtonId: r3, disabled: i7 } = this, { activeSourceIndex: n13, allSources: o5 } = this.viewModel;
    return o5.length > 1 ? n3("button", { id: r3, key: "esri-search__source-menu-button", bind: this, disabled: i7, "aria-label": e9.searchIn, title: e9.searchIn, "aria-haspopup": "true", "aria-expanded": ("source" === t7).toString(), "aria-controls": s11, class: this.classes(w5.sourcesButton, w5.button), onclick: this._handleSourcesMenuToggleClick, onfocus: this._handleSourcesMenuToggleFocus, afterCreate: v3, "data-node-ref": "_sourceMenuButtonNode", type: "button" }, n3("span", { "aria-hidden": "true", class: w5.dropdownIcon }), n3("span", { "aria-hidden": "true", class: w5.dropupIcon }), n3("span", { class: w5.sourceName }, this._getSourceName(n13))) : null;
  }
  renderSourcesList() {
    const { allSources: e9, searchAllEnabled: t7 } = this.viewModel, { _activeMenuItemIndex: s11, activeMenu: r3, sourceMenuId: i7, sourceMenuButtonId: n13 } = this, o5 = "source" === r3 && s11 > -1 ? this._buildId("source-item", s11) : null;
    return e9.length > 1 ? n3("ul", { "aria-activedescendant": o5, "aria-labelledby": n13, id: i7, role: "menu", bind: this, afterCreate: v3, onkeydown: this._handleSourceMenuKeydown, onkeyup: this._handleSourceMenuKeyup, "data-node-ref": "_sourceListNode", class: w5.menuList, tabIndex: -1 }, t7 ? this.renderSource(te.ALL_INDEX) : null, e9.map((e10, t8) => this.renderSource(t8)).toArray()) : null;
  }
  renderSourcesMenu() {
    const { allSources: e9 } = this.viewModel;
    return e9.length > 1 ? n3("div", { key: "esri-search__source-menu", class: this.classes(w5.menu, w5.sourcesMenu) }, this.renderSourcesList()) : null;
  }
  renderLoader() {
    const { messages: e9, messagesCommon: t7, disabled: s11 } = this;
    return n3("div", { class: w5.loader, key: "base-loader", tabIndex: s11 ? -1 : null }, n3("span", { "aria-hidden": "true", class: w5.loaderAnimation }), n3("span", { class: w5.fallbackText }, e9.searchButtonTitle), n3("span", { class: w5.loaderText }, t7.loading));
  }
  renderContainer() {
    const { allSources: e9, state: t7 } = this.viewModel, { activeMenu: s11 } = this, r3 = { [w5.hasMultipleSources]: e9.length > 1, [w5.isLoading]: "loading" === t7, [w5.isSearching]: "searching" === t7, [w5.showWarning]: "warning" === s11, [w5.showSources]: "source" === s11, [w5.showSuggestions]: "suggestion" === s11 };
    return n3("div", { tabIndex: -1, afterCreate: (e10) => {
      this._container = e10, e10.addEventListener("focusout", this._removeActiveMenu);
    }, afterRemoved: (e10) => {
      e10.removeEventListener("focusout", this._removeActiveMenu);
    }, class: this.classes(r3, w5.container), key: "base-container" }, this.renderSourceMenuButton(), this.renderSourcesMenu(), this.renderInputContainer(), this.renderSubmitButton(), this.renderWarningMenu());
  }
  renderClearButton() {
    return this.searchTerm ? n3("button", { bind: this, disabled: this.disabled, class: this.classes(w5.clearButton, w5.button), key: "esri-search__clear-button", onclick: this._handleClearButtonClick, onfocus: this._clearActiveMenu, title: this.messages.clearButtonTitle, type: "button" }, n3("span", { "aria-hidden": "true", class: w5.clearIcon })) : null;
  }
  renderLocationGroup() {
    const { messages: e9, locationEnabled: t7, displayedSearchTerm: s11 } = this, r3 = t7 && !s11, i7 = "suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex;
    return r3 ? n3("ul", { role: "group", key: "esri-search__suggestion-list-current-location", class: this.classes(w5.menuList, w5.suggestionList, w5.suggestionListCurrentLocation) }, n3("li", { bind: this, "data-current-location-item": true, onclick: this._handleUseCurrentLocationClick, id: this._buildId("suggestion-item", 0), "aria-selected": ("suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex).toString(), role: "option", class: this.classes(w5.menuItem, i7 ? w5.menuItemFocus : null) }, n3("span", { "aria-hidden": "true", class: w5.locate }), " ", e9.useCurrentLocation)) : null;
  }
  renderInput() {
    const { activeMenu: e9, locationEnabled: t7, displayedSearchTerm: s11, messages: r3, suggestionsMenuId: i7, inputId: n13, _activeMenuItemIndex: o5, disabled: a10 } = this, { maxInputLength: u4, placeholder: l6, searchTerm: c10, suggestionCount: d8 } = this.viewModel, g5 = !(!(t7 && !s11) && !d8), p7 = "suggestion" === e9 && o5 > -1 ? this._buildId("suggestion-item", o5) : null;
    return n3("input", { "aria-activedescendant": p7, "aria-autocomplete": "list", "aria-expanded": (g5 && "suggestion" === e9).toString(), "aria-controls": g5 ? i7 : null, "aria-haspopup": "listbox", "aria-label": r3.searchButtonTitle, bind: this, disabled: a10, placeholder: l6, maxlength: u4, autocomplete: "off", type: "text", class: this.classes(w5.esriInput, w5.input), value: c10, id: n13, role: "combobox", onkeyup: this._handleInputKeyup, onclick: this._openSuggestionMenu, oninput: this._handleInputPaste, onpaste: this._handleInputPaste, afterCreate: v3, "data-node-ref": "_inputNode", onfocus: this.focus, onblur: this.blur, title: c10 ? "" : l6 });
  }
  renderForm() {
    return n3("form", { key: "esri-search__form", bind: this, disabled: this.disabled, class: w5.form, onsubmit: this._formSubmit, role: "search" }, this.renderInput());
  }
  renderSuggestList(e9) {
    const { sourceIndex: t7 } = e9, s11 = e9.results.length, r3 = e9.results;
    return s11 ? n3("ul", { role: "group", key: `esri-search__suggestion-list-${t7}`, class: this.classes(w5.menuList, w5.suggestionList) }, r3.map((e10) => this.renderSuggestion(e10, this._menuItemCount++))) : null;
  }
  renderSuggestionsGroup() {
    const { suggestions: e9 } = this.viewModel;
    return e9 ? e9.map((e10) => [this.renderSuggestionHeader(e10), this.renderSuggestList(e10)]) : null;
  }
  renderSuggestionsMenu() {
    const { displayedSearchTerm: e9, locationEnabled: t7, suggestionsMenuId: s11, inputId: r3 } = this, { suggestionCount: i7 } = this.viewModel, n13 = t7 && !e9 || i7;
    return this._menuItemCount = 0, n13 ? n3("div", { id: s11, key: "esri-search__suggestions-menu", class: this.classes(w5.menu, w5.suggestionsMenu), role: "listbox", "aria-labelledby": r3, bind: this, afterCreate: v3, "data-node-ref": "_suggestionListNode" }, this.renderLocationGroup(), this.renderSuggestionsGroup()) : null;
  }
  renderInputContainer() {
    return n3("div", { key: "esri-search__input-container", class: w5.inputContainer }, this.renderForm(), this.renderSuggestionsMenu(), this.renderClearButton());
  }
  renderSuggestionHeader(e9) {
    const { allSources: t7, activeSourceIndex: s11 } = this.viewModel, { sourceIndex: r3 } = e9, i7 = e9.results.length, n13 = t7.length > 1 && s11 === te.ALL_INDEX;
    return i7 && n13 ? n3("div", { key: `esri-search__suggestion-header-${r3}`, class: w5.menuHeader }, this._getSourceName(r3)) : null;
  }
  renderSuggestion(e9, t7) {
    const { _activeMenuItemIndex: s11, messages: r3 } = this, { searchTerm: i7 } = this.viewModel;
    if (i7) {
      const { text: n13 } = e9, o5 = n13 || r3.untitledResult, a10 = S4.test(o5), u4 = [];
      if (a10)
        u4.push(n3("div", { innerHTML: o5 }));
      else {
        const e10 = this._splitResult(o5, i7), t8 = i7.toLowerCase();
        e10.forEach((e11, s12) => {
          e11 && e11.length && (e11.toLowerCase() === t8 ? u4.push(n3("strong", { key: s12 }, e11)) : u4.push(e11));
        });
      }
      const l6 = "suggestion" === this.activeMenu && s11 === t7;
      return n3("li", { bind: this, id: this._buildId("suggestion-item", t7), "aria-selected": ("suggestion" === this.activeMenu && this._activeMenuItemIndex === t7).toString(), onclick: this._handleSuggestionClick, key: `esri-search__suggestion_${t7}`, "data-suggestion": e9, role: "option", class: this.classes(w5.menuItem, l6 ? w5.menuItemFocus : null) }, u4);
    }
  }
  renderSource(e9) {
    const { activeSourceIndex: t7, searchAllEnabled: s11 } = this.viewModel, r3 = { [w5.menuItemActive]: e9 === t7, [w5.menuItemFocus]: "source" === this.activeMenu && e9 === (s11 ? this._activeMenuItemIndex - 1 : this._activeMenuItemIndex) }, i7 = s11 ? e9 + 1 : e9;
    return n3("li", { bind: this, key: `esri-search__source-${e9}`, id: this._buildId("source-item", i7), "aria-checked": (e9 === t7).toString(), onclick: this._handleSourceClick, "data-source-index": e9, role: "menuitemradio", class: this.classes(w5.source, w5.menuItem, r3) }, this._getSourceName(e9));
  }
  renderNoResultsWarning(e9) {
    const { messages: t7 } = this, s11 = e9 ? s6(t7.noResultsFoundForValue, { value: `"${e9}"` }) : t7.noResultsFound;
    return n3("div", { key: "esri-search__no_results" }, n3("div", { class: w5.warningMenuHeader }, t7.noResults), n3("div", { class: w5.warningMenuText }, s11));
  }
  renderEmptySearchWarning() {
    const { messages: e9 } = this;
    return n3("div", { key: "esri-search__empty-search" }, n3("span", { "aria-hidden": "true", class: w5.noticeIcon }), n3("span", { class: w5.noValueText }, e9.emptyValue));
  }
  renderLocateWarning() {
    const { messages: e9 } = this;
    return n3("div", { key: "esri-search__locate-error" }, n3("span", { "aria-hidden": "true", class: w5.noticeIcon }), n3("span", { class: w5.noValueText }, e9.locateError));
  }
  renderWarning() {
    var _a;
    const { displayedSearchTerm: e9, _locateFailed: t7 } = this, { viewModel: s11 } = this;
    return t7 ? this.renderLocateWarning() : ((_a = s11.selectedSuggestion) == null ? void 0 : _a.location) || e9 ? this.renderNoResultsWarning(e9) : this.renderEmptySearchWarning();
  }
  _resetActiveMenuItemIndex() {
    this._activeMenuItemIndex = -1;
  }
  _buildId(e9, t7) {
    return `${this.id}-${e9}${void 0 === t7 ? "" : `-${t7}`}`;
  }
  _watchSourceChanges() {
    const { _handles: e9, viewModel: { allSources: t7 } } = this, s11 = "sources";
    e9.remove(s11), t7.forEach((t8) => e9.add(l2(() => t8.name, () => this.scheduleRender()), s11));
  }
  _handleSourcesMenuToggleFocus() {
    "source" !== this.activeMenu && this._clearActiveMenu();
  }
  _handleSourcesMenuToggleClick() {
    var _a;
    const e9 = "source" === this.activeMenu;
    this.activeMenu = e9 ? "none" : "source", this.renderNow(), "source" === this.activeMenu && ((_a = this._sourceListNode) == null ? void 0 : _a.focus());
  }
  _handleClearButtonClick() {
    this.viewModel.clear(), this._focus();
  }
  _handleSearchButtonClick() {
    this.search();
  }
  _handleSuggestionClick(e9) {
    const t7 = e9.currentTarget["data-suggestion"];
    t7 && (this._focus(), this.search(t7));
  }
  _handleUseCurrentLocationClick() {
    this._useCurrentLocation();
  }
  _useCurrentLocation() {
    this._focus("none"), this._cancelSuggest(), this._cancelSearch();
    const e9 = new AbortController(), { signal: t7 } = e9;
    this._searchController = e9, this.viewModel.searchNearby({ signal: t7 }).then((e10) => {
      this.activeMenu = e10.numResults ? "none" : "warning";
    }).catch(() => {
      this._locateFailed = true, this.activeMenu = "warning";
    }).then(() => {
      this._searchController = null;
    });
  }
  _handleSourceClick(e9) {
    this._setSourceFromMenuItem(e9.currentTarget);
  }
  _setSourceFromMenuItem(e9) {
    var _a;
    if (!e9)
      return;
    const t7 = e9["data-source-index"];
    this.viewModel.activeSourceIndex = t7, this._clearActiveMenu(), (_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus();
  }
  _cancelSuggest() {
    this._suggestController && (this._suggestController.abort(), this._suggestController = null);
  }
  _cancelSearch() {
    this._searchController && (this._searchController.abort(), this._searchController = null), this._locateFailed = false;
  }
  _handleInputKeyup(e9) {
    var _a;
    const s11 = i(e9);
    if (e9.ctrlKey || e9.metaKey || "Copy" === s11 || "ArrowLeft" === s11 || "ArrowRight" === s11 || "Shift" === s11)
      return;
    if ("Tab" === s11 || "Escape" === s11 || e9.shiftKey && "Tab" === s11)
      return this._cancelSuggest(), void ("Escape" === s11 && this._clearActiveMenu());
    const r3 = "Home" === s11 || "End" === s11 || "ArrowUp" === s11 || "ArrowDown" === s11;
    if ("Enter" === s11 && this._activeMenuItemIndex < 0)
      return void this._cancelSuggest();
    const i7 = (_a = this._suggestionListNode) == null ? void 0 : _a.getElementsByTagName("li");
    if (i7 == null ? void 0 : i7.length) {
      if ("suggestion" !== this.activeMenu && this._openSuggestionMenu(), r3)
        return e9.preventDefault(), this._cancelSuggest(), void this._handleItemNavigation(s11, i7, this._suggestionListNode);
      const t7 = i7[this._activeMenuItemIndex];
      if ("Enter" === s11 && t7) {
        const e10 = t7["data-suggestion"];
        return void (e10 ? (this._focus(), this.search(e10)) : t7["data-current-location-item"] && this._useCurrentLocation());
      }
    }
    this.viewModel.searchTerm && this.suggest();
  }
  _handleItemNavigation(e9, t7, s11) {
    const r3 = this._activeMenuItemIndex;
    "Home" === e9 && (this._activeMenuItemIndex = 0), "End" === e9 && (this._activeMenuItemIndex = t7.length - 1), "ArrowUp" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex <= 0 ? t7.length - 1 : this._activeMenuItemIndex - 1), "ArrowDown" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex === t7.length - 1 ? 0 : this._activeMenuItemIndex + 1), r3 !== this._activeMenuItemIndex && A(t7[this._activeMenuItemIndex], s11);
  }
  _scrollToTopSuggestion() {
    this._suggestionListNode && (this._suggestionListNode.scrollTop = 0);
  }
  _openSuggestionMenu() {
    this.activeMenu = "suggestion";
  }
  _handleInputPaste(e9) {
    const t7 = e9.target;
    this.viewModel.searchTerm !== t7.value && (this.viewModel.searchTerm = t7.value), this.viewModel.searchTerm && this.suggest();
  }
  _handleSourceMenuKeydown(e9) {
    const s11 = i(e9);
    if (k2(s11)) {
      e9.preventDefault();
      const t7 = this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];
      this._setSourceFromMenuItem(t7);
    } else
      "ArrowUp" !== s11 && "ArrowDown" !== s11 && "End" !== s11 && "Home" !== s11 || e9.preventDefault();
  }
  _handleSourceMenuKeyup(e9) {
    var _a, _b;
    const s11 = i(e9), r3 = "ArrowUp" === s11 || "ArrowDown" === s11 || "End" === s11 || "Home" === s11;
    if (r3 && e9.preventDefault(), "Escape" === s11)
      return this._clearActiveMenu(), void ((_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus());
    const i7 = (_b = this._sourceListNode) == null ? void 0 : _b.getElementsByTagName("li");
    return i7 && 0 !== i7.length && r3 ? ("source" !== this.activeMenu && (this.activeMenu = "source"), void this._handleItemNavigation(s11, i7, this._sourceListNode.parentElement)) : void 0;
  }
  _focus(e9) {
    this.focus(), e9 && (this.activeMenu = e9);
  }
  _formSubmit(e9) {
    e9.preventDefault(), -1 === this._activeMenuItemIndex && this.search();
  }
  _getSourceName(e9) {
    const { messages: t7 } = this, s11 = this.viewModel, { allSources: r3 } = s11, i7 = r3.getItemAt(e9);
    return e9 === te.ALL_INDEX ? t7.all : i7 && i7.name || t7.untitledSource;
  }
  _splitResult(e9, t7) {
    const s11 = o(t7);
    return e9.replace(new RegExp(`(^|)(${s11})(|$)`, "ig"), "$1|$2|$3").split("|");
  }
  _renderSearchResultsContent() {
    return this._searchResultRenderer.showMoreResultsOpen = false, this._searchResultRenderer.viewModel = this.viewModel, this._searchResultRenderer;
  }
};
e2([y2()], I3.prototype, "_activeMenuItemIndex", void 0), e2([y2()], I3.prototype, "displayedSearchTerm", null), e2([y2({ readOnly: true })], I3.prototype, "inputId", null), e2([y2({ readOnly: true })], I3.prototype, "suggestionsMenuId", null), e2([y2({ readOnly: true })], I3.prototype, "sourceMenuId", null), e2([y2({ readOnly: true })], I3.prototype, "sourceMenuButtonId", null), e2([y2()], I3.prototype, "activeMenu", void 0), e2([y2({ readOnly: true })], I3.prototype, "activeSource", null), e2([y2()], I3.prototype, "activeSourceIndex", null), e2([y2()], I3.prototype, "allPlaceholder", null), e2([y2({ readOnly: true })], I3.prototype, "allSources", null), e2([y2()], I3.prototype, "autoNavigate", null), e2([y2()], I3.prototype, "autoSelect", null), e2([y2({ readOnly: true })], I3.prototype, "defaultSources", null), e2([y2()], I3.prototype, "disabled", void 0), e2([y2()], I3.prototype, "goToOverride", null), e2([y2()], I3.prototype, "iconClass", void 0), e2([y2()], I3.prototype, "includeDefaultSources", null), e2([y2()], I3.prototype, "label", null), e2([y2()], I3.prototype, "locationEnabled", null), e2([y2()], I3.prototype, "maxResults", null), e2([y2()], I3.prototype, "maxSuggestions", null), e2([y2(), e3("esri/widgets/Search/t9n/Search")], I3.prototype, "messages", void 0), e2([y2(), e3("esri/t9n/common")], I3.prototype, "messagesCommon", void 0), e2([y2()], I3.prototype, "minSuggestCharacters", null), e2([y2()], I3.prototype, "popupEnabled", null), e2([y2()], I3.prototype, "popupTemplate", null), e2([y2()], I3.prototype, "portal", null), e2([y2()], I3.prototype, "resultGraphic", null), e2([y2()], I3.prototype, "resultGraphicEnabled", null), e2([y2({ readOnly: true })], I3.prototype, "results", null), e2([y2()], I3.prototype, "searchAllEnabled", null), e2([y2()], I3.prototype, "searchTerm", null), e2([y2({ readOnly: true })], I3.prototype, "selectedResult", null), e2([y2()], I3.prototype, "sources", null), e2([y2({ readOnly: true })], I3.prototype, "suggestions", null), e2([y2()], I3.prototype, "suggestionsEnabled", null), e2([y2()], I3.prototype, "view", null), e2([e4(["search-complete", "search-clear", "search-start", "select-result", "suggest-start", "suggest-complete"]), y2({ type: te })], I3.prototype, "viewModel", void 0), I3 = e2([n("esri.widgets.Search")], I3);
var b4 = I3;

// dep:@arcgis_core_widgets_Search
var arcgis_core_widgets_Search_default = b4;
export {
  arcgis_core_widgets_Search_default as default
};
//# sourceMappingURL=@arcgis_core_widgets_Search.js.map
