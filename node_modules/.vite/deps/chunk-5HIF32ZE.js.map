{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/cim/ExpandedCIM.js", "../../@arcgis/core/views/2d/layers/support/webStyleUtils.js", "../../@arcgis/core/views/2d/layers/support/cimSymbolUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e,WGLSymbologyType as t}from\"../../views/2d/engine/webgl/enums.js\";import{createMaterialKey as a}from\"../../views/2d/engine/webgl/materialKey/MaterialKey.js\";const s={marker:e.MARKER,fill:e.FILL,line:e.LINE,text:e.TEXT};class l{constructor(e,l,n,r){const c={minScale:l?.minScale,maxScale:l?.maxScale},m=i(c);this.layers=e,this.data=l,this.hash=this._createHash()+m,this.rendererKey=n;const o={isOutline:!1,placement:null,symbologyType:t.DEFAULT,vvFlags:n};for(const t of e){const e=s[t.type];o.isOutline=\"line\"===t.type&&t.isOutline,t.materialKey=a(e,o),t.maxVVSize=r,t.scaleInfo=c,t.templateHash+=m}}get type(){return\"expanded-cim\"}_createHash(){let e=\"\";for(const t of this.layers)e+=t.templateHash;return e}}function i(e){return e.minScale||e.maxScale?e.minScale+\"-\"+e.maxScale:\"\"}export{l as ExpandedCIM};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import e from\"../../../../core/Error.js\";import{isSome as o}from\"../../../../core/maybe.js\";import{throwIfAborted as n}from\"../../../../core/promiseUtils.js\";import{urlToObject as s}from\"../../../../core/urlUtils.js\";import m from\"../../../../portal/Portal.js\";import{f as l}from\"../../../../chunks/persistableUrlUtils.js\";import{fetchStyle as a,Style2DUrlTemplate as i,requestJSON as c,makeCIMSymbolRef as y,symbolUrlFromStyleItem as f}from\"../../../../symbols/support/styleUtils.js\";async function u(t,r,o){if(!t.name)throw new e(\"style-symbol-reference-name-missing\",\"Missing name in style symbol reference\");if(t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName)return p(t,o);try{return b(await a(t,r,o),t.name,r,o)}catch(s){return n(s),null}}async function p(t,r){const e=i.replace(/\\{SymbolName\\}/gi,t.name);try{const t=await c(e,r);return y(t.data)}catch(o){return n(o),null}}async function b(a,i,u,p){const b=a.data,d={portal:u&&o(u.portal)?u.portal:m.getDefault(),url:s(a.baseUrl),origin:\"portal-item\"},j=b.items.find((t=>t.name===i));if(!j){throw new e(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${i}' could not be found`,{symbolName:i})}let h=l(f(j,\"cimRef\"),d);t()&&(h=r(h));try{const t=await c(h,p);return y(t.data)}catch(w){return n(w),null}}export{u as fetchCIMSymbolReference};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{analyzeCIMSymbol as e}from\"../../../../symbols/cim/cimAnalyzer.js\";import{ExpandedCIM as t}from\"../../../../symbols/cim/ExpandedCIM.js\";import{fetchCIMSymbolReference as a}from\"./webStyleUtils.js\";const r=async(e,t,a,r)=>Promise.all(e.map((e=>n(e,t,a,r)))),l=async(a,r,l)=>new t(await e(a.data,r,l),a.data,a.rendererKey,a.maxVVSize),n=async(e,t,r,n)=>{if(!e)return null;if(\"cim\"===e.type)return l(e,t,r);if(\"web-style\"===e.type){const i={type:\"cim\",data:await a(e,null,n),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return l(i,t,r)}return e};function i(e){if(!e)return null;const{type:t,cim:a,url:r,materialHash:l}=e,n={cim:a,type:t,mosaicHash:l,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(t){case\"marker\":n.size=e.size,n.path=e.path,n.animatedSymbolProperties=e.animatedSymbolProperties;break;case\"line\":n.dashTemplate=e.dashTemplate;break;case\"text\":n.text=e.text,n.fontName=e.fontName}return n}export{i as cimLayerToRasterizationInfo,n as expandSymbol,r as expandSymbols};\n"],
  "mappings": "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",
  "names": ["s", "l", "n", "r", "c", "e", "f", "r", "p", "b", "c", "s", "t", "a", "i", "u", "d", "j", "w", "l", "a", "r", "n", "i"]
}
