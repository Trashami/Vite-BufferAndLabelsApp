import {
  v
} from "./chunk-NWERINOI.js";
import {
  f
} from "./chunk-OEFH2SLX.js";
import {
  J
} from "./chunk-TJ2I6XQT.js";
import {
  t
} from "./chunk-34YPGGJT.js";
import {
  c,
  u,
  y
} from "./chunk-EHPBHJYZ.js";
import {
  Z,
  i,
  o,
  r
} from "./chunk-UWG37XSU.js";
import {
  I
} from "./chunk-LNZAOBFW.js";
import {
  s
} from "./chunk-LIZHLHNA.js";

// node_modules/@arcgis/core/geometry/support/intersects.js
function n(n4) {
  return "mesh" === n4 ? o : Z(n4);
}

// node_modules/@arcgis/core/layers/graphics/contains.js
function n2(n4, t4) {
  return n4 ? t4 ? 4 : 3 : t4 ? 3 : 2;
}
function t2(n4, t4, r3, e3) {
  return o2(n4, t4, r3, e3.coords[0], e3.coords[1]);
}
function r2(t4, r3, e3, c3, u3, f3) {
  const s2 = n2(u3, f3), { coords: i3, lengths: l2 } = c3;
  if (!l2)
    return false;
  for (let n4 = 0, d = 0; n4 < l2.length; n4++, d += s2)
    if (!o2(t4, r3, e3, i3[d], i3[d + 1]))
      return false;
  return true;
}
function o2(t4, r3, o3, c3, u3) {
  if (!t4)
    return false;
  const f3 = n2(r3, o3), { coords: s2, lengths: i3 } = t4;
  let l2 = false, d = 0;
  for (const n4 of i3)
    l2 = e(l2, s2, f3, d, n4, c3, u3), d += n4 * f3;
  return l2;
}
function e(n4, t4, r3, o3, e3, c3, u3) {
  let f3 = n4, s2 = o3;
  for (let i3 = o3, l2 = o3 + e3 * r3; i3 < l2; i3 += r3) {
    s2 = i3 + r3, s2 === l2 && (s2 = o3);
    const n5 = t4[i3], e4 = t4[i3 + 1], d = t4[s2], g2 = t4[s2 + 1];
    (e4 < u3 && g2 >= u3 || g2 < u3 && e4 >= u3) && n5 + (u3 - e4) / (g2 - e4) * (d - n5) < c3 && (f3 = !f3);
  }
  return f3;
}

// node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js
var c2 = "feature-store:unsupported-query";
var R = { esriSpatialRelIntersects: "intersects", esriSpatialRelContains: "contains", esriSpatialRelCrosses: "crosses", esriSpatialRelDisjoint: "disjoint", esriSpatialRelEnvelopeIntersects: "intersects", esriSpatialRelIndexIntersects: null, esriSpatialRelOverlaps: "overlaps", esriSpatialRelTouches: "touches", esriSpatialRelWithin: "within", esriSpatialRelRelation: null };
var S = { spatialRelationship: { esriSpatialRelIntersects: true, esriSpatialRelContains: true, esriSpatialRelWithin: true, esriSpatialRelCrosses: true, esriSpatialRelDisjoint: true, esriSpatialRelTouches: true, esriSpatialRelOverlaps: true, esriSpatialRelEnvelopeIntersects: true, esriSpatialRelIndexIntersects: false, esriSpatialRelRelation: false }, queryGeometry: { esriGeometryPoint: true, esriGeometryMultipoint: true, esriGeometryPolyline: true, esriGeometryPolygon: true, esriGeometryEnvelope: true }, layerGeometry: { esriGeometryPoint: true, esriGeometryMultipoint: true, esriGeometryPolyline: true, esriGeometryPolygon: true, esriGeometryEnvelope: false } };
function G2(e3) {
  return null != e3 && true === S.spatialRelationship[e3];
}
function g(e3) {
  return null != e3 && true === S.queryGeometry[c(e3)];
}
function j(e3) {
  return null != e3 && true === S.layerGeometry[e3];
}
function h2() {
  return import("./geometryEngineJSON-ABWJ235Y.js");
}
function v2(e3, n4, l2, y3, c3) {
  if (y(n4) && "esriGeometryPoint" === l2 && ("esriSpatialRelIntersects" === e3 || "esriSpatialRelContains" === e3)) {
    const e4 = J(new t(), n4, false, false);
    return Promise.resolve((r3) => t2(e4, false, false, r3));
  }
  if (y(n4) && "esriGeometryMultipoint" === l2) {
    const r3 = J(new t(), n4, false, false);
    if ("esriSpatialRelContains" === e3)
      return Promise.resolve((e4) => r2(r3, false, false, e4, y3, c3));
  }
  if (u(n4) && "esriGeometryPoint" === l2 && ("esriSpatialRelIntersects" === e3 || "esriSpatialRelContains" === e3))
    return Promise.resolve((e4) => r(n4, v(l2, y3, c3, e4)));
  if (u(n4) && "esriGeometryMultipoint" === l2 && "esriSpatialRelContains" === e3)
    return Promise.resolve((e4) => i(n4, v(l2, y3, c3, e4)));
  if (u(n4) && "esriSpatialRelIntersects" === e3) {
    const e4 = n(l2);
    return Promise.resolve((r3) => e4(n4, v(l2, y3, c3, r3)));
  }
  return h2().then((r3) => {
    const t4 = r3[R[e3]].bind(null, n4.spatialReference, n4);
    return (e4) => t4(v(l2, y3, c3, e4));
  });
}
async function P(r3, t4, i3) {
  const { spatialRel: s2, geometry: o3 } = r3;
  if (o3) {
    if (!G2(s2))
      throw new s(c2, "Unsupported query spatial relationship", { query: r3 });
    if (I(o3.spatialReference) && I(i3)) {
      if (!g(o3))
        throw new s(c2, "Unsupported query geometry type", { query: r3 });
      if (!j(t4))
        throw new s(c2, "Unsupported layer geometry type", { query: r3 });
      if (r3.outSR)
        return f(r3.geometry && r3.geometry.spatialReference, r3.outSR);
    }
  }
}
function I2(e3) {
  if (u(e3))
    return true;
  if (y(e3)) {
    for (const r3 of e3.rings) {
      if (5 !== r3.length)
        return false;
      if (r3[0][0] !== r3[1][0] || r3[0][0] !== r3[4][0] || r3[2][0] !== r3[3][0] || r3[0][1] !== r3[3][1] || r3[0][1] !== r3[4][1] || r3[1][1] !== r3[2][1])
        return false;
    }
    return true;
  }
  return false;
}

// node_modules/@arcgis/core/layers/graphics/data/timeSupport.js
function t3(t4, n4) {
  if (!t4)
    return null;
  const e3 = n4.featureAdapter, { startTimeField: u3, endTimeField: l2 } = t4;
  let r3 = Number.POSITIVE_INFINITY, i3 = Number.NEGATIVE_INFINITY;
  if (u3 && l2)
    n4.forEach((t5) => {
      const n5 = e3.getAttribute(t5, u3), o3 = e3.getAttribute(t5, l2);
      null == n5 || isNaN(n5) || (r3 = Math.min(r3, n5)), null == o3 || isNaN(o3) || (i3 = Math.max(i3, o3));
    });
  else {
    const t5 = u3 || l2;
    n4.forEach((n5) => {
      const u4 = e3.getAttribute(n5, t5);
      null == u4 || isNaN(u4) || (r3 = Math.min(r3, u4), i3 = Math.max(i3, u4));
    });
  }
  return { start: r3, end: i3 };
}
function n3(t4, n4, r3) {
  if (!n4 || !t4)
    return null;
  const { startTimeField: i3, endTimeField: o3 } = t4;
  if (!i3 && !o3)
    return null;
  const { start: s2, end: a } = n4;
  return null === s2 && null === a ? null : void 0 === s2 && void 0 === a ? l() : i3 && o3 ? e2(r3, i3, o3, s2, a) : u2(r3, i3 || o3, s2, a);
}
function e2(t4, n4, e3, u3, l2) {
  return null != u3 && null != l2 ? (r3) => {
    const i3 = t4.getAttribute(r3, n4), o3 = t4.getAttribute(r3, e3);
    return (null == i3 || i3 <= l2) && (null == o3 || o3 >= u3);
  } : null != u3 ? (n5) => {
    const l3 = t4.getAttribute(n5, e3);
    return null == l3 || l3 >= u3;
  } : null != l2 ? (e4) => {
    const u4 = t4.getAttribute(e4, n4);
    return null == u4 || u4 <= l2;
  } : void 0;
}
function u2(t4, n4, e3, u3) {
  return null != e3 && null != u3 && e3 === u3 ? (u4) => t4.getAttribute(u4, n4) === e3 : null != e3 && null != u3 ? (l2) => {
    const r3 = t4.getAttribute(l2, n4);
    return r3 >= e3 && r3 <= u3;
  } : null != e3 ? (u4) => t4.getAttribute(u4, n4) >= e3 : null != u3 ? (e4) => t4.getAttribute(e4, n4) <= u3 : void 0;
}
function l() {
  return () => false;
}

export {
  v2 as v,
  P,
  I2 as I,
  t3 as t,
  n3 as n
};
//# sourceMappingURL=chunk-3XRZHFYO.js.map
