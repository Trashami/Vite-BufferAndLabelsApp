{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import e from\"../../../../../core/Error.js\";import{isSome as t,isNone as n}from\"../../../../../core/maybe.js\";import{isDataProtocol as r,dataComponents as a}from\"../../../../../core/urlUtils.js\";function i(e){const n=c(e);return t(n)?n.toDataURL():\"\"}async function o(t){const r=c(t);if(n(r))throw new e(\"imageToArrayBuffer\",\"Unsupported image type\");const a=await m(t),i=await new Promise((e=>r.toBlob(e,a)));if(!i)throw new e(\"imageToArrayBuffer\",\"Failed to encode image\");return{data:await i.arrayBuffer(),type:a}}async function m(e){if(!(e instanceof HTMLImageElement))return\"image/png\";const t=e.src;if(r(t)){const e=a(t);return\"image/jpeg\"===e?.mediaType?e.mediaType:\"image/png\"}return/\\.png$/i.test(t)?\"image/png\":/\\.(jpg|jpeg)$/i.test(t)?\"image/jpeg\":\"image/png\"}function c(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement(\"canvas\");t.width=e.width,t.height=e.height;const n=t.getContext(\"2d\");return e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),t}function s(e){const t=[],n=new Uint8Array(e);for(let r=0;r<n.length;r++)t.push(String.fromCharCode(n[r]));return\"data:application/octet-stream;base64,\"+btoa(t.join(\"\"))}function g(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}export{s as encodeBase64DataUri,o as imageToArrayBuffer,i as imageToDataURI,c as imageTypeToCanvas,g as isArrayBufferPNG};\n"],
  "mappings": ";;;;;;;;;;;;;AAIsO,SAAS,EAAE,GAAE;AAAC,QAAM,IAAE,EAAE,CAAC;AAAE,SAAO,EAAE,CAAC,IAAE,EAAE,UAAU,IAAE;AAAE;AAAC,eAAe,EAAEA,IAAE;AAAC,QAAMC,KAAE,EAAED,EAAC;AAAE,MAAG,EAAEC,EAAC;AAAE,UAAM,IAAI,EAAE,sBAAqB,wBAAwB;AAAE,QAAM,IAAE,MAAM,EAAED,EAAC,GAAEE,KAAE,MAAM,IAAI,QAAS,OAAGD,GAAE,OAAO,GAAE,CAAC,CAAE;AAAE,MAAG,CAACC;AAAE,UAAM,IAAI,EAAE,sBAAqB,wBAAwB;AAAE,SAAM,EAAC,MAAK,MAAMA,GAAE,YAAY,GAAE,MAAK,EAAC;AAAC;AAAC,eAAe,EAAE,GAAE;AAAC,MAAG,EAAE,aAAa;AAAkB,WAAM;AAAY,QAAMF,KAAE,EAAE;AAAI,MAAG,EAAEA,EAAC,GAAE;AAAC,UAAMG,KAAE,GAAEH,EAAC;AAAE,WAAM,kBAAeG,MAAA,gBAAAA,GAAG,aAAUA,GAAE,YAAU;AAAA,EAAW;AAAC,SAAM,UAAU,KAAKH,EAAC,IAAE,cAAY,iBAAiB,KAAKA,EAAC,IAAE,eAAa;AAAW;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,aAAa;AAAkB,WAAO;AAAE,MAAG,aAAa;AAAiB,WAAO;AAAK,QAAMA,KAAE,SAAS,cAAc,QAAQ;AAAE,EAAAA,GAAE,QAAM,EAAE,OAAMA,GAAE,SAAO,EAAE;AAAO,QAAM,IAAEA,GAAE,WAAW,IAAI;AAAE,SAAO,aAAa,mBAAiB,EAAE,UAAU,GAAE,GAAE,GAAE,EAAE,OAAM,EAAE,MAAM,IAAE,aAAa,aAAW,EAAE,aAAa,GAAE,GAAE,CAAC,GAAEA;AAAC;AAAC,SAASI,GAAE,GAAE;AAAC,QAAMJ,KAAE,CAAC,GAAE,IAAE,IAAI,WAAW,CAAC;AAAE,WAAQC,KAAE,GAAEA,KAAE,EAAE,QAAOA;AAAI,IAAAD,GAAE,KAAK,OAAO,aAAa,EAAEC,GAAE,CAAC;AAAE,SAAM,0CAAwC,KAAKD,GAAE,KAAK,EAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,EAAE,aAAW;AAAE,WAAM;AAAG,QAAMA,KAAE,IAAI,WAAW,CAAC;AAAE,SAAO,QAAMA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE,MAAI,OAAKA,GAAE;AAAE;",
  "names": ["t", "r", "i", "e", "s"]
}
