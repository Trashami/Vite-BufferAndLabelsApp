{
  "version": 3,
  "sources": ["../../@arcgis/core/chunks/SSAOBlur.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{i as e}from\"./vec3.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";import{ReadLinearDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{Float2PassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DDrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const f=4;function c(){const c=new l,u=c.fragment;c.include(r);const m=(f+1)/2,p=1/(2*m*m);return u.include(o),u.uniforms.add([new d(\"depthMap\",(e=>e.depthTexture)),new i(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new n(\"projScale\",((r,o)=>{const t=e(o.camera.eye,o.camera.center);return t>5e4?Math.max(0,r.projScale-(t-5e4)):r.projScale})),new a(\"nearFar\",((e,r)=>r.camera.nearFar))]),u.code.add(s`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture2D(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${s.float(p)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),u.code.add(s`\n    void main(void) {\n      float b = 0.0;\n      float w_total = 0.0;\n\n      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float sharpness = -0.05 * projScale / center_d;\n      for (int r = -${s.int(f)}; r <= ${s.int(f)}; ++r) {\n        float rf = float(r);\n        vec2 uvOffset = uv + rf * blurSize;\n        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n      }\n\n      gl_FragColor = vec4(b / w_total);\n    }\n  `),c}const u=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:\"Module\"}));export{u as S,c as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAI65B,IAAMA,KAAE;AAAE,SAAS,IAAG;AAAC,QAAMC,KAAE,IAAIC,MAAEC,KAAEF,GAAE;AAAS,EAAAA,GAAE,QAAQ,CAAC;AAAE,QAAM,KAAGD,KAAE,KAAG,GAAE,IAAE,KAAG,IAAE,IAAE;AAAG,SAAOG,GAAE,QAAQ,CAAC,GAAEA,GAAE,SAAS,IAAI,CAAC,IAAI,EAAE,YAAY,CAAAC,OAAGA,GAAE,YAAa,GAAE,IAAIJ,GAAE,OAAO,CAAAI,OAAGA,GAAE,YAAa,GAAE,IAAIF,GAAE,YAAY,CAAAE,OAAGA,GAAE,QAAS,GAAE,IAAIF,GAAE,aAAa,CAAC,GAAEA,OAAI;AAAC,UAAM,IAAE,EAAEA,GAAE,OAAO,KAAIA,GAAE,OAAO,MAAM;AAAE,WAAO,IAAE,MAAI,KAAK,IAAI,GAAE,EAAE,aAAW,IAAE,IAAI,IAAE,EAAE;AAAA,EAAS,CAAE,GAAE,IAAI,EAAE,WAAW,CAACE,IAAE,MAAI,EAAE,OAAO,OAAQ,CAAC,CAAC,GAAED,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAO7xC,EAAE,MAAM,CAAC;AAAA;AAAA;AAAA;AAAA,GAIrC,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAQM,EAAE,IAAIH,EAAC,WAAW,EAAE,IAAIA,EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQ5C,GAAEC;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["f", "c", "o", "u", "e"]
}
