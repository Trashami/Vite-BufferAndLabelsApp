import {
  R
} from "./chunk-QPAL3PC4.js";
import {
  i,
  r
} from "./chunk-QXJIQKLY.js";
import {
  n3 as n
} from "./chunk-GRWIJKD6.js";
import {
  I
} from "./chunk-EQNT4A7P.js";
import {
  e
} from "./chunk-IQBIGNPU.js";
import {
  u
} from "./chunk-6M2AHKYV.js";

// node_modules/@arcgis/core/views/2d/engine/BitmapTile.js
var r2 = class extends r {
  constructor(e2, s, r3, i2, a, n3, m = null) {
    super(e2, s, r3, i2, a, n3), this.bitmap = new R(m, { immutable: false, requestRenderOnSourceChangedEnabled: false }), this.bitmap.coordScale = [a, n3], this.bitmap.once("isReady", () => this.ready());
  }
  destroy() {
    super.destroy(), this.bitmap.destroy();
  }
  beforeRender(e2) {
    super.beforeRender(e2), this.bitmap.beforeRender(e2);
  }
  afterRender(e2) {
    super.afterRender(e2), this.bitmap.afterRender(e2);
  }
  set stencilRef(e2) {
    this.bitmap.stencilRef = e2;
  }
  get stencilRef() {
    return this.bitmap.stencilRef;
  }
  _createTransforms() {
    return { dvs: e(), tileMat3: e() };
  }
  setTransform(e2) {
    super.setTransform(e2), this.bitmap.transforms.dvs = this.transforms.dvs;
  }
  onAttach() {
    this.bitmap.stage = this.stage;
  }
  onDetach() {
    this.bitmap && (this.bitmap.stage = null);
  }
};

// node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js
var n2 = class extends i {
  get requiresDedicatedFBO() {
    return this.children.some((e2) => "additive" === e2.bitmap.blendFunction);
  }
  createTile(r3) {
    const t = this._tileInfoView.getTileBounds(u(), r3), s = this._tileInfoView.getTileResolution(r3.level), [n3, o] = this._tileInfoView.tileInfo.size;
    return new r2(r3, s, t[0], t[3], n3, o);
  }
  prepareRenderPasses(e2) {
    const i2 = e2.registerRenderPass({ name: "bitmap (tile)", brushes: [n.bitmap], target: () => this.children.map((e3) => e3.bitmap), drawPhase: I.MAP });
    return [...super.prepareRenderPasses(e2), i2];
  }
  doRender(e2) {
    this.visible && e2.drawPhase === I.MAP && super.doRender(e2);
  }
};

export {
  n2 as n
};
//# sourceMappingURL=chunk-44ZQUD2T.js.map
